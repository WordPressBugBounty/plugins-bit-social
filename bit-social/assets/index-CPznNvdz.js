import{a as z,aI as le,o as wt,Y as Q,h as Xe,W as Dt,d as _e,r as K,c as V,g as x,aQ as T,_ as de,aR as pt,f as W,u as Le,C as Ot,aL as $t,aM as Pt,aN as Tt,aO as $,b9 as Ne,aP as Mt,aH as pe,i as Rt,m as It,k as Lt,n as We,aB as _t,p as At,aY as Ht,aX as tt,X as yt,aV as Bt,bh as jt}from"./main-loud-buses-flash.js";import{L as Ft}from"./Input-7tgEkJGt.js";import{g as zt}from"./index-DhLEDAJI.js";import{g as Vt}from"./collapse-BbEVqHco.js";function q(n,t){return n[t]}var qt=["children"];function mt(n,t){return"".concat(n,"-").concat(t)}function Wt(n){return n&&n.type&&n.type.isTreeNode}function Me(n,t){return n??t}function Ce(n){var t=n||{},r=t.title,e=t._title,o=t.key,l=t.children,c=r||"title";return{title:c,_title:e||[c],key:o||"key",children:l||"children"}}function bt(n){function t(r){var e=Dt(r);return e.map(function(o){if(!Wt(o))return le(!o,"Tree/TreeNode can only accept TreeNode as children."),null;var l=o.key,c=o.props,a=c.children,d=_e(c,qt),i=z({key:l},d),u=t(a);return u.length&&(i.children=u),i}).filter(function(o){return o})}return t(n)}function je(n,t,r){var e=Ce(r),o=e._title,l=e.key,c=e.children,a=new Set(t===!0?[]:t),d=[];function i(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return u.map(function(g,h){for(var p=mt(f?f.pos:"0",h),m=Me(g[l],p),v,y=0;y<o.length;y+=1){var E=o[y];if(g[E]!==void 0){v=g[E];break}}var b=Object.assign(wt(g,[].concat(Q(o),[l,c])),{title:v,key:m,parent:f,pos:p,children:null,data:g,isStart:[].concat(Q(f?f.isStart:[]),[h===0]),isEnd:[].concat(Q(f?f.isEnd:[]),[h===u.length-1])});return d.push(b),t===!0||a.has(m)?b.children=i(g[c]||[],b):b.children=[],b})}return i(n),d}function Ut(n,t,r){var e={};Xe(r)==="object"?e=r:e={externalGetKey:r},e=e||{};var o=e,l=o.childrenPropName,c=o.externalGetKey,a=o.fieldNames,d=Ce(a),i=d.key,u=d.children,f=l||u,g;c?typeof c=="string"?g=function(m){return m[c]}:typeof c=="function"&&(g=function(m){return c(m)}):g=function(m,v){return Me(m[i],v)};function h(p,m,v,y){var E=p?p[f]:n,b=p?mt(v.pos,m):"0",N=p?[].concat(Q(y),[p]):[];if(p){var C=g(p,b),S={node:p,index:m,pos:b,key:C,parentPos:v.node?v.pos:null,level:v.level+1,nodes:N};t(S)}E&&E.forEach(function(D,w){h(D,w,{node:p,pos:b,level:v?v.level+1:-1},N)})}h(null)}function Kt(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.initWrapper,e=t.processEntity,o=t.onProcessFinished,l=t.externalGetKey,c=t.childrenPropName,a=t.fieldNames,d=arguments.length>2?arguments[2]:void 0,i=l||d,u={},f={},g={posEntities:u,keyEntities:f};return r&&(g=r(g)||g),Ut(n,function(h){var p=h.node,m=h.index,v=h.pos,y=h.key,E=h.parentPos,b=h.level,N=h.nodes,C={node:p,nodes:N,index:m,key:y,pos:v,level:b},S=Me(y,v);u[v]=C,f[S]=C,C.parent=u[E],C.parent&&(C.parent.children=C.parent.children||[],C.parent.children.push(C)),e&&e(C,g)},{externalGetKey:i,childrenPropName:c,fieldNames:a}),o&&o(g),g}function Pe(n,t){var r=t.expandedKeys,e=t.selectedKeys,o=t.loadedKeys,l=t.loadingKeys,c=t.checkedKeys,a=t.halfCheckedKeys,d=t.dragOverNodeKey,i=t.dropPosition,u=t.keyEntities,f=q(u,n),g={eventKey:n,expanded:r.indexOf(n)!==-1,selected:e.indexOf(n)!==-1,loaded:o.indexOf(n)!==-1,loading:l.indexOf(n)!==-1,checked:c.indexOf(n)!==-1,halfChecked:a.indexOf(n)!==-1,pos:String(f?f.pos:""),dragOver:d===n&&i===0,dragOverGapTop:d===n&&i===-1,dragOverGapBottom:d===n&&i===1};return g}function j(n){var t=n.data,r=n.expanded,e=n.selected,o=n.checked,l=n.loaded,c=n.loading,a=n.halfChecked,d=n.dragOver,i=n.dragOverGapTop,u=n.dragOverGapBottom,f=n.pos,g=n.active,h=n.eventKey,p=z(z({},t),{},{expanded:r,selected:e,checked:o,loaded:l,loading:c,halfChecked:a,dragOver:d,dragOverGapTop:i,dragOverGapBottom:u,pos:f,active:g,key:h});return"props"in p||Object.defineProperty(p,"props",{get:function(){return le(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n}}),p}function xt(n,t){var r=new Set;return n.forEach(function(e){t.has(e)||r.add(e)}),r}function Gt(n){var t=n||{},r=t.disabled,e=t.disableCheckbox,o=t.checkable;return!!(r||e)||o===!1}function Xt(n,t,r,e){for(var o=new Set(n),l=new Set,c=0;c<=r;c+=1){var a=t.get(c)||new Set;a.forEach(function(f){var g=f.key,h=f.node,p=f.children,m=p===void 0?[]:p;o.has(g)&&!e(h)&&m.filter(function(v){return!e(v.node)}).forEach(function(v){o.add(v.key)})})}for(var d=new Set,i=r;i>=0;i-=1){var u=t.get(i)||new Set;u.forEach(function(f){var g=f.parent,h=f.node;if(!(e(h)||!f.parent||d.has(f.parent.key))){if(e(f.parent.node)){d.add(g.key);return}var p=!0,m=!1;(g.children||[]).filter(function(v){return!e(v.node)}).forEach(function(v){var y=v.key,E=o.has(y);p&&!E&&(p=!1),!m&&(E||l.has(y))&&(m=!0)}),p&&o.add(g.key),m&&l.add(g.key),d.add(g.key)}})}return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(xt(l,o))}}function Yt(n,t,r,e,o){for(var l=new Set(n),c=new Set(t),a=0;a<=e;a+=1){var d=r.get(a)||new Set;d.forEach(function(g){var h=g.key,p=g.node,m=g.children,v=m===void 0?[]:m;!l.has(h)&&!c.has(h)&&!o(p)&&v.filter(function(y){return!o(y.node)}).forEach(function(y){l.delete(y.key)})})}c=new Set;for(var i=new Set,u=e;u>=0;u-=1){var f=r.get(u)||new Set;f.forEach(function(g){var h=g.parent,p=g.node;if(!(o(p)||!g.parent||i.has(g.parent.key))){if(o(g.parent.node)){i.add(h.key);return}var m=!0,v=!1;(h.children||[]).filter(function(y){return!o(y.node)}).forEach(function(y){var E=y.key,b=l.has(E);m&&!b&&(m=!1),!v&&(b||c.has(E))&&(v=!0)}),m||l.delete(h.key),v&&c.add(h.key),i.add(h.key)}})}return{checkedKeys:Array.from(l),halfCheckedKeys:Array.from(xt(c,l))}}function Fe(n,t,r,e){var o=[],l;e?l=e:l=Gt;var c=new Set(n.filter(function(u){var f=!!q(r,u);return f||o.push(u),f})),a=new Map,d=0;Object.keys(r).forEach(function(u){var f=r[u],g=f.level,h=a.get(g);h||(h=new Set,a.set(g,h)),h.add(f),d=Math.max(d,g)}),le(!o.length,"Tree missing follow keys: ".concat(o.slice(0,100).map(function(u){return"'".concat(u,"'")}).join(", ")));var i;return t===!0?i=Xt(c,a,d,l):i=Yt(c,t.halfCheckedKeys,a,d,l),i}var Ye=K.createContext(null),Qt=K.createContext({}),Jt=function(t){for(var r=t.prefixCls,e=t.level,o=t.isStart,l=t.isEnd,c="".concat(r,"-indent-unit"),a=[],d=0;d<e;d+=1)a.push(K.createElement("span",{key:d,className:V(c,x(x({},"".concat(c,"-start"),o[d]),"".concat(c,"-end"),l[d]))}));return K.createElement("span",{"aria-hidden":"true",className:"".concat(r,"-indent")},a)};const Zt=K.memo(Jt);var en=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],nt="open",at="close",tn="---",Te=function(t){var r,e,o,l=t.eventKey,c=t.className,a=t.style,d=t.dragOver,i=t.dragOverGapTop,u=t.dragOverGapBottom,f=t.isLeaf,g=t.isStart,h=t.isEnd,p=t.expanded,m=t.selected,v=t.checked,y=t.halfChecked,E=t.loading,b=t.domRef,N=t.active,C=t.data,S=t.onMouseMove,D=t.selectable,w=_e(t,en),s=T.useContext(Ye),O=T.useContext(Qt),R=T.useRef(null),I=T.useState(!1),A=de(I,2),P=A[0],M=A[1],_=!!(s.disabled||t.disabled||(r=O.nodeDisabled)!==null&&r!==void 0&&r.call(O,C)),B=T.useMemo(function(){return!s.checkable||t.checkable===!1?!1:s.checkable},[s.checkable,t.checkable]),ee=function(k){_||s.onNodeSelect(k,j(t))},te=function(k){_||!B||t.disableCheckbox||s.onNodeCheck(k,j(t),!v)},F=T.useMemo(function(){return typeof D=="boolean"?D:s.selectable},[D,s.selectable]),ye=function(k){s.onNodeClick(k,j(t)),F?ee(k):te(k)},se=function(k){s.onNodeDoubleClick(k,j(t))},G=function(k){s.onNodeMouseEnter(k,j(t))},ce=function(k){s.onNodeMouseLeave(k,j(t))},me=function(k){s.onNodeContextMenu(k,j(t))},U=T.useMemo(function(){return!!(s.draggable&&(!s.draggable.nodeDraggable||s.draggable.nodeDraggable(C)))},[s.draggable,C]),ke=function(k){k.stopPropagation(),M(!0),s.onNodeDragStart(k,t);try{k.dataTransfer.setData("text/plain","")}catch{}},ne=function(k){k.preventDefault(),k.stopPropagation(),s.onNodeDragEnter(k,t)},Se=function(k){k.preventDefault(),k.stopPropagation(),s.onNodeDragOver(k,t)},be=function(k){k.stopPropagation(),s.onNodeDragLeave(k,t)},ae=function(k){k.stopPropagation(),M(!1),s.onNodeDragEnd(k,t)},ue=function(k){k.preventDefault(),k.stopPropagation(),M(!1),s.onNodeDrop(k,t)},Ae=function(k){E||s.onNodeExpand(k,j(t))},Ke=T.useMemo(function(){var L=q(s.keyEntities,l)||{},k=L.children;return!!(k||[]).length},[s.keyEntities,l]),re=T.useMemo(function(){return f===!1?!1:f||!s.loadData&&!Ke||s.loadData&&t.loaded&&!Ke},[f,s.loadData,Ke,t.loaded]);T.useEffect(function(){E||typeof s.loadData=="function"&&p&&!re&&!t.loaded&&s.onNodeLoad(j(t))},[E,s.loadData,s.onNodeLoad,p,re,t]);var we=T.useMemo(function(){var L;return(L=s.draggable)!==null&&L!==void 0&&L.icon?T.createElement("span",{className:"".concat(s.prefixCls,"-draggable-icon")},s.draggable.icon):null},[s.draggable]),De=function(k){var Y=t.switcherIcon||s.switcherIcon;return typeof Y=="function"?Y(z(z({},t),{},{isLeaf:k})):Y},Oe=function(){if(re){var k=De(!0);return k!==!1?T.createElement("span",{className:V("".concat(s.prefixCls,"-switcher"),"".concat(s.prefixCls,"-switcher-noop"))},k):null}var Y=De(!1);return Y!==!1?T.createElement("span",{onClick:Ae,className:V("".concat(s.prefixCls,"-switcher"),"".concat(s.prefixCls,"-switcher_").concat(p?nt:at))},Y):null},He=T.useMemo(function(){if(!B)return null;var L=typeof B!="boolean"?B:null;return T.createElement("span",{className:V("".concat(s.prefixCls,"-checkbox"),x(x(x({},"".concat(s.prefixCls,"-checkbox-checked"),v),"".concat(s.prefixCls,"-checkbox-indeterminate"),!v&&y),"".concat(s.prefixCls,"-checkbox-disabled"),_||t.disableCheckbox)),onClick:te,role:"checkbox","aria-checked":y?"mixed":v,"aria-disabled":_||t.disableCheckbox,"aria-label":"Select ".concat(typeof t.title=="string"?t.title:"tree node")},L)},[B,v,y,_,t.disableCheckbox,t.title]),fe=T.useMemo(function(){return re?null:p?nt:at},[re,p]),H=T.useMemo(function(){return T.createElement("span",{className:V("".concat(s.prefixCls,"-iconEle"),"".concat(s.prefixCls,"-icon__").concat(fe||"docu"),x({},"".concat(s.prefixCls,"-icon_loading"),E))})},[s.prefixCls,fe,E]),X=T.useMemo(function(){var L=!!s.draggable,k=!t.disabled&&L&&s.dragOverNodeKey===l;return k?s.dropIndicatorRender({dropPosition:s.dropPosition,dropLevelOffset:s.dropLevelOffset,indent:s.indent,prefixCls:s.prefixCls,direction:s.direction}):null},[s.dropPosition,s.dropLevelOffset,s.indent,s.prefixCls,s.direction,s.draggable,s.dragOverNodeKey,s.dropIndicatorRender]),J=T.useMemo(function(){var L=t.title,k=L===void 0?tn:L,Y="".concat(s.prefixCls,"-node-content-wrapper"),Be;if(s.showIcon){var Re=t.icon||s.icon;Be=Re?T.createElement("span",{className:V("".concat(s.prefixCls,"-iconEle"),"".concat(s.prefixCls,"-icon__customize"))},typeof Re=="function"?Re(t):Re):H}else s.loadData&&E&&(Be=H);var Ie;return typeof k=="function"?Ie=k(C):s.titleRender?Ie=s.titleRender(C):Ie=k,T.createElement("span",{ref:R,title:typeof k=="string"?k:"",className:V(Y,"".concat(Y,"-").concat(fe||"normal"),x({},"".concat(s.prefixCls,"-node-selected"),!_&&(m||P))),onMouseEnter:G,onMouseLeave:ce,onContextMenu:me,onClick:ye,onDoubleClick:se},Be,T.createElement("span",{className:"".concat(s.prefixCls,"-title")},Ie),X)},[s.prefixCls,s.showIcon,t,s.icon,H,s.titleRender,C,fe,G,ce,me,ye,se]),xe=pt(w,{aria:!0,data:!0}),ve=q(s.keyEntities,l)||{},$e=ve.level,Ee=h[h.length-1],oe=!_&&U,ge=s.draggingNodeKey===l,et=D!==void 0?{"aria-selected":!!D}:void 0;return T.createElement("div",W({ref:b,role:"treeitem","aria-expanded":f?void 0:p,className:V(c,"".concat(s.prefixCls,"-treenode"),(o={},x(x(x(x(x(x(x(x(x(x(o,"".concat(s.prefixCls,"-treenode-disabled"),_),"".concat(s.prefixCls,"-treenode-switcher-").concat(p?"open":"close"),!f),"".concat(s.prefixCls,"-treenode-checkbox-checked"),v),"".concat(s.prefixCls,"-treenode-checkbox-indeterminate"),y),"".concat(s.prefixCls,"-treenode-selected"),m),"".concat(s.prefixCls,"-treenode-loading"),E),"".concat(s.prefixCls,"-treenode-active"),N),"".concat(s.prefixCls,"-treenode-leaf-last"),Ee),"".concat(s.prefixCls,"-treenode-draggable"),U),"dragging",ge),x(x(x(x(x(x(x(o,"drop-target",s.dropTargetKey===l),"drop-container",s.dropContainerKey===l),"drag-over",!_&&d),"drag-over-gap-top",!_&&i),"drag-over-gap-bottom",!_&&u),"filter-node",(e=s.filterTreeNode)===null||e===void 0?void 0:e.call(s,j(t))),"".concat(s.prefixCls,"-treenode-leaf"),re))),style:a,draggable:oe,onDragStart:oe?ke:void 0,onDragEnter:U?ne:void 0,onDragOver:U?Se:void 0,onDragLeave:U?be:void 0,onDrop:U?ue:void 0,onDragEnd:U?ae:void 0,onMouseMove:S},et,xe),T.createElement(Zt,{prefixCls:s.prefixCls,level:$e,isStart:g,isEnd:h}),we,Oe(),He,J)};Te.isTreeNode=1;function Z(n,t){if(!n)return[];var r=n.slice(),e=r.indexOf(t);return e>=0&&r.splice(e,1),r}function ie(n,t){var r=(n||[]).slice();return r.indexOf(t)===-1&&r.push(t),r}function Qe(n){return n.split("-")}function nn(n,t){var r=[],e=q(t,n);function o(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.forEach(function(c){var a=c.key,d=c.children;r.push(a),o(d)})}return o(e.children),r}function an(n){if(n.parent){var t=Qe(n.pos);return Number(t[t.length-1])===n.parent.children.length-1}return!1}function rn(n){var t=Qe(n.pos);return Number(t[t.length-1])===0}function rt(n,t,r,e,o,l,c,a,d,i){var u,f=n.clientX,g=n.clientY,h=n.target.getBoundingClientRect(),p=h.top,m=h.height,v=(i==="rtl"?-1:1)*(((o==null?void 0:o.x)||0)-f),y=(v-12)/e,E=d.filter(function(_){var B;return(B=a[_])===null||B===void 0||(B=B.children)===null||B===void 0?void 0:B.length}),b=q(a,r.eventKey);if(g<p+m/2){var N=c.findIndex(function(_){return _.key===b.key}),C=N<=0?0:N-1,S=c[C].key;b=q(a,S)}var D=b.key,w=b,s=b.key,O=0,R=0;if(!E.includes(D))for(var I=0;I<y&&an(b);I+=1)b=b.parent,R+=1;var A=t.data,P=b.node,M=!0;return rn(b)&&b.level===0&&g<p+m/2&&l({dragNode:A,dropNode:P,dropPosition:-1})&&b.key===r.eventKey?O=-1:(w.children||[]).length&&E.includes(s)?l({dragNode:A,dropNode:P,dropPosition:0})?O=0:M=!1:R===0?y>-1.5?l({dragNode:A,dropNode:P,dropPosition:1})?O=1:M=!1:l({dragNode:A,dropNode:P,dropPosition:0})?O=0:l({dragNode:A,dropNode:P,dropPosition:1})?O=1:M=!1:l({dragNode:A,dropNode:P,dropPosition:1})?O=1:M=!1,{dropPosition:O,dropLevelOffset:R,dropTargetKey:b.key,dropTargetPos:b.pos,dragOverNodeKey:s,dropContainerKey:O===0?null:((u=b.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:M}}function ot(n,t){if(n){var r=t.multiple;return r?n.slice():n.length?[n[0]]:n}}function ze(n){if(!n)return null;var t;if(Array.isArray(n))t={checkedKeys:n,halfCheckedKeys:void 0};else if(Xe(n)==="object")t={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return le(!1,"`checkedKeys` is not an array or an object"),null;return t}function Ue(n,t){var r=new Set;function e(o){if(!r.has(o)){var l=q(t,o);if(l){r.add(o);var c=l.parent,a=l.node;a.disabled||c&&e(c.key)}}}return(n||[]).forEach(function(o){e(o)}),Q(r)}var on=function(t){var r=t.dropPosition,e=t.dropLevelOffset,o=t.indent,l={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(r){case-1:l.top=0,l.left=-e*o;break;case 1:l.bottom=0,l.left=-e*o;break;case 0:l.bottom=0,l.left=o;break}return T.createElement("div",{style:l})};function Et(n){if(n==null)throw new TypeError("Cannot destructure "+n)}function dn(n,t){var r=K.useState(!1),e=de(r,2),o=e[0],l=e[1];Le(function(){if(o)return n(),function(){t()}},[o]),Le(function(){return l(!0),function(){l(!1)}},[])}var ln=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],sn=K.forwardRef(function(n,t){var r=n.className,e=n.style,o=n.motion,l=n.motionNodes,c=n.motionType,a=n.onMotionStart,d=n.onMotionEnd,i=n.active,u=n.treeNodeRequiredProps,f=_e(n,ln),g=K.useState(!0),h=de(g,2),p=h[0],m=h[1],v=K.useContext(Ye),y=v.prefixCls,E=l&&c!=="hide";Le(function(){l&&E!==p&&m(E)},[l]);var b=function(){l&&a()},N=K.useRef(!1),C=function(){l&&!N.current&&(N.current=!0,d())};dn(b,C);var S=function(w){E===w&&C()};return l?K.createElement(Ot,W({ref:t,visible:p},o,{motionAppear:c==="show",onVisibleChanged:S}),function(D,w){var s=D.className,O=D.style;return K.createElement("div",{ref:w,className:V("".concat(y,"-treenode-motion"),s),style:O},l.map(function(R){var I=Object.assign({},(Et(R.data),R.data)),A=R.title,P=R.key,M=R.isStart,_=R.isEnd;delete I.children;var B=Pe(P,u);return K.createElement(Te,W({},I,B,{title:A,active:i,data:R.data,key:P,isStart:M,isEnd:_}))}))}):K.createElement(Te,W({domRef:t,className:r,style:e},f,{active:i}))});function cn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n.length,e=t.length;if(Math.abs(r-e)!==1)return{add:!1,key:null};function o(l,c){var a=new Map;l.forEach(function(i){a.set(i,!0)});var d=c.filter(function(i){return!a.has(i)});return d.length===1?d[0]:null}return r<e?{add:!0,key:o(n,t)}:{add:!1,key:o(t,n)}}function it(n,t,r){var e=n.findIndex(function(a){return a.key===r}),o=n[e+1],l=t.findIndex(function(a){return a.key===r});if(o){var c=t.findIndex(function(a){return a.key===o.key});return t.slice(l+1,c)}return t.slice(l+1)}var un=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],dt={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},fn=function(){},he="RC_TREE_MOTION_".concat(Math.random()),Ge={key:he},Nt={key:he,level:0,index:0,pos:"0",node:Ge,nodes:[Ge]},lt={parent:null,children:[],pos:Nt.pos,data:Ge,title:null,key:he,isStart:[],isEnd:[]};function st(n,t,r,e){return t===!1||!r?n:n.slice(0,Math.ceil(r/e)+1)}function ct(n){var t=n.key,r=n.pos;return Me(t,r)}function vn(n){for(var t=String(n.data.key),r=n;r.parent;)r=r.parent,t="".concat(r.data.key," > ").concat(t);return t}var gn=K.forwardRef(function(n,t){var r=n.prefixCls,e=n.data;n.selectable,n.checkable;var o=n.expandedKeys,l=n.selectedKeys,c=n.checkedKeys,a=n.loadedKeys,d=n.loadingKeys,i=n.halfCheckedKeys,u=n.keyEntities,f=n.disabled,g=n.dragging,h=n.dragOverNodeKey,p=n.dropPosition,m=n.motion,v=n.height,y=n.itemHeight,E=n.virtual,b=n.scrollWidth,N=n.focusable,C=n.activeItem,S=n.focused,D=n.tabIndex,w=n.onKeyDown,s=n.onFocus,O=n.onBlur,R=n.onActiveChange,I=n.onListChangeStart,A=n.onListChangeEnd,P=_e(n,un),M=K.useRef(null),_=K.useRef(null);K.useImperativeHandle(t,function(){return{scrollTo:function(X){M.current.scrollTo(X)},getIndentWidth:function(){return _.current.offsetWidth}}});var B=K.useState(o),ee=de(B,2),te=ee[0],F=ee[1],ye=K.useState(e),se=de(ye,2),G=se[0],ce=se[1],me=K.useState(e),U=de(me,2),ke=U[0],ne=U[1],Se=K.useState([]),be=de(Se,2),ae=be[0],ue=be[1],Ae=K.useState(null),Ke=de(Ae,2),re=Ke[0],we=Ke[1],De=K.useRef(e);De.current=e;function Oe(){var H=De.current;ce(H),ne(H),ue([]),we(null),A()}Le(function(){F(o);var H=cn(te,o);if(H.key!==null)if(H.add){var X=G.findIndex(function(oe){var ge=oe.key;return ge===H.key}),J=st(it(G,e,H.key),E,v,y),xe=G.slice();xe.splice(X+1,0,lt),ne(xe),ue(J),we("show")}else{var ve=e.findIndex(function(oe){var ge=oe.key;return ge===H.key}),$e=st(it(e,G,H.key),E,v,y),Ee=e.slice();Ee.splice(ve+1,0,lt),ne(Ee),ue($e),we("hide")}else G!==e&&(ce(e),ne(e))},[o,e]),K.useEffect(function(){g||Oe()},[g]);var He=m?ke:e,fe={expandedKeys:o,selectedKeys:l,loadedKeys:a,loadingKeys:d,checkedKeys:c,halfCheckedKeys:i,dragOverNodeKey:h,dropPosition:p,keyEntities:u};return K.createElement(K.Fragment,null,S&&C&&K.createElement("span",{style:dt,"aria-live":"assertive"},vn(C)),K.createElement("div",null,K.createElement("input",{style:dt,disabled:N===!1||f,tabIndex:N!==!1?D:null,onKeyDown:w,onFocus:s,onBlur:O,value:"",onChange:fn,"aria-label":"for screen reader"})),K.createElement("div",{className:"".concat(r,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},K.createElement("div",{className:"".concat(r,"-indent")},K.createElement("div",{ref:_,className:"".concat(r,"-indent-unit")}))),K.createElement(Ft,W({},P,{data:He,itemKey:ct,height:v,fullHeight:!1,virtual:E,itemHeight:y,scrollWidth:b,prefixCls:"".concat(r,"-list"),ref:M,role:"tree",onVisibleChange:function(X){X.every(function(J){return ct(J)!==he})&&Oe()}}),function(H){var X=H.pos,J=Object.assign({},(Et(H.data),H.data)),xe=H.title,ve=H.key,$e=H.isStart,Ee=H.isEnd,oe=Me(ve,X);delete J.key,delete J.children;var ge=Pe(oe,fe);return K.createElement(sn,W({},J,ge,{title:xe,active:!!C&&ve===C.key,pos:X,data:H.data,isStart:$e,isEnd:Ee,motion:m,motionNodes:ve===he?ae:null,motionType:re,onMotionStart:I,onMotionEnd:Oe,treeNodeRequiredProps:fe,onMouseMove:function(){R(null)}}))}))}),hn=10,Je=function(n){$t(r,n);var t=Pt(r);function r(){var e;Tt(this,r);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return e=t.call.apply(t,[this].concat(l)),x($(e),"destroyed",!1),x($(e),"delayedDragEnterLogic",void 0),x($(e),"loadingRetryTimes",{}),x($(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Ce()}),x($(e),"dragStartMousePosition",null),x($(e),"dragNodeProps",null),x($(e),"currentMouseOverDroppableNodeKey",null),x($(e),"listRef",K.createRef()),x($(e),"onNodeDragStart",function(a,d){var i=e.state,u=i.expandedKeys,f=i.keyEntities,g=e.props.onDragStart,h=d.eventKey;e.dragNodeProps=d,e.dragStartMousePosition={x:a.clientX,y:a.clientY};var p=Z(u,h);e.setState({draggingNodeKey:h,dragChildrenKeys:nn(h,f),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(p),window.addEventListener("dragend",e.onWindowDragEnd),g==null||g({event:a,node:j(d)})}),x($(e),"onNodeDragEnter",function(a,d){var i=e.state,u=i.expandedKeys,f=i.keyEntities,g=i.dragChildrenKeys,h=i.flattenNodes,p=i.indent,m=e.props,v=m.onDragEnter,y=m.onExpand,E=m.allowDrop,b=m.direction,N=d.pos,C=d.eventKey;if(e.currentMouseOverDroppableNodeKey!==C&&(e.currentMouseOverDroppableNodeKey=C),!e.dragNodeProps){e.resetDragState();return}var S=rt(a,e.dragNodeProps,d,p,e.dragStartMousePosition,E,h,f,u,b),D=S.dropPosition,w=S.dropLevelOffset,s=S.dropTargetKey,O=S.dropContainerKey,R=S.dropTargetPos,I=S.dropAllowed,A=S.dragOverNodeKey;if(g.includes(s)||!I){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(P){clearTimeout(e.delayedDragEnterLogic[P])}),e.dragNodeProps.eventKey!==d.eventKey&&(a.persist(),e.delayedDragEnterLogic[N]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var P=Q(u),M=q(f,d.eventKey);M&&(M.children||[]).length&&(P=ie(u,d.eventKey)),e.props.hasOwnProperty("expandedKeys")||e.setExpandedKeys(P),y==null||y(P,{node:j(d),expanded:!0,nativeEvent:a.nativeEvent})}},800)),e.dragNodeProps.eventKey===s&&w===0){e.resetDragState();return}e.setState({dragOverNodeKey:A,dropPosition:D,dropLevelOffset:w,dropTargetKey:s,dropContainerKey:O,dropTargetPos:R,dropAllowed:I}),v==null||v({event:a,node:j(d),expandedKeys:u})}),x($(e),"onNodeDragOver",function(a,d){var i=e.state,u=i.dragChildrenKeys,f=i.flattenNodes,g=i.keyEntities,h=i.expandedKeys,p=i.indent,m=e.props,v=m.onDragOver,y=m.allowDrop,E=m.direction;if(e.dragNodeProps){var b=rt(a,e.dragNodeProps,d,p,e.dragStartMousePosition,y,f,g,h,E),N=b.dropPosition,C=b.dropLevelOffset,S=b.dropTargetKey,D=b.dropContainerKey,w=b.dropTargetPos,s=b.dropAllowed,O=b.dragOverNodeKey;u.includes(S)||!s||(e.dragNodeProps.eventKey===S&&C===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():N===e.state.dropPosition&&C===e.state.dropLevelOffset&&S===e.state.dropTargetKey&&D===e.state.dropContainerKey&&w===e.state.dropTargetPos&&s===e.state.dropAllowed&&O===e.state.dragOverNodeKey||e.setState({dropPosition:N,dropLevelOffset:C,dropTargetKey:S,dropContainerKey:D,dropTargetPos:w,dropAllowed:s,dragOverNodeKey:O}),v==null||v({event:a,node:j(d)}))}}),x($(e),"onNodeDragLeave",function(a,d){e.currentMouseOverDroppableNodeKey===d.eventKey&&!a.currentTarget.contains(a.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var i=e.props.onDragLeave;i==null||i({event:a,node:j(d)})}),x($(e),"onWindowDragEnd",function(a){e.onNodeDragEnd(a,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)}),x($(e),"onNodeDragEnd",function(a,d){var i=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),i==null||i({event:a,node:j(d)}),e.dragNodeProps=null,window.removeEventListener("dragend",e.onWindowDragEnd)}),x($(e),"onNodeDrop",function(a,d){var i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=e.state,g=f.dragChildrenKeys,h=f.dropPosition,p=f.dropTargetKey,m=f.dropTargetPos,v=f.dropAllowed;if(v){var y=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),p!==null){var E=z(z({},Pe(p,e.getTreeNodeRequiredProps())),{},{active:((i=e.getActiveItem())===null||i===void 0?void 0:i.key)===p,data:q(e.state.keyEntities,p).node}),b=g.includes(p);le(!b,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var N=Qe(m),C={event:a,node:j(E),dragNode:e.dragNodeProps?j(e.dragNodeProps):null,dragNodesKeys:[e.dragNodeProps.eventKey].concat(g),dropToGap:h!==0,dropPosition:h+Number(N[N.length-1])};u||y==null||y(C),e.dragNodeProps=null}}}),x($(e),"cleanDragState",function(){var a=e.state.draggingNodeKey;a!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null}),x($(e),"triggerExpandActionExpand",function(a,d){var i=e.state,u=i.expandedKeys,f=i.flattenNodes,g=d.expanded,h=d.key,p=d.isLeaf;if(!(p||a.shiftKey||a.metaKey||a.ctrlKey)){var m=f.filter(function(y){return y.key===h})[0],v=j(z(z({},Pe(h,e.getTreeNodeRequiredProps())),{},{data:m.data}));e.setExpandedKeys(g?Z(u,h):ie(u,h)),e.onNodeExpand(a,v)}}),x($(e),"onNodeClick",function(a,d){var i=e.props,u=i.onClick,f=i.expandAction;f==="click"&&e.triggerExpandActionExpand(a,d),u==null||u(a,d)}),x($(e),"onNodeDoubleClick",function(a,d){var i=e.props,u=i.onDoubleClick,f=i.expandAction;f==="doubleClick"&&e.triggerExpandActionExpand(a,d),u==null||u(a,d)}),x($(e),"onNodeSelect",function(a,d){var i=e.state.selectedKeys,u=e.state,f=u.keyEntities,g=u.fieldNames,h=e.props,p=h.onSelect,m=h.multiple,v=d.selected,y=d[g.key],E=!v;E?m?i=ie(i,y):i=[y]:i=Z(i,y);var b=i.map(function(N){var C=q(f,N);return C?C.node:null}).filter(Boolean);e.setUncontrolledState({selectedKeys:i}),p==null||p(i,{event:"select",selected:E,node:d,selectedNodes:b,nativeEvent:a.nativeEvent})}),x($(e),"onNodeCheck",function(a,d,i){var u=e.state,f=u.keyEntities,g=u.checkedKeys,h=u.halfCheckedKeys,p=e.props,m=p.checkStrictly,v=p.onCheck,y=d.key,E,b={event:"check",node:d,checked:i,nativeEvent:a.nativeEvent};if(m){var N=i?ie(g,y):Z(g,y),C=Z(h,y);E={checked:N,halfChecked:C},b.checkedNodes=N.map(function(R){return q(f,R)}).filter(Boolean).map(function(R){return R.node}),e.setUncontrolledState({checkedKeys:N})}else{var S=Fe([].concat(Q(g),[y]),!0,f),D=S.checkedKeys,w=S.halfCheckedKeys;if(!i){var s=new Set(D);s.delete(y);var O=Fe(Array.from(s),{halfCheckedKeys:w},f);D=O.checkedKeys,w=O.halfCheckedKeys}E=D,b.checkedNodes=[],b.checkedNodesPositions=[],b.halfCheckedKeys=w,D.forEach(function(R){var I=q(f,R);if(I){var A=I.node,P=I.pos;b.checkedNodes.push(A),b.checkedNodesPositions.push({node:A,pos:P})}}),e.setUncontrolledState({checkedKeys:D},!1,{halfCheckedKeys:w})}v==null||v(E,b)}),x($(e),"onNodeLoad",function(a){var d,i=a.key,u=e.state.keyEntities,f=q(u,i);if(!(f!=null&&(d=f.children)!==null&&d!==void 0&&d.length)){var g=new Promise(function(h,p){e.setState(function(m){var v=m.loadedKeys,y=v===void 0?[]:v,E=m.loadingKeys,b=E===void 0?[]:E,N=e.props,C=N.loadData,S=N.onLoad;if(!C||y.includes(i)||b.includes(i))return null;var D=C(a);return D.then(function(){var w=e.state.loadedKeys,s=ie(w,i);S==null||S(s,{event:"load",node:a}),e.setUncontrolledState({loadedKeys:s}),e.setState(function(O){return{loadingKeys:Z(O.loadingKeys,i)}}),h()}).catch(function(w){if(e.setState(function(O){return{loadingKeys:Z(O.loadingKeys,i)}}),e.loadingRetryTimes[i]=(e.loadingRetryTimes[i]||0)+1,e.loadingRetryTimes[i]>=hn){var s=e.state.loadedKeys;le(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:ie(s,i)}),h()}p(w)}),{loadingKeys:ie(b,i)}})});return g.catch(function(){}),g}}),x($(e),"onNodeMouseEnter",function(a,d){var i=e.props.onMouseEnter;i==null||i({event:a,node:d})}),x($(e),"onNodeMouseLeave",function(a,d){var i=e.props.onMouseLeave;i==null||i({event:a,node:d})}),x($(e),"onNodeContextMenu",function(a,d){var i=e.props.onRightClick;i&&(a.preventDefault(),i({event:a,node:d}))}),x($(e),"onFocus",function(){var a=e.props.onFocus;e.setState({focused:!0});for(var d=arguments.length,i=new Array(d),u=0;u<d;u++)i[u]=arguments[u];a==null||a.apply(void 0,i)}),x($(e),"onBlur",function(){var a=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var d=arguments.length,i=new Array(d),u=0;u<d;u++)i[u]=arguments[u];a==null||a.apply(void 0,i)}),x($(e),"getTreeNodeRequiredProps",function(){var a=e.state,d=a.expandedKeys,i=a.selectedKeys,u=a.loadedKeys,f=a.loadingKeys,g=a.checkedKeys,h=a.halfCheckedKeys,p=a.dragOverNodeKey,m=a.dropPosition,v=a.keyEntities;return{expandedKeys:d||[],selectedKeys:i||[],loadedKeys:u||[],loadingKeys:f||[],checkedKeys:g||[],halfCheckedKeys:h||[],dragOverNodeKey:p,dropPosition:m,keyEntities:v}}),x($(e),"setExpandedKeys",function(a){var d=e.state,i=d.treeData,u=d.fieldNames,f=je(i,a,u);e.setUncontrolledState({expandedKeys:a,flattenNodes:f},!0)}),x($(e),"onNodeExpand",function(a,d){var i=e.state.expandedKeys,u=e.state,f=u.listChanging,g=u.fieldNames,h=e.props,p=h.onExpand,m=h.loadData,v=d.expanded,y=d[g.key];if(!f){var E=i.includes(y),b=!v;if(le(v&&E||!v&&!E,"Expand state not sync with index check"),i=b?ie(i,y):Z(i,y),e.setExpandedKeys(i),p==null||p(i,{node:d,expanded:b,nativeEvent:a.nativeEvent}),b&&m){var N=e.onNodeLoad(d);N&&N.then(function(){var C=je(e.state.treeData,i,g);e.setUncontrolledState({flattenNodes:C})}).catch(function(){var C=e.state.expandedKeys,S=Z(C,y);e.setExpandedKeys(S)})}}}),x($(e),"onListChangeStart",function(){e.setUncontrolledState({listChanging:!0})}),x($(e),"onListChangeEnd",function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})}),x($(e),"onActiveChange",function(a){var d=e.state.activeKey,i=e.props,u=i.onActiveChange,f=i.itemScrollOffset,g=f===void 0?0:f;d!==a&&(e.setState({activeKey:a}),a!==null&&e.scrollTo({key:a,offset:g}),u==null||u(a))}),x($(e),"getActiveItem",function(){var a=e.state,d=a.activeKey,i=a.flattenNodes;return d===null?null:i.find(function(u){var f=u.key;return f===d})||null}),x($(e),"offsetActiveKey",function(a){var d=e.state,i=d.flattenNodes,u=d.activeKey,f=i.findIndex(function(p){var m=p.key;return m===u});f===-1&&a<0&&(f=i.length),f=(f+a+i.length)%i.length;var g=i[f];if(g){var h=g.key;e.onActiveChange(h)}else e.onActiveChange(null)}),x($(e),"onKeyDown",function(a){var d=e.state,i=d.activeKey,u=d.expandedKeys,f=d.checkedKeys,g=d.fieldNames,h=e.props,p=h.onKeyDown,m=h.checkable,v=h.selectable;switch(a.which){case Ne.UP:{e.offsetActiveKey(-1),a.preventDefault();break}case Ne.DOWN:{e.offsetActiveKey(1),a.preventDefault();break}}var y=e.getActiveItem();if(y&&y.data){var E=e.getTreeNodeRequiredProps(),b=y.data.isLeaf===!1||!!(y.data[g.children]||[]).length,N=j(z(z({},Pe(i,E)),{},{data:y.data,active:!0}));switch(a.which){case Ne.LEFT:{b&&u.includes(i)?e.onNodeExpand({},N):y.parent&&e.onActiveChange(y.parent.key),a.preventDefault();break}case Ne.RIGHT:{b&&!u.includes(i)?e.onNodeExpand({},N):y.children&&y.children.length&&e.onActiveChange(y.children[0].key),a.preventDefault();break}case Ne.ENTER:case Ne.SPACE:{m&&!N.disabled&&N.checkable!==!1&&!N.disableCheckbox?e.onNodeCheck({},N,!f.includes(i)):!m&&v&&!N.disabled&&N.selectable!==!1&&e.onNodeSelect({},N);break}}}p==null||p(a)}),x($(e),"setUncontrolledState",function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var u=!1,f=!0,g={};Object.keys(a).forEach(function(h){if(e.props.hasOwnProperty(h)){f=!1;return}u=!0,g[h]=a[h]}),u&&(!d||f)&&e.setState(z(z({},g),i))}}),x($(e),"scrollTo",function(a){e.listRef.current.scrollTo(a)}),e}return Mt(r,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var o=this.props,l=o.activeKey,c=o.itemScrollOffset,a=c===void 0?0:c;l!==void 0&&l!==this.state.activeKey&&(this.setState({activeKey:l}),l!==null&&this.scrollTo({key:l,offset:a}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var o=this.state,l=o.focused,c=o.flattenNodes,a=o.keyEntities,d=o.draggingNodeKey,i=o.activeKey,u=o.dropLevelOffset,f=o.dropContainerKey,g=o.dropTargetKey,h=o.dropPosition,p=o.dragOverNodeKey,m=o.indent,v=this.props,y=v.prefixCls,E=v.className,b=v.style,N=v.showLine,C=v.focusable,S=v.tabIndex,D=S===void 0?0:S,w=v.selectable,s=v.showIcon,O=v.icon,R=v.switcherIcon,I=v.draggable,A=v.checkable,P=v.checkStrictly,M=v.disabled,_=v.motion,B=v.loadData,ee=v.filterTreeNode,te=v.height,F=v.itemHeight,ye=v.scrollWidth,se=v.virtual,G=v.titleRender,ce=v.dropIndicatorRender,me=v.onContextMenu,U=v.onScroll,ke=v.direction,ne=v.rootClassName,Se=v.rootStyle,be=pt(this.props,{aria:!0,data:!0}),ae;I&&(Xe(I)==="object"?ae=I:typeof I=="function"?ae={nodeDraggable:I}:ae={});var ue={prefixCls:y,selectable:w,showIcon:s,icon:O,switcherIcon:R,draggable:ae,draggingNodeKey:d,checkable:A,checkStrictly:P,disabled:M,keyEntities:a,dropLevelOffset:u,dropContainerKey:f,dropTargetKey:g,dropPosition:h,dragOverNodeKey:p,indent:m,direction:ke,dropIndicatorRender:ce,loadData:B,filterTreeNode:ee,titleRender:G,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return K.createElement(Ye.Provider,{value:ue},K.createElement("div",{className:V(y,E,ne,x(x(x({},"".concat(y,"-show-line"),N),"".concat(y,"-focused"),l),"".concat(y,"-active-focused"),i!==null)),style:Se},K.createElement(gn,W({ref:this.listRef,prefixCls:y,style:b,data:c,disabled:M,selectable:w,checkable:!!A,motion:_,dragging:d!==null,height:te,itemHeight:F,virtual:se,focusable:C,focused:l,tabIndex:D,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:me,onScroll:U,scrollWidth:ye},this.getTreeNodeRequiredProps(),be))))}}],[{key:"getDerivedStateFromProps",value:function(o,l){var c=l.prevProps,a={prevProps:o};function d(D){return!c&&o.hasOwnProperty(D)||c&&c[D]!==o[D]}var i,u=l.fieldNames;if(d("fieldNames")&&(u=Ce(o.fieldNames),a.fieldNames=u),d("treeData")?i=o.treeData:d("children")&&(le(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),i=bt(o.children)),i){a.treeData=i;var f=Kt(i,{fieldNames:u});a.keyEntities=z(x({},he,Nt),f.keyEntities)}var g=a.keyEntities||l.keyEntities;if(d("expandedKeys")||c&&d("autoExpandParent"))a.expandedKeys=o.autoExpandParent||!c&&o.defaultExpandParent?Ue(o.expandedKeys,g):o.expandedKeys;else if(!c&&o.defaultExpandAll){var h=z({},g);delete h[he];var p=[];Object.keys(h).forEach(function(D){var w=h[D];w.children&&w.children.length&&p.push(w.key)}),a.expandedKeys=p}else!c&&o.defaultExpandedKeys&&(a.expandedKeys=o.autoExpandParent||o.defaultExpandParent?Ue(o.defaultExpandedKeys,g):o.defaultExpandedKeys);if(a.expandedKeys||delete a.expandedKeys,i||a.expandedKeys){var m=je(i||l.treeData,a.expandedKeys||l.expandedKeys,u);a.flattenNodes=m}if(o.selectable&&(d("selectedKeys")?a.selectedKeys=ot(o.selectedKeys,o):!c&&o.defaultSelectedKeys&&(a.selectedKeys=ot(o.defaultSelectedKeys,o))),o.checkable){var v;if(d("checkedKeys")?v=ze(o.checkedKeys)||{}:!c&&o.defaultCheckedKeys?v=ze(o.defaultCheckedKeys)||{}:i&&(v=ze(o.checkedKeys)||{checkedKeys:l.checkedKeys,halfCheckedKeys:l.halfCheckedKeys}),v){var y=v,E=y.checkedKeys,b=E===void 0?[]:E,N=y.halfCheckedKeys,C=N===void 0?[]:N;if(!o.checkStrictly){var S=Fe(b,!0,g);b=S.checkedKeys,C=S.halfCheckedKeys}a.checkedKeys=b,a.halfCheckedKeys=C}}return d("loadedKeys")&&(a.loadedKeys=o.loadedKeys),a}}]),r}(K.Component);x(Je,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:on,allowDrop:function(){return!0},expandAction:!1});x(Je,"TreeNode",Te);var pn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},yn=function(t,r){return K.createElement(pe,W({},t,{ref:r,icon:pn}))},Ct=K.forwardRef(yn),mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},bn=function(t,r){return K.createElement(pe,W({},t,{ref:r,icon:mn}))},Kn=K.forwardRef(bn),xn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},En=function(t,r){return K.createElement(pe,W({},t,{ref:r,icon:xn}))},Nn=K.forwardRef(En),Cn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},kn=function(t,r){return K.createElement(pe,W({},t,{ref:r,icon:Cn}))},Sn=K.forwardRef(kn);const wn=({treeCls:n,treeNodeCls:t,directoryNodeSelectedBg:r,directoryNodeSelectedColor:e,motionDurationMid:o,borderRadius:l,controlItemBgHover:c})=>({[`${n}${n}-directory ${t}`]:{[`${n}-node-content-wrapper`]:{position:"static",[`&:has(${n}-drop-indicator)`]:{position:"relative"},[`> *:not(${n}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${o}`,content:'""',borderRadius:l},"&:hover:before":{background:c}},[`${n}-switcher, ${n}-checkbox, ${n}-draggable-icon`]:{zIndex:1},"&-selected":{background:r,borderRadius:l,[`${n}-switcher, ${n}-draggable-icon`]:{color:e},[`${n}-node-content-wrapper`]:{color:e,background:"transparent","&, &:hover":{color:e},"&:before, &:hover:before":{background:r}}}}}),Dn=new _t("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),On=(n,t)=>({[`.${n}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),$n=(n,t)=>({[`.${n}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${We(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),Pn=(n,t)=>{const{treeCls:r,treeNodeCls:e,treeNodePadding:o,titleHeight:l,indentSize:c,nodeSelectedBg:a,nodeHoverBg:d,colorTextQuaternary:i,controlItemBgActiveDisabled:u}=t;return{[r]:Object.assign(Object.assign({},Lt(t)),{"--rc-virtual-list-scrollbar-bg":t.colorSplit,background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${r}-rtl ${r}-switcher_close ${r}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${r}-active-focused)`]:At(t),[`${r}-list-holder-inner`]:{alignItems:"flex-start"},[`&${r}-block-node`]:{[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-node-content-wrapper`]:{flex:"auto"},[`${e}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:Dn,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:t.borderRadius}}},[e]:{display:"flex",alignItems:"flex-start",marginBottom:o,lineHeight:We(l),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:o},[`&-disabled ${r}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${r}-checkbox-disabled + ${r}-node-selected,&${e}-disabled${e}-selected ${r}-node-content-wrapper`]:{backgroundColor:u},[`${r}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${e}-disabled)`]:{[`${r}-node-content-wrapper`]:{"&:hover":{color:t.nodeHoverColor}}},[`&-active ${r}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${e}-disabled).filter-node ${r}-title`]:{color:t.colorPrimary,fontWeight:t.fontWeightStrong},"&-draggable":{cursor:"grab",[`${r}-draggable-icon`]:{flexShrink:0,width:l,textAlign:"center",visibility:"visible",color:i},[`&${e}-disabled ${r}-draggable-icon`]:{visibility:"hidden"}}},[`${r}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:c}},[`${r}-draggable-icon`]:{visibility:"hidden"},[`${r}-switcher, ${r}-checkbox`]:{marginInlineEnd:t.calc(t.calc(l).sub(t.controlInteractiveSize)).div(2).equal()},[`${r}-switcher`]:Object.assign(Object.assign({},On(n,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:l,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:l,height:l,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${r}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},[`&_close ${r}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(l).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(l).div(2).equal()).mul(.8).equal(),height:t.calc(l).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${r}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:l,paddingBlock:0,paddingInline:t.paddingXS,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},$n(n,t)),{"&:hover":{backgroundColor:d},[`&${r}-node-selected`]:{color:t.nodeSelectedColor,backgroundColor:a},[`${r}-iconEle`]:{display:"inline-block",width:l,height:l,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${r}-unselectable ${r}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${e}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${t.colorPrimary}`},"&-show-line":{[`${r}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(l).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${r}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${e}-leaf-last ${r}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${We(t.calc(l).div(2).equal())} !important`}})}},Tn=(n,t,r=!0)=>{const e=`.${n}`,o=`${e}-treenode`,l=t.calc(t.paddingXS).div(2).equal(),c=It(t,{treeCls:e,treeNodeCls:o,treeNodePadding:l});return[Pn(n,c),r&&wn(c)].filter(Boolean)},Mn=n=>{const{controlHeightSM:t,controlItemBgHover:r,controlItemBgActive:e}=n,o=t;return{titleHeight:o,indentSize:o,nodeHoverBg:r,nodeHoverColor:n.colorText,nodeSelectedBg:e,nodeSelectedColor:n.colorText}},Rn=n=>{const{colorTextLightSolid:t,colorPrimary:r}=n;return Object.assign(Object.assign({},Mn(n)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:r})},In=Rt("Tree",(n,{prefixCls:t})=>[{[n.componentCls]:zt(`${t}-checkbox`,n)},Tn(t,n),Vt(n)],Rn),ut=4;function Ln(n){const{dropPosition:t,dropLevelOffset:r,prefixCls:e,indent:o,direction:l="ltr"}=n,c=l==="ltr"?"left":"right",a=l==="ltr"?"right":"left",d={[c]:-r*o+ut,[a]:0};switch(t){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[c]=o+ut;break}return T.createElement("div",{style:d,className:`${e}-drop-indicator`})}var _n={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},An=function(t,r){return K.createElement(pe,W({},t,{ref:r,icon:_n}))},Hn=K.forwardRef(An),Bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},jn=function(t,r){return K.createElement(pe,W({},t,{ref:r,icon:Bn}))},Fn=K.forwardRef(jn),zn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Vn=function(t,r){return K.createElement(pe,W({},t,{ref:r,icon:zn}))},qn=K.forwardRef(Vn);const Wn=n=>{var t,r;const{prefixCls:e,switcherIcon:o,treeNodeProps:l,showLine:c,switcherLoadingIcon:a}=n,{isLeaf:d,expanded:i,loading:u}=l;if(u)return K.isValidElement(a)?a:K.createElement(Ht,{className:`${e}-switcher-loading-icon`});let f;if(c&&typeof c=="object"&&(f=c.showLeafIcon),d){if(!c)return null;if(typeof f!="boolean"&&f){const p=typeof f=="function"?f(l):f,m=`${e}-switcher-line-custom-icon`;return K.isValidElement(p)?tt(p,{className:V((t=p.props)===null||t===void 0?void 0:t.className,m)}):p}return f?K.createElement(Ct,{className:`${e}-switcher-line-icon`}):K.createElement("span",{className:`${e}-switcher-leaf-line`})}const g=`${e}-switcher-icon`,h=typeof o=="function"?o(l):o;return K.isValidElement(h)?tt(h,{className:V((r=h.props)===null||r===void 0?void 0:r.className,g)}):h!==void 0?h:c?i?K.createElement(Fn,{className:`${e}-switcher-line-icon`}):K.createElement(qn,{className:`${e}-switcher-line-icon`}):K.createElement(Hn,{className:g})},kt=T.forwardRef((n,t)=>{var r;const{getPrefixCls:e,direction:o,virtual:l,tree:c}=T.useContext(yt),{prefixCls:a,className:d,showIcon:i=!1,showLine:u,switcherIcon:f,switcherLoadingIcon:g,blockNode:h=!1,children:p,checkable:m=!1,selectable:v=!0,draggable:y,motion:E,style:b}=n,N=e("tree",a),C=e(),S=E??Object.assign(Object.assign({},Bt(C)),{motionAppear:!1}),D=Object.assign(Object.assign({},n),{checkable:m,selectable:v,showIcon:i,motion:S,blockNode:h,showLine:!!u,dropIndicatorRender:Ln}),[w,s,O]=In(N),[,R]=jt(),I=R.paddingXS/2+(((r=R.Tree)===null||r===void 0?void 0:r.titleHeight)||R.controlHeightSM),A=T.useMemo(()=>{if(!y)return!1;let M={};switch(typeof y){case"function":M.nodeDraggable=y;break;case"object":M=Object.assign({},y);break}return M.icon!==!1&&(M.icon=M.icon||T.createElement(Sn,null)),M},[y]),P=M=>T.createElement(Wn,{prefixCls:N,switcherIcon:f,switcherLoadingIcon:g,treeNodeProps:M,showLine:u});return w(T.createElement(Je,Object.assign({itemHeight:I,ref:t,virtual:l},D,{style:Object.assign(Object.assign({},c==null?void 0:c.style),b),prefixCls:N,className:V({[`${N}-icon-hide`]:!i,[`${N}-block-node`]:h,[`${N}-unselectable`]:!v,[`${N}-rtl`]:o==="rtl"},c==null?void 0:c.className,d,s,O),direction:o,checkable:m&&T.createElement("span",{className:`${N}-checkbox-inner`}),selectable:v,switcherIcon:P,draggable:A}),p))}),ft=0,Ve=1,vt=2;function Ze(n,t,r){const{key:e,children:o}=r;function l(c){const a=c[e],d=c[o];t(a,c)!==!1&&Ze(d||[],t,r)}n.forEach(l)}function Un({treeData:n,expandedKeys:t,startKey:r,endKey:e,fieldNames:o}){const l=[];let c=ft;if(r&&r===e)return[r];if(!r||!e)return[];function a(d){return d===r||d===e}return Ze(n,d=>{if(c===vt)return!1;if(a(d)){if(l.push(d),c===ft)c=Ve;else if(c===Ve)return c=vt,!1}else c===Ve&&l.push(d);return t.includes(d)},Ce(o)),l}function qe(n,t,r){const e=Q(t),o=[];return Ze(n,(l,c)=>{const a=e.indexOf(l);return a!==-1&&(o.push(c),e.splice(a,1)),!!e.length},Ce(r)),o}var gt=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(n);o<e.length;o++)t.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(n,e[o])&&(r[e[o]]=n[e[o]]);return r};function Gn(n){const{isLeaf:t,expanded:r}=n;return t?K.createElement(Ct,null):r?K.createElement(Kn,null):K.createElement(Nn,null)}function ht({treeData:n,children:t}){return n||bt(t)}const Xn=(n,t)=>{var{defaultExpandAll:r,defaultExpandParent:e,defaultExpandedKeys:o}=n,l=gt(n,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const c=K.useRef(null),a=K.useRef(null),d=()=>{const{keyEntities:w}=Kt(ht(l));let s;return r?s=Object.keys(w):e?s=Ue(l.expandedKeys||o||[],w):s=l.expandedKeys||o||[],s},[i,u]=K.useState(l.selectedKeys||l.defaultSelectedKeys||[]),[f,g]=K.useState(()=>d());K.useEffect(()=>{"selectedKeys"in l&&u(l.selectedKeys)},[l.selectedKeys]),K.useEffect(()=>{"expandedKeys"in l&&g(l.expandedKeys)},[l.expandedKeys]);const h=(w,s)=>{var O;return"expandedKeys"in l||g(w),(O=l.onExpand)===null||O===void 0?void 0:O.call(l,w,s)},p=(w,s)=>{var O;const{multiple:R,fieldNames:I}=l,{node:A,nativeEvent:P}=s,{key:M=""}=A,_=ht(l),B=Object.assign(Object.assign({},s),{selected:!0}),ee=(P==null?void 0:P.ctrlKey)||(P==null?void 0:P.metaKey),te=P==null?void 0:P.shiftKey;let F;R&&ee?(F=w,c.current=M,a.current=F,B.selectedNodes=qe(_,F,I)):R&&te?(F=Array.from(new Set([].concat(Q(a.current||[]),Q(Un({treeData:_,expandedKeys:f,startKey:M,endKey:c.current,fieldNames:I}))))),B.selectedNodes=qe(_,F,I)):(F=[M],c.current=M,a.current=F,B.selectedNodes=qe(_,F,I)),(O=l.onSelect)===null||O===void 0||O.call(l,F,B),"selectedKeys"in l||u(F)},{getPrefixCls:m,direction:v}=K.useContext(yt),{prefixCls:y,className:E,showIcon:b=!0,expandAction:N="click"}=l,C=gt(l,["prefixCls","className","showIcon","expandAction"]),S=m("tree",y),D=V(`${S}-directory`,{[`${S}-directory-rtl`]:v==="rtl"},E);return K.createElement(kt,Object.assign({icon:Gn,ref:t,blockNode:!0},C,{showIcon:b,expandAction:N,prefixCls:S,className:D,expandedKeys:f,selectedKeys:i,onSelect:p,onExpand:h}))},Yn=K.forwardRef(Xn),St=kt;St.DirectoryTree=Yn;St.TreeNode=Te;export{St as T,Fe as a,Z as b,Kt as c,ie as d};
