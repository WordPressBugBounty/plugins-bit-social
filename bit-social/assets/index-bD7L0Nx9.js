import{r as k,j as a,a as n,L as C,u as v,b as L,c as z,d as O,F as b,i as Q}from"./main-afraid-ants-sort.js";import{P as M,p as F,i as S}from"./PlatformIcon-DHlKQsTj.js";import{u as Y}from"./useDebounce-CTDTCsll.js";import{u as q,C as U,a as W,i as R}from"./groupHelper-PveggK-o.js";import{t as j,A as H,f as J,F as X,S as E,g as Z,P as N,B as y,T as w,h as ee,i as A,j as G,k as te,l as ae,m as ce,n as x,r as P,I as $,M as oe,s as se,o as re}from"./antd-CMhliQbc.js";import{u as B,b as ie}from"./router-yX2GsLRQ.js";import{a as I,b as _}from"./react-query-BAnB2mAm.js";import"./css-in-js-5B1lZlTz.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ne(){const e=I(),{isPending:t,mutateAsync:c}=_({mutationFn:async o=>k(`account/${o}/destroy`,void 0,void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}});return{deleteAccount:c,deleteAccountLoading:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function he(){const e=I(),{isPending:t,mutateAsync:c}=_({mutationFn:async o=>k(`account/${o.id}/update-status`,{status:o.status},void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}});return{updateAccountStatus:o=>c(o),updateAccountStatusLoading:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function le({avatarLink:e,platform:t,size:c=18}){const{token:o}=j.useToken();return a(J,{count:a(M,{name:t,size:c,style:{border:"2px solid",borderColor:o.colorBorder}}),offset:[-2,28],size:"small",children:a(H,{src:e})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ue({accountType:e,id:t,image:c,name:o,platform:h,status:i}){const{deleteAccount:l,deleteAccountLoading:s}=ne(),{updateAccountStatus:d,updateAccountStatusLoading:g}=he(),{token:p}=j.useToken(),u=1,r=0;return n(ee,{size:"small",style:{borderColor:p.colorBorder},children:[n(X,{className:"w-100",justify:"space-between",children:[a(le,{avatarLink:c,platform:h}),n(E,{children:[a(N,{description:i?"It will no longer be able to automatic posting, scheduling, and sharing":"Enable Automatic Posting, Scheduling, and Sharing",okButtonProps:{danger:!!i,loading:g},okText:i?"Disable":"Enable",onConfirm:()=>d({id:t,status:i===u?r:u}),placement:"top",title:`Do you want to ${i===u?"disable":"enable"} the account?`,children:a(Z,{checked:!!i,size:"small"})}),a(N,{description:"This account also be deleted from related schedule!",okButtonProps:{danger:!0,loading:s},okText:"Yes, delete",onConfirm:()=>l(t),placement:"top",title:"Are you sure?",children:a(y,{danger:!0,icon:a(C,{name:"trash-2"}),type:"text"})})]})]}),a(w.Paragraph,{ellipsis:!0,style:{marginBottom:"0px",marginTop:"8px"},children:o}),e&&a(w.Text,{ellipsis:!0,type:"secondary",children:e})]})}const de="_accountLoaderSection_1360f_1 grid",ge="_accountLoader_1360f_1",V={accountLoaderSection:de,accountLoader:ge};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function pe({accountQuantity:e}){const t=Array.from({length:e}).fill(0);return a("div",{className:V.accountLoaderSection,children:t.map((c,o)=>a("div",{className:`${V.accountLoader} loader`},`loader-${o*2}`))})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function me({searchAccountsTxt:e}){const[t]=B({}),c=t.get("value")||"",h={type:t.get("type")||"",value:c},{accounts:i,isLoadingAccounts:l}=q({searchAccountsTxt:e,selectedMenuTab:h});return l?a(pe,{accountQuantity:4}):n(G,{gutter:[16,16],children:[a(A,{md:8,sm:12,xl:6,xs:24,children:a(U,{btnType:"custom"})}),i.map(s=>a(A,{md:8,sm:12,xl:6,xs:24,children:a(ue,{accountType:s.details.account_type,id:s.id,image:s.details.icon,name:s.details.account_name,platform:s.platform,status:s.status},s.id)},s.id))]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function be(e){return Object.keys(e)}function fe({setSearchAccounts:e}){const{isDarkTheme:t,isProClient:c}=v(L),{token:o}=j.useToken(),[h,i]=B({}),l=z(O),s=h.get("value")||"all",d=[{key:"all",label:n(b,{children:[a(M,{size:30}),a(w.Text,{className:"pl-2",children:"All"})]})}],g=be(F).map(r=>({key:r,label:n(b,{children:[a(M,{name:r,size:30})," ",a(w.Text,{className:"px-2",children:F[r].name}),S(r)&&!c?a(C,{color:"#ff8609",name:"crown",size:18}):void 0]})})),p=[...d,...g];return a(b,{children:a(te,{className:"rounded-md",items:p,mode:"inline",onClick:({key:r})=>{if(S(r)&&!c){l(!0);return}i(f=>(f.set("type","platform"),f.set("value",r),f)),e("")},selectedKeys:[s],style:{backgroundColor:o.colorBgContainer,border:"none",paddingInline:"6px"},theme:t?"dark":"light"})})}const Ce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2027.7.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20199%20155'%20style='enable-background:new%200%200%20199%20155;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23565B84;}%20%3c/style%3e%3cpath%20class='st0'%20d='M33.2,30.4C45.9,43.4,48.8,64,64.8,74c7.9,5,18.2,2.6,26.9,4c9.6,1.5,16.9,6.9,24.1,13.1%20c14.4,12.5,21.3,31.6,35.8,44c10.2,8.7,22.2,0.5,31.4-5.4c1.9-1.2,6.7-3.3,7.1,0.7c0.4,3.5-6.5,6.5-8.9,8c-11,7.1-22.9,9.4-33.7,0.7%20c-17.4-14.1-24.7-38-43.9-50.3C88.8,79.4,70.2,87.2,56.3,75C43.5,63.8,41,44.2,27.9,33.8c-1.9,2.6-6.1,10-9.5,10.2%20c-3.5,0.2-4.7-5.1-5.2-7.6c-1.4-5.9-4.8-22.2,1.3-26.7c5.5-4.1,20.5,2,25.7,4.9c2.3,1.3,6.3,3.4,6,6.6%20C45.7,25.9,36.8,28.4,33.2,30.4z'/%3e%3c/svg%3e";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ae(){return n(b,{children:[a("img",{alt:"Arrow",src:Ce,style:{marginLeft:"24%"},width:150}),a(ae,{description:n(b,{children:["To connect your social media accounts, click ",a("b",{children:'"Connect Account"'}),". There are two methods available:",a("br",{}),a("b",{children:"Connect:"})," It will automatically connect your social account without any credentials."," ",a("br",{}),a("b",{children:"Custom App:"})," It will show you a form to input app credentials to create your own app and connect your social account.",a("br",{}),a("br",{}),n("a",{href:"https://bit-social.com/docs/accounts/",rel:"nofollow noopener noreferrer",target:"_blank",children:["You can find more about it here",a(C,{name:"move-up-right",style:{transform:"translateY(-2px)"}})]})]}),style:{border:"4px solid #565b84",fontSize:"1.3rem",marginLeft:"10%",marginTop:-25,width:800}})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Te({accounts:e,isLoadingAccounts:t,searchAccounts:c,searchAccountsTxt:o,setSearchAccounts:h}){return n(G,{gutter:20,children:[a(A,{span:6,children:a(fe,{setSearchAccounts:h})}),n(A,{span:18,children:[t&&a(ce,{active:!0}),a(me,{searchAccountsTxt:o}),!t&&!c&&!(e!=null&&e.length)?a(Ae,{}):void 0]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ye(){const e=I(),{isPending:t,isSuccess:c,mutateAsync:o}=_({mutationFn:async h=>k("pro_groups",{name:h},void 0,"POST"),mutationKey:["create_group"],onSuccess:()=>{e.invalidateQueries({queryKey:["groups"]})}});return{createGroup:o,isGroupCreated:c,isLoadingCreateGroup:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function we(){const{token:e}=j.useToken(),{isDarkTheme:t}=v(L),[c]=x.useForm(),{groups:o}=W(),{createGroup:h,isLoadingCreateGroup:i}=ye(),[l,s]=P.useState(!1),d=()=>{c.resetFields(),s(!1)},g=async()=>{c.submit()},p=async({name:u})=>{const r=await h(u);(r==null?void 0:r.code)==="SUCCESS"&&(c.resetFields(),se.success({message:"Group create successfully!"}),s(!1))};return n(b,{children:[a(y,{className:"mb-2",icon:a(C,{name:"plus",size:22}),onClick:()=>s(!0),style:{border:`2px solid ${e.colorPrimary}`,color:t?e.colorTextBase:e.colorPrimary,fontWeight:500},type:"text",children:"Create Group"}),a(oe,{footer:[a(y,{onClick:d,children:"Cancel"},"back"),a(y,{loading:i,onClick:g,type:"primary",children:"create"},"submit")],onCancel:d,open:l,children:a(x,{form:c,layout:"vertical",onFinish:p,children:a(x.Item,{label:"Name",name:"name",rules:[{message:"Please enter group name",required:!0},{validator:(u,r)=>{if(r.length)return R(r.trim(),o)?Promise.reject(new Error(r+" name already exist")):Promise.resolve()}}],children:a($,{name:"name",placeholder:"New group",required:!0})})})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function je(){return Q()}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function _e(){const{isProClient:e}=v(L),t=z(O),[c,o]=B({}),h=ie(),i=c.get("value")||"",l=c.get("type")||"",[s,d]=P.useState(l||"platform"),g=["platform","group"];(i!==""&&S(i)&&!e||i.length&&!g.includes(l)||!e&&l==="group")&&h("/accounts");const p={type:l,value:i},[u,r]=P.useState(""),f=Y(u,400),{accounts:K,isLoadingAccounts:D}=q({searchAccountsTxt:f,selectedMenuTab:p});return n("div",{children:[n(G,{gutter:20,children:[a(A,{span:6,children:a(re,{block:!0,onChange:T=>{if(!e&&T==="group"){t(!0);return}d(T),o(m=>(m.set("type",T),m.set("value","all"),m))},options:[{label:"Accounts",value:"platform"},{label:e?"Groups":n(b,{children:["Groups ",a(C,{color:"#ff8609",name:"crown",size:18})]}),value:"group"}],value:s})}),a(A,{children:s==="platform"?a(E,{style:{marginBottom:10},children:a($,{allowClear:!0,onChange:T=>{r(T.target.value),o(m=>(m.delete("type"),m.delete("value"),m))},placeholder:"Search accounts",prefix:a(C,{name:"search"}),value:u})}):a(we,{})})]}),s==="platform"?a(Te,{accounts:K,isLoadingAccounts:D,searchAccounts:u,searchAccountsTxt:f,setSearchAccounts:r}):a(je,{})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{_e as default};
