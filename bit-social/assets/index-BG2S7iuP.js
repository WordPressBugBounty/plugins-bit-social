import{V,X as f,G as _,a2 as Q,w as F,v as X,x as $,y as a,z as i,j as t,B as J,S as d,L as A,a7 as Z,I as h,F as T,T as D,W as tt,D as et,E as st,H as ot}from"./main-honest-apples-shout.js";import{u as at,a as it}from"./useMemoDebounce-DGNgyvin.js";import{u as nt}from"./usePostTypes-CoSbvPDj.js";import{u as ct,C as E}from"./groupHelper-D5r1mL1k.js";import{u as rt,F as lt,A as ut}from"./useIntervalTypes-BaTn-rXc.js";import{C as r}from"./index-WRew3k0q.js";import{F as p}from"./index-Dp2UqEVH.js";import{s as ht}from"./index-BhNz6GGj.js";import{C as P,R as pt}from"./row-C2vQMRT_.js";import{S as z}from"./index-BSq1Y2AW.js";import{S as C,I as dt}from"./index-BbGC-JhL.js";import{s as mt}from"./index-DYCJFO7c.js";import"./PlatformIcon-CUjl55pg.js";import"./index-5CHgxKFu.js";import"./index-9lCBX2l5.js";import"./index-CDd3-czp.js";import"./index-CVSeideO.js";import"./collapse-BbEVqHco.js";import"./index-B20GHfvk.js";import"./index-O27KZoyf.js";import"./EllipsisOutlined-WRnUDywn.js";import"./Dropdown-D4nmV-2U.js";import"./context-CCE8EACh.js";import"./move-BurAjF49.js";import"./EyeOutlined-CLK5SpBj.js";function gt(s){const e=V(s,(n,l,m)=>l(e,f(n(e),typeof m=="function"?m:()=>m)));return e}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const yt={accounts:{accountIds:[],groupIds:[]},isEnabled:!1,keepLogs:!0,postDelay:{every:0,unit:""},postType:["post"],taxonomies:["categories","tags"]},M=globalThis.jotaiAtomCache.get("/home/runner/work/bit-social/bit-social/frontend/src/common/globalStates/$autoPostSettings.ts/$autoPostSettings",gt(yt));M.debugLabel="$autoPostSettings";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};function ft(){const s=_(M),{data:e,isLoading:n}=Q({queryFn:async()=>{const{data:l}=await F("autoPostSettings",void 0,void 0,"GET");return l?(s(l),l):[]},queryKey:["autoPostSettings"]});return{autoPostSettings:e,isLoadingAutoPostSettings:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};function bt(){const{isPending:s,isSuccess:e,mutateAsync:n}=X({mutationFn:async l=>F("autoPostSettings/update",{autoPostSettings:l},void 0,"POST"),mutationKey:["autoPostSettingsUpdate"]});return{isSettingsUpdateSuccessfully:e,isUpdatingAutoPostSettings:s,updateAutoPostSettings:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const At="0";function N(s){const{every:e,unit:n}=s;return e===0&&n===""?"immediately":"delay"}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const{Title:Tt}=D;function St(){const{token:s}=$.useToken();return a(T,{children:[a(Tt,{level:5,children:[" ",i("Post templates")," "]}),a(r,{actions:[t(Z,{to:"/templates",children:t(J,{type:"primary",children:a(d,{align:"center",size:2,children:[t("div",{children:i("Templates")}),t(A,{name:"move-up-right"})]})})},"template")],style:{borderColor:s.colorBorder},styles:{body:{height:"380px",width:"80%"}},children:[a(d,{className:"py-2",children:[t(h.Avatar,{size:"large"}),t(h.Input,{size:"small"})]}),t(h,{}),t(h.Image,{}),a(p,{className:"py-3",gap:10,justify:"space-around",children:[t(h.Button,{size:"small"}),t(h.Button,{size:"small"}),t(h.Button,{size:"small"})]})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const{Link:wt,Paragraph:vt,Text:j,Title:Pt}=D;var Ct={name:"p4355k",styles:"min-width:180px"},jt={name:"m0jwvv",styles:"width:80px"},Dt={name:"ypff5m",styles:"min-width:100px"};function Zt(){const{token:s}=$.useToken(),[e,n]=tt(M),{isSettingsUpdateSuccessfully:l,isUpdatingAutoPostSettings:m,updateAutoPostSettings:B}=bt(),{isLoadingAutoPostSettings:S}=ft(),[I,U]=ht.useMessage(),{accounts:x}=ct(),{isProClient:b}=et(st),k=_(ot),Y=rt(),{loadingPostType:O,postTypes:L}=nt(),W=L&&Object.values(L).map(o=>({label:a(T,{children:[o.label," ",o.name!=="post"&&!b&&t(A,{color:"#ff8609",name:"crown",size:16})]}),value:o.name}));at(async()=>{const{status:o}=await B(e);l&&o&&it(I,o)},400,[e]);const g=(o,c)=>{const{accounts:u,isEnabled:w}=e,K=!u.accountIds.length;if(o==="isEnabled"&&K&&!w){mt.warning({message:"Create and select an account first!",placement:"topRight"});return}if(!b&&o==="postType"&&Array.isArray(c)&&c.length&&c.includes("post")){k(!0);return}if(o==="postType"&&Array.isArray(c)&&!c.length){n(y=>f(y,v=>{v.postType=["post"]})),I.open({content:"You must have a type",type:"warning"});return}if(!b&&o==="postDelay"&&c!==At){k(!0);return}if(o==="postDelay"){n(y=>f(y,v=>{v.postDelay=c==="delay"?{every:1,unit:"minute"}:{every:0,unit:""}}));return}n(y=>({...y,[o]:c}))},q=o=>{g("accounts",o)},H=o=>{const{value:c}=o.target;n(u=>f(u,w=>{w.postDelay.every=Number(c)}))},R=o=>{n(c=>f(c,u=>{o!==""&&e.postDelay.every<1&&(u.postDelay.every=1),o===""&&(u.postDelay.every=0),u.postDelay.unit=o}))},G=[{label:i("Immediately"),value:"immediately"},{label:a(T,{children:[i("Delay")," ",!b&&t(A,{color:"#ff8609",name:"crown",size:16})]}),value:"delay"}];return a(pt,{gutter:20,children:[U,a(P,{span:6,children:[a(p,{className:"mb-1",justify:"space-between",children:[t(D.Title,{level:5,children:i("Accounts")}),x.length?t(E,{}):""]}),x.length?t(lt,{isLoading:m,selectedAccount:e.accounts,setSelectedAccount:q}):a(T,{children:[t(ut,{iconSize:40,textLevel:5}),t("div",{style:{textAlign:"center"},children:t(E,{})})]})]}),t(P,{span:12,children:a(r,{style:{backgroundColor:s.colorFillAlter},children:[t(Pt,{level:4,children:i("Auto Post Settings")}),a(vt,{children:[i("All auto post related settings here."),a(wt,{className:"pl-2",href:"https://bit-social.com/docs/auto-publish-wordpress-posts-on-social-media/",rel:"noopener noreferrer nofollow",target:"_blank",underline:!0,children:[i("Doc here"),t(A,{name:"move-up-right",size:12,style:{transform:"translateY(-2px)"}})]})]}),a(r,{style:{marginTop:10},children:[a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("When you publish a new wordpress post, the plugin shares the post on all active social accounts automatically."),title:i("Share posts automatically")}),t("div",{children:t(z,{checked:e.isEnabled,disabled:S,onChange:o=>g("isEnabled",o)})})]}),t(d,{className:"pt-2",children:t(j,{mark:!0,children:i("You have to create and select account first to enable this option!")})})]}),a(r,{style:{marginTop:10},children:[a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("Automatically share specific post types, like blogs or products, to your social accounts when published."),title:i("Share posts type")}),t("div",{children:t(C,{allowClear:!0,loading:S||O,mode:"multiple",onChange:o=>g("postType",o),options:W,placeholder:i("Post Type: Post"),style:{minWidth:"150px"},value:e.postType})})]}),t(d,{className:"pt-2",children:t(j,{mark:!0,children:t("span",{dangerouslySetInnerHTML:{__html:i("Share posts default type <b>Post</b>")}})})})]}),t(r,{style:{marginTop:10},children:a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("Optimize your sharing strategy with flexible timing options: use the dropdown menu to select when your posts will be shared after publishing"),title:i("Share post delay")}),a(p,{gap:20,vertical:!0,children:[t(d,{children:t(C,{css:Ct,onChange:o=>g("postDelay",o),options:G,value:N(e.postDelay)})}),N(e.postDelay)==="delay"&&a(d,{className:"w-100",children:[t(dt,{css:jt,min:1,onChange:H,type:"number",value:e.postDelay.every}),t(C,{css:Dt,onChange:R,options:Y,value:e.postDelay.unit})]})]})]})}),a(r,{style:{marginTop:10},children:[a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("If you don't want to keep the shared post logs, you need to disable the option. Disabling the option prevents you view your insights and you might encounter duplicate posts when you use the schedule module."),title:i("Enable auto post log")}),t("div",{children:t(z,{checked:e.keepLogs,disabled:S,onChange:o=>g("keepLogs",o)})})]}),t(d,{className:"pt-2",children:t(j,{mark:!0,children:i("You have to create and select account first to enable this option!")})})]})]})}),t(P,{span:6,children:t(St,{})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};export{Zt as default};
