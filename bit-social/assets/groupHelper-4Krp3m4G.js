import{X as _,$ as R,ac as W,w as L,A as Te,q as oe,v as X,y as l,ar as N,z as i,T as m,j as c,F as ee,S as v,B as b,a0 as Fe,D as Q,E as se,r as P,K as O,I as ke,N as ie,c1 as he,ai as G,c2 as Ne,J as te,Y as x,s as Y,G as ve,H as Se,L as Ue,c3 as ue,x as je,c4 as qe,M as de}from"./main-itchy-lizards-begin.js";import{p as ne,P as ce,i as ae}from"./PlatformIcon-C7lDNzyq.js";import{C as y,R as Z}from"./row-DS_v3-TD.js";import{A as Me}from"./index-BSv2bKO6.js";import{F as D}from"./index-Cg3O_i2u.js";import{C as J}from"./index-ZkLQuNjo.js";import{A as _e}from"./index-D7rEAE3Q.js";import{s as U}from"./index-ZPNDk7I7.js";import{P as $e,F as g}from"./index-BH-lSI8s.js";import{I,S as Le}from"./index-B1SzMXAY.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Oe({searchAccountsTxt:e="",selectedMenuTab:t={}}={}){const{isModalOpen:o}=_(R),a=[];e&&a.push(e),t.type&&a.push(t);const{data:s,isFetching:h,isLoading:u,refetch:n}=W({queryFn:async()=>L("accounts",void 0,{search:e,...t},"GET"),queryKey:["accounts",...a],refetchInterval:o?2e3:!1});return{accounts:(s==null?void 0:s.data)||[],isFetchingAccounts:h,isLoadingAccounts:u,refetchAccounts:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Re(){const[e]=Te({}),t=e.get("value")||"",a={type:e.get("type")||"",value:t},s=oe(),{isError:h,isPending:u,isSuccess:n,mutateAsync:r}=X({mutationFn:async d=>L("account/save",{accountData:d},void 0,"POST"),mutationKey:["save_account"],onSuccess:()=>{s.invalidateQueries({queryKey:["active-accounts"]}),s.invalidateQueries({queryKey:["accounts",a]})}});return{isSavingAccount:u,isSavingAccountError:h,isSavingAccountSuccess:n,saveAccount:r}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Be(){const{isPending:e,mutateAsync:t}=X({mutationFn:async o=>L(o.url,o.data,void 0,"POST")});return{isVerifyAccountLoading:e,verifyAccount:o=>t(o)}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ve=e=>{switch(e){case"googleBusinessProfile":return l(ee,{children:[i("You can only add verified locations."),c("br",{}),i("If you need to add another Google account, simply log out of or switch Google accounts first.")]});default:return c(ee,{children:N(i("If you need to add another %s  account, simply log out of or switch %s accounts first."),e,e)})}};function Ee({count:e=0,platform:t}){return l(m.Text,{style:{fontSize:"14px"},type:"secondary",children:[l("div",{children:[N(i("Total %s accounts found"),e)," "]}),Ve(t)]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const De=({token:e})=>({background:`${e.colorBgLayout} `});function pe({accountType:e,connectAccountId:t,handleConnect:o,icon:a,id:s,isConnected:h,isLoading:u,name:n}){const r=JSON.parse(e).account_type;return c(J,{css:De,size:"small",children:l(Z,{align:"middle",justify:"space-between",children:[c(y,{children:l(v,{size:"small",children:[c(Me,{size:40,src:a}),l(D,{style:{maxWidth:"300px"},vertical:!0,children:[c(m.Text,{ellipsis:!0,strong:!0,title:n,children:n}),c(m.Text,{type:"secondary",children:r})]})]})}),c(y,{children:h?c(m.Text,{className:"mx-2",type:"success",children:i("Saved")}):c(b,{disabled:u&&s!==t,loading:u&&s===t,onClick:o,type:"primary",children:i("Save")})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ge(){var E;const[e,t]=Fe(R),{isProClient:o}=Q(se),{isSavingAccount:a,saveAccount:s}=Re(),{isVerifyAccountLoading:h,verifyAccount:u}=Be(),[n,r]=P.useState(),d=()=>{t(he)},f=P.useMemo(()=>Array.isArray(e==null?void 0:e.details)?e.details.map(p=>{const{details:w}=p.account,{account_id:T,account_name:j,icon:z}=JSON.parse(w);return{accountDetails:p.account,accountIcon:z,accountId:T,accountName:j,isConnected:p.isConnected,verifyUrl:p.verifyUrl}}):[],[e==null?void 0:e.details]),C=async(p,w)=>{var z;r(p.account_id);let T={...p};if(w){const A=await u({data:T,url:w});if(A.status==="error")return r(void 0),U.error({description:A.data.message,message:"Account Save Failed"});T=A.data.accountDetails}const j=await s(T);if(r(void 0),j.status==="error")return U.error({description:j.data.message,message:"Account Save Failed"});if(j.status==="success"){const q=(z=e==null?void 0:e.details)==null?void 0:z.map(A=>{const K=A.account.account_id;return String(K)===String(j.data.account.account_id)?{...A,isConnected:!0}:A});t(A=>({...A,details:q})),U.success({message:"Account Save Successfully"})}},S=e.platform&&ne[e.platform].name;return P.useEffect(()=>{function p(w){w.preventDefault(),t(he)}return window.addEventListener("beforeunload",p,{capture:!0}),()=>{window.removeEventListener("beforeunload",p,{capture:!0})}},[]),l(ie,{footer:!1,maskClosable:!1,onCancel:d,open:e.isModalOpen,styles:{body:{maxHeight:"70vh",overflowY:"scroll",padding:"0 8px"}},title:e.loading?l(v,{children:[c(O.Avatar,{active:!0,shape:"circle",size:"large"}),c(O.Input,{active:!0,size:"small"})]}):l(D,{align:"center",gap:"small",children:[c(ce,{name:e.platform,size:30}),c(m.Text,{style:{fontSize:"18px",textTransform:"capitalize"},children:S})]}),children:[l(v,{className:"w-100 py-2",direction:"vertical",children:[e.loading&&!e.status?Array.from({length:3}).fill(0).map((p,w)=>c(J,{className:"w-100",size:"small",children:l(v,{className:"w-100",size:"large",children:[c(O.Avatar,{active:!0,shape:"circle",size:"large"}),c(O.Input,{active:!0,block:!0,size:"small",style:{width:"260px"}}),c(O.Button,{active:!0})]})},`key-${w+9}`)):(S==="LinkedIn"&&!o?l(D,{gap:10,vertical:!0,children:[c(m.Title,{level:5,children:i("Profile")}),f&&f.length&&f.map(p=>c(pe,{accountType:p.accountDetails.details,connectAccountId:n,handleConnect:()=>C(p.accountDetails,p.verifyUrl),icon:p.accountIcon,id:p.accountId,isConnected:p.isConnected,isLoading:a||h,name:p.accountName},p.accountId)),l(m.Title,{level:5,children:[i("Page")," ",c(ke,{color:"#ff8609",size:20})]}),c(J,{className:"w-100",size:"small",children:l(v,{className:"w-100",size:"large",children:[c(O.Avatar,{shape:"circle",size:"large"}),c(O.Input,{block:!0,size:"small",style:{width:"260px"}}),c(O.Button,{})]})}),c(m.Text,{strong:!0,children:i("Linkedin Page feature on pro")})]}):f&&f.length&&f.map(p=>c(pe,{accountType:p.accountDetails.details,connectAccountId:n,handleConnect:()=>C(p.accountDetails,p.verifyUrl),icon:p.accountIcon,id:p.accountId,isConnected:p.isConnected,isLoading:a||h,name:p.accountName},p.accountId)))||"",e.status==="success"&&!((E=e.details)!=null&&E.length)&&c(m.Title,{level:5,children:S==="Pinterest"?i("Board Not Found"):i("Account Not Found")}),e.status==="error"&&l(D,{vertical:!0,children:[l(m.Title,{level:5,children:[" ",i("Account connect failed")]}),c(_e,{description:e.message,type:"error"})]})]}),e.status&&S?c(Ee,{count:f==null?void 0:f.length,platform:S}):c(m.Title,{level:5,children:"Fetching data, please wait..."})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ke(){const{data:e,isFetching:t,isLoading:o,refetch:a}=W({queryFn:async()=>L("platforms-credentials",void 0,void 0,"POST"),queryKey:["clientIds"]}),{clientInfo:s}=(e==null?void 0:e.data)||{};return{clientIds:s,isFetchingClientIds:t,isLoadingClientIds:o,refetchClientIds:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge={bluesky:"https://bit-social.com/documentation/accounts/connect-your-bluesky-account-with-bit-social/",discord:"https://bit-social.com/docs/accounts/connect-your-discord-account-with-bit-social/",facebook:"https://bit-social.com/documentation/accounts/connect-your-facebook-account-with-bit-social/",googleBusinessProfile:"https://bit-social.com/documentation/accounts/connect-your-google-business-profile-account-with-bit-social/",instagram:"https://bit-social.com/documentation/accounts/connect-your-instagram-account-with-bit-social/",line:"https://bit-social.com/documentation/accounts/connect-your-line-account-with-bit-social/",linkedin:"https://bit-social.com/documentation/accounts/connect-your-linkedin-account-with-bit-social/",pinterest:"https://bit-social.com/docs/accounts/connect-your-pinterest-account-with-bit-social/",telegram:"https://bit-social.com/documentation/accounts/connect-your-telegram-account-with-bit-social/",tiktok:"https://bit-social.com/documentation/accounts/connect-your-tiktok-account-with-bit-social/",tumblr:"https://bit-social.com/documentation/accounts/connect-your-tumblr-account-with-bit-social/",twitter:"https://bit-social.com/documentation/accounts/connect-your-twitter-account-with-bit-social/"};function He(e){if(!e||!ge[e]){console.error("Invalid link key",e);return}const t=new URL(ge[e]);return t.searchParams.append("utm_source",G.PLUGIN_SLUG),t.searchParams.append("utm_medium","inside-plugin"),t.href}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function me({platform:e}){return c(b,{href:He(e),icon:c(Ne,{}),rel:"noopener noreferrer nofollow",size:"small",style:{whiteSpace:"nowrap"},target:"_blank",type:"link",children:i("Doc Link")})}const Ye="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='512'%20width='512'%20xmlns:v='https://vecta.io/nano'%3e%3cpath%20d='M501.301%20131.964c-5.888-22.172-23.237-39.633-45.266-45.56C416.107%2075.636%20256%2075.636%20256%2075.636s-160.107%200-200.035%2010.768c-22.029%205.926-39.378%2023.388-45.266%2045.56C0%20172.152%200%20256%200%20256s0%2083.848%2010.699%20124.036c5.888%2022.172%2023.237%2039.633%2045.266%2045.56C95.893%20436.364%20256%20436.364%20256%20436.364s160.107%200%20200.035-10.768c22.029-5.927%2039.378-23.388%2045.266-45.56C512%20339.848%20512%20256%20512%20256s0-83.848-10.699-124.036z'%20fill='red'/%3e%3cpath%20d='m203.636%20332.128%20133.818-76.126-133.818-76.13z'%20fill='%23fff'/%3e%3c/svg%3e";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Link:Qe}=m,fe={bluesky:"https://www.youtube.com/watch?v=2ftNPVnAISI",discord:"https://www.youtube.com/watch?v=q85NrjFQ33Y",facebook:"https://www.youtube.com/watch?v=V7-DqQ4dJg4",googleBusinessProfile:"https://www.youtube.com/watch?v=o3Hf2v4HsVs",linkedin:"https://www.youtube.com/watch?v=YcmVEq3GGsk",pinterest:"https://www.youtube.com/watch?v=6deQqqhMYLY",tiktok:"https://www.youtube.com/watch?v=5w5c0kY2tno",tumblr:"https://www.youtube.com/watch?v=WfxpNBBAjRQ",twitter:"https://www.youtube.com/watch?v=v2m99Itn-KU"};function Ce({platform:e}){if(!(!e||!fe[e]))return c(Qe,{href:fe[e],rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:c(b,{icon:c(Me,{alt:"youtube",size:20,src:Ye}),size:"small",type:"text",children:i("Tutorial")})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Link:Je}=m;function F({devLink:e,name:t}){return l(ee,{children:[i("To get app credentials, Visit")," ",l(Je,{href:e,rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:[ne[t].name," ",i("Developer"),c(te,{size:12,style:{transform:"translateY(-2px)"}})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:We}=m,Xe=e=>{switch(e){case"discord":return c(F,{devLink:"https://discord.com/developers/applications/",name:e});case"facebook":return c(F,{devLink:"https://developers.facebook.com/apps/",name:e});case"googleBusinessProfile":return c(F,{devLink:"https://console.cloud.google.com/",name:e});case"instagram":return c(F,{devLink:"https://developers.facebook.com/apps/",name:e});case"linkedin":return c(F,{devLink:"https://www.linkedin.com/developers/apps",name:e});case"pinterest":return c(F,{devLink:"https://developers.pinterest.com/apps/",name:e});case"tiktok":return c(F,{devLink:"https://developers.tiktok.com",name:e});case"tumblr":return c(F,{devLink:"https://www.tumblr.com/oauth/apps",name:e});case"twitter":return c(F,{devLink:"https://developer.twitter.com/en/portal/dashboard",name:e});default:return""}};function Ze({platform:e}){return c(We,{children:Xe(e)})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function et(){const e=oe(),{isPending:t,mutateAsync:o}=X({mutationFn:async a=>L("custom-app",{...a},void 0,"POST"),mutationKey:["custom_app"],onSuccess:()=>{e.invalidateQueries({queryKey:["get-customApp"]})}});return{createCustomApp:a=>o(a),isLoadingCreateCustomApp:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function tt(e){const{data:t,isLoading:o,refetch:a}=W({queryFn:async()=>L("custom-app",void 0,{platform:e},"GET"),queryKey:["get-customApp"],refetchOnWindowFocus:!1});return{customApps:t==null?void 0:t.data,isLoadingCustomApp:o,refetchCustomApp:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ct(){const e=oe(),{isPending:t,mutateAsync:o}=X({mutationFn:async a=>L(`custom-app/${a}/destroy`,void 0,void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["get-customApp"]})}});return{deleteCustomApp:a=>o(a),isLoadingDeleteCustomApp:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=(e,t,o,a,s,h,u)=>{const[n,r]=[700,700],d=Math.round((window.innerWidth-n)/2),f=Math.round((window.innerHeight-r)/2),C=window.open(e,t,`width=${n},height=${r},left=${d},top=${f},toolbar=off`),S=setInterval(()=>{localStorage.setItem("__bitSocial_platform_interval",String(S)),!(!(C!=null&&C.closed)||C!=null&&C.closed&&!localStorage.getItem("__bitSocial_platform"))&&(clearInterval(S),o==null||o(),u(a,s,h))},500)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const at=`${G.CLIENT_SECRET_URL}`,{baseAuthStateURL:ot}=_(x),st=async e=>{const t={client_id:e.appId,platform:"facebook"},o={body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"};return fetch(at,o).then(a=>a.json())},it=async(e,t,o)=>{const a={...e};if(o==="oneClickAuth"){const n=await st(a);a.appSecret=n.clientSecret}const s={config:{authType:"OAuth2",platform:a.platform},payload:{client_id:a.appId,client_secret:a.appSecret,code:t.code,grant_type:"no need",redirect_uri:a.redirectUri}},{data:h,status:u}=await L("authorize",s,void 0,"POST");u==="success"&&Y(R,{details:h,isModalOpen:!0,loading:!1,platform:"facebook",status:u})},nt=async(e,t,o)=>{let a={};const s=localStorage.getItem("__bitSocial_platform");s&&(a=JSON.parse(s),localStorage.removeItem("__bitSocial_platform")),(!a||!a.code||a.error)&&U.error({description:`${a.error?`Cause: ${a.error}.`:""} Please try again`,message:"Authorization failed"});const h=await it(e,a,o);return t(),h},rt=(e,t,o,a)=>{if(!e.platform||!e.appId||!e.redirectUri)throw new Error("Missing credentials");const{appId:s,platform:h,redirectUri:u}=e,n=a==="oneClickAuth"?G.REDIRECT_URL:u,r="pages_show_list,pages_read_engagement,pages_manage_metadata,pages_manage_posts,business_management",d=new URL("https://www.facebook.com/dialog/oauth");d.searchParams.append("scope",r),d.searchParams.append("client_id",s),d.searchParams.append("redirect_uri",n),d.searchParams.append("state",ot+"#/accounts/auth/response"),xe(d,h,o,e,t,a,nt)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const lt=`${G.CLIENT_SECRET_URL}`,Ie=`${G.REDIRECT_URL}`,{baseAuthStateURL:ht}=_(x),ut=async(e,t)=>{const o={config:{authType:"OAuth2",platform:e.platform},payload:{client_id:e.appId,client_secret:e.appSecret,code:t.code,grant_type:"null",redirect_uri:e.redirectUri}},{data:a,status:s}=await L("authorize",o,void 0,"POST");s==="success"&&Y(R,{...{isModalOpen:!0,loading:!1,platform:"linkedin",status:s},details:a})},dt=async e=>{const t={client_id:e.appId,platform:e.platform},o={body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"};return fetch(lt,o).then(a=>a.json())},pt=async(e,t,o)=>{let a={};const s=localStorage.getItem("__bitSocial_platform"),h={...e};if(s&&(a=JSON.parse(s),localStorage.removeItem("__bitSocial_platform")),!a.code){U.error({description:`${a.error?`Cause: ${a.error}.`:""} Please try again`,message:"Authorization failed"});return}if(o==="oneClickAuth"){const n=await dt(e);(!n||!n.clientSecret)&&U.error({description:`Cause: ${n.message}. Please try again`,message:"Authorization failed"}),h.appSecret=n.clientSecret.toString(),h.redirectUri=Ie}const u=await ut(h,a);return t(),u},gt=(e,t,o,a)=>{if(!e.platform||!e.appId||!e.redirectUri)throw new Error("Missing credentials");const{appId:s,platform:h,redirectUri:u}=e,n=a==="oneClickAuth"?Ie:u,r="openid profile email w_member_social r_organization_admin w_organization_social rw_organization_admin",d=new URL("https://www.linkedin.com/oauth/v2/authorization");d.searchParams.append("scope",r),d.searchParams.append("client_id",s),d.searchParams.append("response_type","code"),d.searchParams.append("redirect_uri",n),d.searchParams.append("state",ht+"#/accounts/auth/response"),xe(d,h,o,e,t,a,pt)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function mt(e){switch(e){case"facebook":return rt;case"linkedin":return gt}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(x);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Pe({authType:e="oneClickAuth",clientId:t,closeConnectModal:o,handleAuthCallback:a,isConnectLoading:s,platform:h,platformCredentialData:u,setCustomModalOpen:n}){const r=ve(Se),d=mt;return c(b,{block:!0,disabled:!t,loading:s,onClick:()=>{const C=d(h,u.apiVersion);if(ae(h)){r(!0);return}n&&n(!1),C&&C(u,a,o,e)},size:"small",type:"primary",children:i("Connect")})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:ft}=m;var Ct={name:"3s4yqf",styles:"width:400px"};function yt({closeConnectModal:e,credential:t,handleAuthCallback:o,handleDelete:a,isDeleteLoading:s,name:h,platform:u,setCustomModalOpen:n}){const r={apiVersion:t.apiVersion??void 0,appId:t.appKey,appSecret:t.appSecret,platform:u,redirectUri:t.redirectUri};return c(J,{css:Ct,size:"small",children:l(Z,{align:"middle",justify:"space-between",children:[c(ft,{className:"text-capitalize",ellipsis:!0,strong:!0,style:{width:"200px"},children:h}),l(v,{children:[c(Pe,{authType:"customAuth",clientId:t.appKey,closeConnectModal:e,handleAuthCallback:o,platform:u,platformCredentialData:r,setCustomModalOpen:n}),c($e,{cancelText:i("No"),description:i("Are you sure to delete this app?"),okButtonProps:{danger:!0,loading:s},okText:i("Yes, Delete"),onConfirm:a,placement:"bottomRight",title:i("Delete the app"),children:c(b,{danger:!0,icon:c(Ue,{}),type:"text"})})]})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:V,Title:bt}=m,ye=(e,t)=>({apiVersion:["twitter"],appName:["twitter","tumblr"]})[t].includes(e);var wt={name:"11vupei",styles:"border-right:1px solid #B9B9B9"};function At({closeConnectModal:e,handleAuthCallback:t,platform:o,setCustomModalOpen:a}){var $,re,le;const{apiURL:s,siteUrl:h}=Q(x),u=`${s.base}/redirect`,n=h,[r]=g.useForm(),[d,f]=P.useState({}),{createCustomApp:C,isLoadingCreateCustomApp:S}=et(),{deleteCustomApp:E,isLoadingDeleteCustomApp:p}=ct(),{customApps:w}=tt(o),T=P.useRef(null),j=k=>{try{navigator.clipboard.writeText(k),U.success({message:"Copied!"})}catch{T.current!=null&&(T.current.select(),document.execCommand("copy"),T.current.blur())}},z=k=>{r.setFieldsValue({apiVersion:k})},q=[{label:"v1.1 (media supported)",value:"1.1"},{label:"v2.0 (media unsupported)",value:"2"}],A=async k=>{const ze={...k,platform:o},B=await C(ze);(B==null?void 0:B.code)==="SUCCESS"?(r.resetFields(),U.success({description:B.data.message,message:"App successfully added!"})):(B.data.errorField&&f(B.data.errorField),U.error({description:B.data.message,message:"App add failed"}))},K=k=>{E(k)};return l(Z,{className:"mt-4",gutter:[48,0],justify:"center",children:[c(y,{css:wt,span:12,children:l(g,{form:r,initialValues:{redirectUri:u},layout:"vertical",onFinish:A,children:[c(g.Item,{label:c(V,{strong:!0,children:i("Homepage URI")}),name:"homepageUri",rules:[{message:"Please enter homepage url"}],children:l(v.Compact,{className:"w-100",children:[c(I,{defaultValue:`${n}`,ref:T,style:{width:"calc(100% - 32px)"}}),c(b,{icon:c(ue,{size:12}),onClick:()=>j(n),title:i("Click to copy")})]})}),c(g.Item,{label:c(V,{strong:!0,children:i("Redirect URI")}),name:"redirectUri",rules:[{message:"Please enter redirect url",required:!0}],children:l(v.Compact,{className:"w-100",children:[c(I,{defaultValue:`${u}`,ref:T,style:{width:"calc(100% - 32px)"}}),c(b,{icon:c(ue,{size:12}),onClick:()=>j(u),title:i("Click to copy")})]})}),ye(o,"apiVersion")?c(g.Item,{label:c(V,{strong:!0,children:i("Api Version")}),name:"apiVersion",rules:[{message:"Please select an API version",required:!0}],children:c(Le,{onChange:z,options:q})}):"",ye(o,"appName")?l(g.Item,{label:c(V,{strong:!0,children:i("App Name")}),name:"appName",rules:[{message:"Please enter your app name",required:!0}],children:[c(I,{}),d.appName&&c(m.Text,{type:"danger",children:($=d.appName)==null?void 0:$[0]})]}):"",c(v,{className:"pb-2",children:c(Ze,{platform:o})}),l(g.Item,{label:c(V,{strong:!0,children:i("App Key or Client ID")}),name:"appKey",rules:[{message:"Please enter your app key",required:!0}],children:[c(I,{}),d.appKey&&c(m.Text,{type:"danger",children:(re=d.appKey)==null?void 0:re[0]})]}),l(g.Item,{label:c(V,{strong:!0,children:i("App Secret or Client Secret")}),name:"appSecret",rules:[{message:"Please enter your app secret",required:!0}],children:[c(I,{}),d.appSecret&&c(m.Text,{type:"danger",children:(le=d.appSecret)==null?void 0:le[0]})]}),c(g.Item,{children:c(b,{className:"w-100",loading:S,onClick:()=>{r.submit()},size:"large",type:"primary",children:i("Add")})})]},o)}),l(y,{span:12,children:[c(bt,{level:5,children:i("Connected Apps")}),c(v,{direction:"vertical",children:w&&w.length?w.map(k=>c(yt,{appId:k.id,closeConnectModal:e,credential:k.credential,handleAuthCallback:t,handleDelete:()=>K(k.id),isDeleteLoading:p,name:k.name,platform:o,setCustomModalOpen:a},k.id)):c(V,{children:i("No App Found")})})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Tt=async(e,t,o)=>{const{id:a,token:s,type:h}=e;Y(R,{isModalOpen:!0,loading:!0}),t(),o();const n={config:{authType:"Token",platform:"line"},payload:{id:a,token:s,type:h}},{data:r,status:d}=await L("authorize",n,void 0,"POST"),f={isModalOpen:!0,loading:!1,platform:"line",status:d};d==="success"&&Y(R,{...f,details:r}),d==="error"&&"message"in r&&typeof r.message=="string"&&Y(R,{...f,message:r.message})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Link:be,Text:H}=m;function kt({closeConnectModal:e,handleAuthCallback:t,platform:o}){const[a]=g.useForm(),[s,h]=P.useState("group"),u=async n=>{Tt(n,t,e)};return P.useEffect(()=>{a.setFieldsValue({type:s})},[s,a]),l(g,{form:a,initialValues:{type:"group"},layout:"vertical",onFinish:u,children:[c(g.Item,{label:c(H,{strong:!0,children:i("Type")}),name:"type",children:c(Le,{onChange:n=>h(n),options:[{label:i("Group"),value:"group"},{label:i("User"),value:"user"}]})}),c(g.Item,{extra:l(H,{type:"secondary",children:[N(i("Enter the ID of the target recipient. Use a %s Id value returned in a"),s)," ",l(be,{href:"https://developers.line.biz/en/reference/messaging-api/#common-properties",rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:[i("webhook event object"),c(te,{size:12,style:{transform:"translateY(-2px)"}})]})]}),htmlFor:"id",label:c(H,{className:"capitalize",strong:!0,children:N(i("%s Id"),s)}),name:"id",rules:[{message:N("Please enter your %s id",s),required:!0}],children:c(I,{id:"id",name:"id"})}),c(g.Item,{extra:l(H,{type:"secondary",children:[i("To get token, Visit "),l(be,{href:"https://developers.line.biz/console/",rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:[i("developer console"),c(te,{size:12,style:{transform:"translateY(-2px)"}})]})]}),htmlFor:"token",label:c(H,{strong:!0,children:i("Token")}),name:"token",rules:[{message:"Please enter your channel access token",required:!0}],children:c(I,{id:"token",name:"token"})}),c(g.Item,{children:c(b,{className:"w-100 capitalize",onClick:()=>a.submit(),size:"large",type:"primary",children:N(i("Connect %s"),o)})})]},o)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function vt({platform:e}){switch(e){case"bluesky":return c(_e,{message:"If 2FA is enable, you must use an App Password in the password field instead of your regular password.",showIcon:!0,type:"info"});default:return""}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:we}=m;function St({closeConnectModal:e,handleAuthCallback:t,platform:o}){const[a]=g.useForm();return l(g,{form:a,layout:"vertical",onFinish:async h=>{},children:[c(g.Item,{label:c(we,{strong:!0,children:i("Username or Email")}),name:"id",rules:[{message:"Please enter your username or email",required:!0}],children:c(I,{})}),c(g.Item,{label:c(we,{strong:!0,children:i("Password")}),name:"password",rules:[{message:"Please enter your password",required:!0}],children:c(I,{})}),c(g.Item,{children:c(vt,{platform:o})}),c(g.Item,{children:c(b,{className:"w-100",onClick:()=>{a.submit()},size:"large",type:"primary",children:N(i("Connect %s "),o)})})]},o)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:jt}=m;function Mt({closeConnectModal:e,handleAuthCallback:t,platform:o}){const[a]=g.useForm();return l(g,{form:a,layout:"vertical",onFinish:async h=>{},children:[c(g.Item,{label:c(jt,{strong:!0,children:i("Bot Token")}),name:"token",rules:[{message:"Please enter your bot token",required:!0}],children:c(I,{})}),c(g.Item,{children:c(b,{className:"w-100",onClick:()=>{a.submit()},size:"large",type:"primary",children:N(i("Connect %s "),o)})})]},o)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function _t({closeConnectModal:e,currentConnectType:t,handleAuthCallback:o,platform:a,setCustomModalOpen:s}){switch(t){case"custom":return c(At,{closeConnectModal:e,handleAuthCallback:o,platform:a,setCustomModalOpen:s});case"login":switch(a){case"bluesky":return c(St,{closeConnectModal:e,handleAuthCallback:o,platform:a});case"line":return c(kt,{closeConnectModal:e,handleAuthCallback:o,platform:a});case"telegram":return c(Mt,{closeConnectModal:e,handleAuthCallback:o,platform:a})}}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Lt=`${G.REDIRECT_URL}`,{Title:Ae}=m,xt={custom:i("Connect Custom %s App"),login:i("%s"),oneClick:i("Connect %s")};function M({clientId:e,closeConnectModal:t,isConnectLoading:o,name:a,platform:s,setAccountModal:h,types:u}){const{refetchAccounts:n}=Oe(),[r,d]=Te({}),f=r.get("value")||"all",[C,S]=P.useState(),[E,p]=P.useState(!1),{token:w}=je.useToken(),T=ve(Se),{isProClient:j}=Q(se),z=()=>{p(!1)},q=$=>{if(S($),ae(s)&&!j){T(!0);return}t(),p(!0)},A=()=>{d($=>($.set("type","platform"),$.set("value",String(f)),$)),n()},K=()=>{z(),h(!0)};return c(J,{style:{borderColor:w.colorBorder,height:"100%"},children:l(D,{gap:14,vertical:!0,children:[l(v,{align:"center",children:[c(ce,{name:s,size:30,style:{flexShrink:0}}),c(Ae,{className:"text-capitalize",level:5,style:{marginBottom:0},children:a||ne[s].name}),ae(s)&&!j&&c(ke,{color:"#ff8609",size:20})]}),l(v,{size:0,children:[c(me,{platform:s}),c(Ce,{platform:s})]}),l(v,{direction:"vertical",size:"small",children:[u.includes("custom")&&c(b,{block:!0,onClick:()=>q("custom"),size:"small",style:{borderColor:w.colorPrimary},children:i("Custom App")}),u.includes("login")&&c(b,{block:!0,onClick:()=>q("login"),size:"small",type:"primary",children:i("Login")}),u.includes("oneClick")&&e&&c(Pe,{clientId:e,closeConnectModal:t,handleAuthCallback:A,isConnectLoading:o,platform:s,platformCredentialData:{appId:e,appSecret:"",platform:s,redirectUri:Lt}})]}),C&&c(ie,{centered:!0,footer:!1,onCancel:()=>p(!1),onOk:z,open:E,title:c("div",{children:l(D,{align:"center",gap:10,children:[c(b,{icon:c(qe,{size:24}),onClick:K,title:i("Back"),type:"text"}),c(ce,{name:s,size:34}),c(Ae,{className:"text-capitalize",level:5,style:{marginBottom:0},children:N(i(xt[C]),s)}),c(me,{platform:s}),c(Ce,{platform:s})]})}),width:900,children:c(_t,{closeConnectModal:t,currentConnectType:C,handleAuthCallback:A,platform:s,setCustomModalOpen:p})},s)]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Bt({btnType:e="default"}){const{clientIds:t,isLoadingClientIds:o}=Ke(),{token:a}=je.useToken(),{isDarkTheme:s}=Q(se),{isModalOpen:h}=Q(R),[u,n]=P.useState(!1),r=()=>{const f=localStorage.getItem("__bitSocial_platform_interval");f&&(clearInterval(Number(f)),localStorage.removeItem("__bitSocial_platform_interval")),n(!1)},d=()=>{n(!0)};return l("div",{children:[e==="default"?c(b,{icon:c(de,{size:18}),onClick:d,size:"small",type:"primary",children:i("Connect Account")}):c(b,{"aria-label":i("Connect Account"),icon:c(de,{size:30}),onClick:d,style:{alignItems:"center",border:`2px solid ${a.colorPrimary}`,color:s?a.colorTextBase:a.colorPrimary,display:"flex",fontSize:"17px",fontWeight:600,height:"100%",justifyContent:"center",minHeight:"110px",width:"100%"},type:"text",children:i("Connect Account")}),c(ie,{centered:!0,footer:!1,onCancel:r,open:u,style:{padding:"20px"},title:i("Connect Account"),width:1e3,children:l(Z,{className:"p-2",gutter:[12,12],children:[c(y,{md:6,sm:12,xs:24,children:c(M,{clientId:t==null?void 0:t.facebook.id,closeConnectModal:r,isConnectLoading:o,platform:"facebook",setAccountModal:n,status:t==null?void 0:t.facebook.status,types:["oneClick","custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{clientId:t==null?void 0:t.linkedin.id,closeConnectModal:r,isConnectLoading:o,platform:"linkedin",setAccountModal:n,status:t==null?void 0:t.linkedin.status,types:["oneClick","custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{clientId:t==null?void 0:t.googleBusinessProfile.id,closeConnectModal:r,isConnectLoading:o,name:"Google Business",platform:"googleBusinessProfile",setAccountModal:n,status:t==null?void 0:t.googleBusinessProfile.status,types:["oneClick","custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{clientId:t==null?void 0:t.pinterest.id,closeConnectModal:r,isConnectLoading:o,platform:"pinterest",setAccountModal:n,status:t==null?void 0:t.pinterest.status,types:["oneClick","custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{clientId:t==null?void 0:t.discord.id,closeConnectModal:r,isConnectLoading:o,platform:"discord",setAccountModal:n,status:t==null?void 0:t.discord.status,types:["oneClick","custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{clientId:t==null?void 0:t.tumblr.id,closeConnectModal:r,isConnectLoading:o,platform:"tumblr",setAccountModal:n,status:t==null?void 0:t.tumblr.status,types:["oneClick","custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{clientId:t==null?void 0:t.instagram.id,closeConnectModal:r,isConnectLoading:o,platform:"instagram",setAccountModal:n,status:t==null?void 0:t.instagram.status,types:["oneClick","custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{closeConnectModal:r,name:"TikTok",platform:"tiktok",setAccountModal:n,types:["custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{closeConnectModal:r,name:"X (Twitter)",platform:"twitter",setAccountModal:n,types:["custom"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{closeConnectModal:r,name:"Bluesky",platform:"bluesky",setAccountModal:n,status:0,types:["login"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{closeConnectModal:r,name:"Line",platform:"line",setAccountModal:n,status:0,types:["login"]})}),c(y,{md:6,sm:12,xs:24,children:c(M,{closeConnectModal:r,name:"Telegram",platform:"telegram",setAccountModal:n,status:0,types:["login"]})})]})}),h&&c(Ge,{})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Vt(){const{data:e,isLoading:t,refetch:o}=W({queryFn:async()=>L("pro_groups",void 0,void 0,"GET"),queryKey:["groups"]});return{groups:(e==null?void 0:e.data)||[],isLoadingGroups:t,refetchGroups:o}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Et=e=>e.accounts.map(o=>Number(o.id)),Dt=(e,t,o)=>{const a=t.find(s=>s.name.toLowerCase()===e.toLowerCase());return!!a&&a.id!==o};export{Bt as C,Vt as a,Et as g,Dt as i,Oe as u};
