import{r as l,_ as ja,ay as Da,h as Ie,a as lt,d as Vt,f as ye,c as re,az as ct,aA as Ae,i as Gt,m as Kt,k as Yt,n as pe,aB as dt,aC as La,X as Ge,o as Qt,aD as Na,aE as Oa,aF as Fa,aG as Ma,aH as Ue,aI as Ra,aJ as we,aK as le,Y as fe,aL as Jt,aM as Zt,aN as ea,g as J,aO as ie,aP as ta,aQ as ut,aR as _a,aS as aa,t as ra,aT as Ua,aU as $t,C as na,aV as Ba,aW as za,aX as kt,E as se,aY as At,v as Ha,aZ as Wa,e as qa,a_ as Xa,a$ as Va,b0 as xt,a1 as Ga,b1 as Ka,y as mt,z as Ke,ag as Ya,ah as Qa,x as sa,B,F as ve,j as h,D as C,a4 as _e,H as gt,S as be,b2 as oa,K as ft,a5 as ue,as as Fe,Q as ia,T as Pe,au as Ja,av as Za,a2 as la,a3 as ca,G as da,b3 as er,I as tr,aj as Tt,an as Be,L as ar,am as rr,at as nr,N as sr,P as Et,O as or}from"./main-loud-buses-flash.js";import{C as ua}from"./CronWarning-C0g1dMTy.js";import{P as ir}from"./PlatformIcon-g5kbG2HT.js";import{u as lr,a as cr,C as It}from"./groupHelper-B64LUuva.js";import{u as dr,F as ur,A as pr}from"./useIntervalTypes-BdE4rls8.js";import{p as pa,D as hr,d as mr,c as gr,g as fr}from"./DatePicker-DCqK1UVl.js";import{p as Pt}from"./TemplateDocLink-COSAiNPI.js";import{C as jt}from"./index-CCjU26vm.js";import{C as ha,T as br}from"./index-Bgwsj8B4.js";import{F as he,P as Dt}from"./index-CFBVgFmB.js";import{I as je}from"./index-CqCAQhpV.js";import{g as vr}from"./collapse-BbEVqHco.js";import{u as yr,R as ma,C as qe}from"./row-DRTpapjx.js";import{R as Cr}from"./EyeOutlined-Cv43Nui6.js";import"./ProGoogleBusinessProfileSettings-CKO6NRFj.js";import"./useSocialTemplates-BwgKo5Jp.js";import{d as ge}from"./index-CKdsFPZp.js";import{S as wr}from"./index-b__0EaY_.js";import{S as pt,E as Sr}from"./Input-7tgEkJGt.js";import{A as $r}from"./index-Cu09ibcz.js";import{s as bt}from"./index-BASAmswY.js";import{s as kr}from"./index-CKeXLLi4.js";import{F as Lt}from"./index-DgGTU6wh.js";import{P as Ar}from"./index-B3DTKqfm.js";import{u as xr,N as Tr}from"./useUpdateScheduleStatus-gUaoSX4z.js";import{D as Er,R as Ir,F as Pr}from"./Refresh-DbAl5uEn.js";import{T as tt}from"./index-cM9ex_zQ.js";import"./index-DH3YGDdz.js";import"./index-CPznNvdz.js";import"./index-DhLEDAJI.js";import"./index-TSja6Prd.js";import"./index-Ckm6kTQH.js";import"./addEventListener-BznkJtog.js";import"./LeftOutlined-DR2wVtem.js";import"./EllipsisOutlined-DV5-3Kzo.js";import"./Dropdown-CgQbut2T.js";import"./useMemoDebounce-DWerTjhj.js";import"./useUpdateSocialTemplates-CtLITS_c.js";import"./PreviewDummy-D3v3zaJ1.js";import"./move-CQJm0_jz.js";import"./context-CirkcbG9.js";import"./index-D7vSjx4R.js";import"./index-C1xTvE6Q.js";import"./AntIconWrapper-DHRAa4bg.js";var jr={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Dr=function(){var t=l.useRef([]),r=l.useRef(null);return l.useEffect(function(){var a=Date.now(),s=!1;t.current.forEach(function(n){if(n){s=!0;var o=n.style;o.transitionDuration=".3s, .3s, .3s, .06s",r.current&&a-r.current<100&&(o.transitionDuration="0s, 0s")}}),s&&(r.current=Date.now())}),t.current},Nt=0,Lr=Da();function Nr(){var e;return Lr?(e=Nt,Nt+=1):e="TEST_OR_SSR",e}const Or=function(e){var t=l.useState(),r=ja(t,2),a=r[0],s=r[1];return l.useEffect(function(){s("rc_progress_".concat(Nr()))},[]),e||a};var Ot=function(t){var r=t.bg,a=t.children;return l.createElement("div",{style:{width:"100%",height:"100%",background:r}},a)};function Ft(e,t){return Object.keys(e).map(function(r){var a=parseFloat(r),s="".concat(Math.floor(a*t),"%");return"".concat(e[r]," ").concat(s)})}var Fr=l.forwardRef(function(e,t){var r=e.prefixCls,a=e.color,s=e.gradientId,n=e.radius,o=e.style,i=e.ptg,u=e.strokeLinecap,p=e.strokeWidth,c=e.size,f=e.gapDegree,m=a&&Ie(a)==="object",g=m?"#FFF":void 0,v=c/2,b=l.createElement("circle",{className:"".concat(r,"-circle-path"),r:n,cx:v,cy:v,stroke:g,strokeLinecap:u,strokeWidth:p,opacity:i===0?0:1,style:o,ref:t});if(!m)return b;var y="".concat(s,"-conic"),w=f?"".concat(180+f/2,"deg"):"0deg",$=Ft(a,(360-f)/360),x=Ft(a,1),S="conic-gradient(from ".concat(w,", ").concat($.join(", "),")"),d="linear-gradient(to ".concat(f?"bottom":"top",", ").concat(x.join(", "),")");return l.createElement(l.Fragment,null,l.createElement("mask",{id:y},b),l.createElement("foreignObject",{x:0,y:0,width:c,height:c,mask:"url(#".concat(y,")")},l.createElement(Ot,{bg:d},l.createElement(Ot,{bg:S}))))}),Me=100,at=function(t,r,a,s,n,o,i,u,p,c){var f=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,m=a/100*360*((360-o)/360),g=o===0?0:{bottom:0,top:180,left:90,right:-90}[i],v=(100-s)/100*r;p==="round"&&s!==100&&(v+=c/2,v>=r&&(v=r-.01));var b=Me/2;return{stroke:typeof u=="string"?u:void 0,strokeDasharray:"".concat(r,"px ").concat(t),strokeDashoffset:v+f,transform:"rotate(".concat(n+m+g,"deg)"),transformOrigin:"".concat(b,"px ").concat(b,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},Mr=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function Mt(e){var t=e??[];return Array.isArray(t)?t:[t]}var Rr=function(t){var r=lt(lt({},jr),t),a=r.id,s=r.prefixCls,n=r.steps,o=r.strokeWidth,i=r.trailWidth,u=r.gapDegree,p=u===void 0?0:u,c=r.gapPosition,f=r.trailColor,m=r.strokeLinecap,g=r.style,v=r.className,b=r.strokeColor,y=r.percent,w=Vt(r,Mr),$=Me/2,x=Or(a),S="".concat(x,"-gradient"),d=$-o/2,T=Math.PI*2*d,E=p>0?90+p/2:-90,N=T*((360-p)/360),R=Ie(n)==="object"?n:{count:n,gap:2},A=R.count,Z=R.gap,K=Mt(y),V=Mt(b),G=V.find(function(Q){return Q&&Ie(Q)==="object"}),ee=G&&Ie(G)==="object",k=ee?"butt":m,I=at(T,N,0,100,E,p,c,f,k,o),j=Dr(),D=function(){var oe=0;return K.map(function(P,_){var q=V[_]||V[V.length-1],ne=at(T,N,oe,P,E,p,c,q,k,o);return oe+=P,l.createElement(Fr,{key:_,color:q,ptg:P,radius:d,prefixCls:s,gradientId:S,style:ne,strokeLinecap:k,strokeWidth:o,gapDegree:p,ref:function(M){j[_]=M},size:Me})}).reverse()},Y=function(){var oe=Math.round(A*(K[0]/100)),P=100/A,_=0;return new Array(A).fill(null).map(function(q,ne){var L=ne<=oe-1?V[0]:f,M=L&&Ie(L)==="object"?"url(#".concat(S,")"):void 0,z=at(T,N,_,P,E,p,c,L,"butt",o,Z);return _+=(N-z.strokeDashoffset+Z)*100/N,l.createElement("circle",{key:ne,className:"".concat(s,"-circle-path"),r:d,cx:$,cy:$,stroke:M,strokeWidth:o,opacity:1,style:z,ref:function(me){j[ne]=me}})})};return l.createElement("svg",ye({className:re("".concat(s,"-circle"),v),viewBox:"0 0 ".concat(Me," ").concat(Me),style:g,id:a,role:"presentation"},w),!A&&l.createElement("circle",{className:"".concat(s,"-circle-trail"),r:d,cx:$,cy:$,stroke:f,strokeLinecap:k,strokeWidth:i||o,style:I}),A?Y():D())};function Se(e){return!e||e<0?0:e>100?100:e}function Xe({success:e,successPercent:t}){let r=t;return e&&"progress"in e&&(r=e.progress),e&&"percent"in e&&(r=e.percent),r}const _r=({percent:e,success:t,successPercent:r})=>{const a=Se(Xe({success:t,successPercent:r}));return[a,Se(Se(e)-a)]},Ur=({success:e={},strokeColor:t})=>{const{strokeColor:r}=e;return[r||ct.green,t||null]},Ye=(e,t,r)=>{var a,s,n,o;let i=-1,u=-1;if(t==="step"){const p=r.steps,c=r.strokeWidth;typeof e=="string"||typeof e>"u"?(i=e==="small"?2:14,u=c??8):typeof e=="number"?[i,u]=[e,e]:[i=14,u=8]=Array.isArray(e)?e:[e.width,e.height],i*=p}else if(t==="line"){const p=r==null?void 0:r.strokeWidth;typeof e=="string"||typeof e>"u"?u=p||(e==="small"?6:8):typeof e=="number"?[i,u]=[e,e]:[i=-1,u=8]=Array.isArray(e)?e:[e.width,e.height]}else(t==="circle"||t==="dashboard")&&(typeof e=="string"||typeof e>"u"?[i,u]=e==="small"?[60,60]:[120,120]:typeof e=="number"?[i,u]=[e,e]:Array.isArray(e)&&(i=(s=(a=e[0])!==null&&a!==void 0?a:e[1])!==null&&s!==void 0?s:120,u=(o=(n=e[0])!==null&&n!==void 0?n:e[1])!==null&&o!==void 0?o:120));return[i,u]},Br=3,zr=e=>Br/e*100,Hr=e=>{const{prefixCls:t,trailColor:r=null,strokeLinecap:a="round",gapPosition:s,gapDegree:n,width:o=120,type:i,children:u,success:p,size:c=o,steps:f}=e,[m,g]=Ye(c,"circle");let{strokeWidth:v}=e;v===void 0&&(v=Math.max(zr(m),6));const b={width:m,height:g,fontSize:m*.15+6},y=l.useMemo(()=>{if(n||n===0)return n;if(i==="dashboard")return 75},[n,i]),w=_r(e),$=s||i==="dashboard"&&"bottom"||void 0,x=Object.prototype.toString.call(e.strokeColor)==="[object Object]",S=Ur({success:p,strokeColor:e.strokeColor}),d=re(`${t}-inner`,{[`${t}-circle-gradient`]:x}),T=l.createElement(Rr,{steps:f,percent:f?w[1]:w,strokeWidth:v,trailWidth:v,strokeColor:f?S[1]:S,strokeLinecap:a,trailColor:r,prefixCls:t,gapDegree:y,gapPosition:$}),E=m<=20,N=l.createElement("div",{className:d,style:b},T,!E&&u);return E?l.createElement(Ae,{title:u},N):N},Ve="--progress-line-stroke-color",ga="--progress-percent",Rt=e=>{const t=e?"100%":"-100%";return new dt(`antProgress${e?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${t}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${t}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},Wr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},Yt(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize},[`${t}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:e.remainingColor,borderRadius:e.lineBorderRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.defaultColor}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",background:e.defaultColor,borderRadius:e.lineBorderRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${t}-text`]:{width:"max-content",marginInlineStart:0,marginTop:e.marginXXS}},[`${t}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${Ve})`]},height:"100%",width:`calc(1 / var(${ga}) * 100%)`,display:"block"},[`&${t}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${t}-text-inner`]:{color:e.colorWhite,[`&${t}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,color:e.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[r]:{fontSize:e.fontSize},[`&${t}-text-outer`]:{width:"max-content"},[`&${t}-text-outer${t}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:e.marginXS}},[`${t}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${pe(e.paddingXXS)}`,[`&${t}-text-start`]:{justifyContent:"start"},[`&${t}-text-end`]:{justifyContent:"end"}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.lineBorderRadius,opacity:0,animationName:Rt(),animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-rtl${t}-status-active`]:{[`${t}-bg::before`]:{animationName:Rt(!0)}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},qr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.remainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.circleTextColor,fontSize:e.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[r]:{fontSize:e.circleIconFontSize}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},Xr=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.remainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.defaultColor}}}}}},Vr=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${r}`]:{fontSize:e.fontSizeSM}}}},Gr=e=>({circleTextColor:e.colorText,defaultColor:e.colorInfo,remainingColor:e.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${e.fontSize/e.fontSizeSM}em`}),Kr=Gt("Progress",e=>{const t=e.calc(e.marginXXS).div(2).equal(),r=Kt(e,{progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[Wr(r),qr(r),Xr(r),Vr(r)]},Gr);var Yr=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};const Qr=e=>{let t=[];return Object.keys(e).forEach(r=>{const a=parseFloat(r.replace(/%/g,""));Number.isNaN(a)||t.push({key:a,value:e[r]})}),t=t.sort((r,a)=>r.key-a.key),t.map(({key:r,value:a})=>`${a} ${r}%`).join(", ")},Jr=(e,t)=>{const{from:r=ct.blue,to:a=ct.blue,direction:s=t==="rtl"?"to left":"to right"}=e,n=Yr(e,["from","to","direction"]);if(Object.keys(n).length!==0){const i=Qr(n),u=`linear-gradient(${s}, ${i})`;return{background:u,[Ve]:u}}const o=`linear-gradient(${s}, ${r}, ${a})`;return{background:o,[Ve]:o}},Zr=e=>{const{prefixCls:t,direction:r,percent:a,size:s,strokeWidth:n,strokeColor:o,strokeLinecap:i="round",children:u,trailColor:p=null,percentPosition:c,success:f}=e,{align:m,type:g}=c,v=o&&typeof o!="string"?Jr(o,r):{[Ve]:o,background:o},b=i==="square"||i==="butt"?0:void 0,y=s??[-1,n||(s==="small"?6:8)],[w,$]=Ye(y,"line",{strokeWidth:n}),x={backgroundColor:p||void 0,borderRadius:b},S=Object.assign(Object.assign({width:`${Se(a)}%`,height:$,borderRadius:b},v),{[ga]:Se(a)/100}),d=Xe(e),T={width:`${Se(d)}%`,height:$,borderRadius:b,backgroundColor:f==null?void 0:f.strokeColor},E={width:w<0?"100%":w},N=l.createElement("div",{className:`${t}-inner`,style:x},l.createElement("div",{className:re(`${t}-bg`,`${t}-bg-${g}`),style:S},g==="inner"&&u),d!==void 0&&l.createElement("div",{className:`${t}-success-bg`,style:T})),R=g==="outer"&&m==="start",A=g==="outer"&&m==="end";return g==="outer"&&m==="center"?l.createElement("div",{className:`${t}-layout-bottom`},N,u):l.createElement("div",{className:`${t}-outer`,style:E},R&&u,N,A&&u)},en=e=>{const{size:t,steps:r,rounding:a=Math.round,percent:s=0,strokeWidth:n=8,strokeColor:o,trailColor:i=null,prefixCls:u,children:p}=e,c=a(r*(s/100)),m=t??[t==="small"?2:14,n],[g,v]=Ye(m,"step",{steps:r,strokeWidth:n}),b=g/r,y=Array.from({length:r});for(let w=0;w<r;w++){const $=Array.isArray(o)?o[w]:o;y[w]=l.createElement("div",{key:w,className:re(`${u}-steps-item`,{[`${u}-steps-item-active`]:w<=c-1}),style:{backgroundColor:w<=c-1?$:i,width:b,height:v}})}return l.createElement("div",{className:`${u}-steps-outer`},y,p)};var tn=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};const an=["normal","exception","active","success"],rn=l.forwardRef((e,t)=>{const{prefixCls:r,className:a,rootClassName:s,steps:n,strokeColor:o,percent:i=0,size:u="default",showInfo:p=!0,type:c="line",status:f,format:m,style:g,percentPosition:v={}}=e,b=tn(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:y="end",type:w="outer"}=v,$=Array.isArray(o)?o[0]:o,x=typeof o=="string"||Array.isArray(o)?o:void 0,S=l.useMemo(()=>{if($){const D=typeof $=="string"?$:Object.values($)[0];return new La(D).isLight()}return!1},[o]),d=l.useMemo(()=>{var D,Y;const Q=Xe(e);return parseInt(Q!==void 0?(D=Q??0)===null||D===void 0?void 0:D.toString():(Y=i??0)===null||Y===void 0?void 0:Y.toString(),10)},[i,e.success,e.successPercent]),T=l.useMemo(()=>!an.includes(f)&&d>=100?"success":f||"normal",[f,d]),{getPrefixCls:E,direction:N,progress:R}=l.useContext(Ge),A=E("progress",r),[Z,K,V]=Kr(A),G=c==="line",ee=G&&!n,k=l.useMemo(()=>{if(!p)return null;const D=Xe(e);let Y;const Q=m||(P=>`${P}%`),oe=G&&S&&w==="inner";return w==="inner"||m||T!=="exception"&&T!=="success"?Y=Q(Se(i),Se(D)):T==="exception"?Y=G?l.createElement(Na,null):l.createElement(Oa,null):T==="success"&&(Y=G?l.createElement(Fa,null):l.createElement(Ma,null)),l.createElement("span",{className:re(`${A}-text`,{[`${A}-text-bright`]:oe,[`${A}-text-${y}`]:ee,[`${A}-text-${w}`]:ee}),title:typeof Y=="string"?Y:void 0},Y)},[p,i,d,T,c,A,m]);let I;c==="line"?I=n?l.createElement(en,Object.assign({},e,{strokeColor:x,prefixCls:A,steps:typeof n=="object"?n.count:n}),k):l.createElement(Zr,Object.assign({},e,{strokeColor:$,prefixCls:A,direction:N,percentPosition:{align:y,type:w}}),k):(c==="circle"||c==="dashboard")&&(I=l.createElement(Hr,Object.assign({},e,{strokeColor:$,prefixCls:A,progressStatus:T}),k));const j=re(A,`${A}-status-${T}`,{[`${A}-${c==="dashboard"&&"circle"||c}`]:c!=="line",[`${A}-inline-circle`]:c==="circle"&&Ye(u,"circle")[0]<=20,[`${A}-line`]:ee,[`${A}-line-align-${y}`]:ee,[`${A}-line-position-${w}`]:ee,[`${A}-steps`]:n,[`${A}-show-info`]:p,[`${A}-${u}`]:typeof u=="string",[`${A}-rtl`]:N==="rtl"},R==null?void 0:R.className,a,s,K,V);return Z(l.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},R==null?void 0:R.style),g),className:j,role:"progressbar","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100},Qt(b,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),I))});var nn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},sn=function(t,r){return l.createElement(Ue,ye({},t,{ref:r,icon:nn}))},on=l.forwardRef(sn);const rt=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),a=e.name||"",s=e.type||"",n=s.replace(/\/.*$/,"");return r.some(function(o){var i=o.trim();if(/^\*(\/\*)?$/.test(o))return!0;if(i.charAt(0)==="."){var u=a.toLowerCase(),p=i.toLowerCase(),c=[p];return(p===".jpg"||p===".jpeg")&&(c=[".jpg",".jpeg"]),c.some(function(f){return u.endsWith(f)})}return/\/\*$/.test(i)?n===i.replace(/\/.*$/,""):s===i?!0:/^\w+$/.test(i)?(Ra(!1,"Upload takes an invalidate 'accept' type '".concat(i,"'.Skip for check.")),!0):!1})}return!0};function ln(e,t){var r="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),a=new Error(r);return a.status=t.status,a.method=e.method,a.url=e.action,a}function _t(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function cn(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(n){n.total>0&&(n.percent=n.loaded/n.total*100),e.onProgress(n)});var r=new FormData;e.data&&Object.keys(e.data).forEach(function(s){var n=e.data[s];if(Array.isArray(n)){n.forEach(function(o){r.append("".concat(s,"[]"),o)});return}r.append(s,n)}),e.file instanceof Blob?r.append(e.filename,e.file,e.file.name):r.append(e.filename,e.file),t.onerror=function(n){e.onError(n)},t.onload=function(){return t.status<200||t.status>=300?e.onError(ln(e,t),_t(t)):e.onSuccess(_t(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var a=e.headers||{};return a["X-Requested-With"]!==null&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(a).forEach(function(s){a[s]!==null&&t.setRequestHeader(s,a[s])}),t.send(r),{abort:function(){t.abort()}}}var dn=function(){var e=we(le().mark(function t(r,a){var s,n,o,i,u,p,c,f;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:p=function(){return p=we(le().mark(function b(y){return le().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",new Promise(function(x){y.file(function(S){a(S)?(y.fullPath&&!S.webkitRelativePath&&(Object.defineProperties(S,{webkitRelativePath:{writable:!0}}),S.webkitRelativePath=y.fullPath.replace(/^\//,""),Object.defineProperties(S,{webkitRelativePath:{writable:!1}})),x(S)):x(null)})}));case 1:case"end":return $.stop()}},b)})),p.apply(this,arguments)},u=function(b){return p.apply(this,arguments)},i=function(){return i=we(le().mark(function b(y){var w,$,x,S,d;return le().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:w=y.createReader(),$=[];case 2:return E.next=5,new Promise(function(N){w.readEntries(N,function(){return N([])})});case 5:if(x=E.sent,S=x.length,S){E.next=9;break}return E.abrupt("break",12);case 9:for(d=0;d<S;d++)$.push(x[d]);E.next=2;break;case 12:return E.abrupt("return",$);case 13:case"end":return E.stop()}},b)})),i.apply(this,arguments)},o=function(b){return i.apply(this,arguments)},s=[],n=[],r.forEach(function(v){return n.push(v.webkitGetAsEntry())}),c=function(){var v=we(le().mark(function b(y,w){var $,x;return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(y){d.next=2;break}return d.abrupt("return");case 2:if(y.path=w||"",!y.isFile){d.next=10;break}return d.next=6,u(y);case 6:$=d.sent,$&&s.push($),d.next=15;break;case 10:if(!y.isDirectory){d.next=15;break}return d.next=13,o(y);case 13:x=d.sent,n.push.apply(n,fe(x));case 15:case"end":return d.stop()}},b)}));return function(y,w){return v.apply(this,arguments)}}(),f=0;case 9:if(!(f<n.length)){g.next=15;break}return g.next=12,c(n[f]);case 12:f++,g.next=9;break;case 15:return g.abrupt("return",s);case 16:case"end":return g.stop()}},t)}));return function(r,a){return e.apply(this,arguments)}}(),un=+new Date,pn=0;function nt(){return"rc-upload-".concat(un,"-").concat(++pn)}var hn=["component","prefixCls","className","classNames","disabled","id","name","style","styles","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"],mn=function(e){Jt(r,e);var t=Zt(r);function r(){var a;ea(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=t.call.apply(t,[this].concat(n)),J(ie(a),"state",{uid:nt()}),J(ie(a),"reqs",{}),J(ie(a),"fileInput",void 0),J(ie(a),"_isMounted",void 0),J(ie(a),"onChange",function(i){var u=a.props,p=u.accept,c=u.directory,f=i.target.files,m=fe(f).filter(function(g){return!c||rt(g,p)});a.uploadFiles(m),a.reset()}),J(ie(a),"onClick",function(i){var u=a.fileInput;if(u){var p=i.target,c=a.props.onClick;if(p&&p.tagName==="BUTTON"){var f=u.parentNode;f.focus(),p.blur()}u.click(),c&&c(i)}}),J(ie(a),"onKeyDown",function(i){i.key==="Enter"&&a.onClick(i)}),J(ie(a),"onDataTransferFiles",function(){var i=we(le().mark(function u(p,c){var f,m,g,v,b,y,w;return le().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(f=a.props,m=f.multiple,g=f.accept,v=f.directory,b=fe(p.items||[]),y=fe(p.files||[]),(y.length>0||b.some(function(S){return S.kind==="file"}))&&(c==null||c()),!v){x.next=11;break}return x.next=7,dn(Array.prototype.slice.call(b),function(S){return rt(S,a.props.accept)});case 7:y=x.sent,a.uploadFiles(y),x.next=14;break;case 11:w=fe(y).filter(function(S){return rt(S,g)}),m===!1&&(w=y.slice(0,1)),a.uploadFiles(w);case 14:case"end":return x.stop()}},u)}));return function(u,p){return i.apply(this,arguments)}}()),J(ie(a),"onFilePaste",function(){var i=we(le().mark(function u(p){var c,f;return le().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(c=a.props.pastable,c){g.next=3;break}return g.abrupt("return");case 3:if(p.type!=="paste"){g.next=6;break}return f=p.clipboardData,g.abrupt("return",a.onDataTransferFiles(f,function(){p.preventDefault()}));case 6:case"end":return g.stop()}},u)}));return function(u){return i.apply(this,arguments)}}()),J(ie(a),"onFileDragOver",function(i){i.preventDefault()}),J(ie(a),"onFileDrop",function(){var i=we(le().mark(function u(p){var c;return le().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(p.preventDefault(),p.type!=="drop"){m.next=4;break}return c=p.dataTransfer,m.abrupt("return",a.onDataTransferFiles(c));case 4:case"end":return m.stop()}},u)}));return function(u){return i.apply(this,arguments)}}()),J(ie(a),"uploadFiles",function(i){var u=fe(i),p=u.map(function(c){return c.uid=nt(),a.processFile(c,u)});Promise.all(p).then(function(c){var f=a.props.onBatchStart;f==null||f(c.map(function(m){var g=m.origin,v=m.parsedFile;return{file:g,parsedFile:v}})),c.filter(function(m){return m.parsedFile!==null}).forEach(function(m){a.post(m)})})}),J(ie(a),"processFile",function(){var i=we(le().mark(function u(p,c){var f,m,g,v,b,y,w,$,x;return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(f=a.props.beforeUpload,m=p,!f){d.next=14;break}return d.prev=3,d.next=6,f(p,c);case 6:m=d.sent,d.next=12;break;case 9:d.prev=9,d.t0=d.catch(3),m=!1;case 12:if(m!==!1){d.next=14;break}return d.abrupt("return",{origin:p,parsedFile:null,action:null,data:null});case 14:if(g=a.props.action,typeof g!="function"){d.next=21;break}return d.next=18,g(p);case 18:v=d.sent,d.next=22;break;case 21:v=g;case 22:if(b=a.props.data,typeof b!="function"){d.next=29;break}return d.next=26,b(p);case 26:y=d.sent,d.next=30;break;case 29:y=b;case 30:return w=(Ie(m)==="object"||typeof m=="string")&&m?m:p,w instanceof File?$=w:$=new File([w],p.name,{type:p.type}),x=$,x.uid=p.uid,d.abrupt("return",{origin:p,data:y,parsedFile:x,action:v});case 35:case"end":return d.stop()}},u,null,[[3,9]])}));return function(u,p){return i.apply(this,arguments)}}()),J(ie(a),"saveFileInput",function(i){a.fileInput=i}),a}return ta(r,[{key:"componentDidMount",value:function(){this._isMounted=!0;var s=this.props.pastable;s&&document.addEventListener("paste",this.onFilePaste)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort(),document.removeEventListener("paste",this.onFilePaste)}},{key:"componentDidUpdate",value:function(s){var n=this.props.pastable;n&&!s.pastable?document.addEventListener("paste",this.onFilePaste):!n&&s.pastable&&document.removeEventListener("paste",this.onFilePaste)}},{key:"post",value:function(s){var n=this,o=s.data,i=s.origin,u=s.action,p=s.parsedFile;if(this._isMounted){var c=this.props,f=c.onStart,m=c.customRequest,g=c.name,v=c.headers,b=c.withCredentials,y=c.method,w=i.uid,$=m||cn,x={action:u,filename:g,data:o,file:p,headers:v,withCredentials:b,method:y||"post",onProgress:function(d){var T=n.props.onProgress;T==null||T(d,p)},onSuccess:function(d,T){var E=n.props.onSuccess;E==null||E(d,p,T),delete n.reqs[w]},onError:function(d,T){var E=n.props.onError;E==null||E(d,T,p),delete n.reqs[w]}};f(i),this.reqs[w]=$(x)}}},{key:"reset",value:function(){this.setState({uid:nt()})}},{key:"abort",value:function(s){var n=this.reqs;if(s){var o=s.uid?s.uid:s;n[o]&&n[o].abort&&n[o].abort(),delete n[o]}else Object.keys(n).forEach(function(i){n[i]&&n[i].abort&&n[i].abort(),delete n[i]})}},{key:"render",value:function(){var s=this.props,n=s.component,o=s.prefixCls,i=s.className,u=s.classNames,p=u===void 0?{}:u,c=s.disabled,f=s.id,m=s.name,g=s.style,v=s.styles,b=v===void 0?{}:v,y=s.multiple,w=s.accept,$=s.capture,x=s.children,S=s.directory,d=s.openFileDialogOnClick,T=s.onMouseEnter,E=s.onMouseLeave,N=s.hasControlInside,R=Vt(s,hn),A=re(J(J(J({},o,!0),"".concat(o,"-disabled"),c),i,i)),Z=S?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},K=c?{}:{onClick:d?this.onClick:function(){},onKeyDown:d?this.onKeyDown:function(){},onMouseEnter:T,onMouseLeave:E,onDrop:this.onFileDrop,onDragOver:this.onFileDragOver,tabIndex:N?void 0:"0"};return ut.createElement(n,ye({},K,{className:A,role:N?void 0:"button",style:g}),ut.createElement("input",ye({},_a(R,{aria:!0,data:!0}),{id:f,name:m,disabled:c,type:"file",ref:this.saveFileInput,onClick:function(G){return G.stopPropagation()},key:this.state.uid,style:lt({display:"none"},b.input),className:p.input,accept:w},Z,{multiple:y,onChange:this.onChange},$!=null?{capture:$}:{})),x)}}]),r}(l.Component);function st(){}var ht=function(e){Jt(r,e);var t=Zt(r);function r(){var a;ea(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return a=t.call.apply(t,[this].concat(n)),J(ie(a),"uploader",void 0),J(ie(a),"saveUploader",function(i){a.uploader=i}),a}return ta(r,[{key:"abort",value:function(s){this.uploader.abort(s)}},{key:"render",value:function(){return ut.createElement(mn,ye({},this.props,{ref:this.saveUploader}))}}]),r}(l.Component);J(ht,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:st,onError:st,onSuccess:st,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});const gn=e=>{const{componentCls:t,iconCls:r}=e;return{[`${t}-wrapper`]:{[`${t}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:`${pe(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[t]:{padding:e.padding},[`${t}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:e.borderRadiusLG,"&:focus-visible":{outline:`${pe(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`}},[`${t}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${t}-disabled):hover,
          &-hover:not(${t}-disabled)
        `]:{borderColor:e.colorPrimaryHover},[`p${t}-drag-icon`]:{marginBottom:e.margin,[r]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},[`p${t}-text`]:{margin:`0 0 ${pe(e.marginXXS)}`,color:e.colorTextHeading,fontSize:e.fontSizeLG},[`p${t}-hint`]:{color:e.colorTextDescription,fontSize:e.fontSize},[`&${t}-disabled`]:{[`p${t}-drag-icon ${r},
            p${t}-text,
            p${t}-hint
          `]:{color:e.colorTextDisabled}}}}}},fn=e=>{const{componentCls:t,iconCls:r,fontSize:a,lineHeight:s,calc:n}=e,o=`${t}-list-item`,i=`${o}-actions`,u=`${o}-action`;return{[`${t}-wrapper`]:{[`${t}-list`]:Object.assign(Object.assign({},aa()),{lineHeight:e.lineHeight,[o]:{position:"relative",height:n(e.lineHeight).mul(a).equal(),marginTop:e.marginXS,fontSize:a,display:"flex",alignItems:"center",transition:`background-color ${e.motionDurationSlow}`,borderRadius:e.borderRadiusSM,"&:hover":{backgroundColor:e.controlItemBgHover},[`${o}-name`]:Object.assign(Object.assign({},ra),{padding:`0 ${pe(e.paddingXS)}`,lineHeight:s,flex:"auto",transition:`all ${e.motionDurationSlow}`}),[i]:{whiteSpace:"nowrap",[u]:{opacity:0},[r]:{color:e.actionsColor,transition:`all ${e.motionDurationSlow}`},[`
              ${u}:focus-visible,
              &.picture ${u}
            `]:{opacity:1}},[`${t}-icon ${r}`]:{color:e.colorIcon,fontSize:a},[`${o}-progress`]:{position:"absolute",bottom:e.calc(e.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:n(a).add(e.paddingXS).equal(),fontSize:a,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${o}:hover ${u}`]:{opacity:1},[`${o}-error`]:{color:e.colorError,[`${o}-name, ${t}-icon ${r}`]:{color:e.colorError},[i]:{[`${r}, ${r}:hover`]:{color:e.colorError},[u]:{opacity:1}}},[`${t}-list-item-container`]:{transition:`opacity ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},bn=e=>{const{componentCls:t}=e,r=new dt("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),a=new dt("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),s=`${t}-animate-inline`;return[{[`${t}-wrapper`]:{[`${s}-appear, ${s}-enter, ${s}-leave`]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},[`${s}-appear, ${s}-enter`]:{animationName:r},[`${s}-leave`]:{animationName:a}}},{[`${t}-wrapper`]:Ua(e)},r,a]},vn=e=>{const{componentCls:t,iconCls:r,uploadThumbnailSize:a,uploadProgressOffset:s,calc:n}=e,o=`${t}-list`,i=`${o}-item`;return{[`${t}-wrapper`]:{[`
        ${o}${o}-picture,
        ${o}${o}-picture-card,
        ${o}${o}-picture-circle
      `]:{[i]:{position:"relative",height:n(a).add(n(e.lineWidth).mul(2)).add(n(e.paddingXS).mul(2)).equal(),padding:e.paddingXS,border:`${pe(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},[`${i}-thumbnail`]:Object.assign(Object.assign({},ra),{width:a,height:a,lineHeight:pe(n(a).add(e.paddingSM).equal()),textAlign:"center",flex:"none",[r]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${i}-progress`]:{bottom:s,width:`calc(100% - ${pe(n(e.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:n(a).add(e.paddingXS).equal()}},[`${i}-error`]:{borderColor:e.colorError,[`${i}-thumbnail ${r}`]:{[`svg path[fill='${$t[0]}']`]:{fill:e.colorErrorBg},[`svg path[fill='${$t.primary}']`]:{fill:e.colorError}}},[`${i}-uploading`]:{borderStyle:"dashed",[`${i}-name`]:{marginBottom:s}}},[`${o}${o}-picture-circle ${i}`]:{[`&, &::before, ${i}-thumbnail`]:{borderRadius:"50%"}}}}},yn=e=>{const{componentCls:t,iconCls:r,fontSizeLG:a,colorTextLightSolid:s,calc:n}=e,o=`${t}-list`,i=`${o}-item`,u=e.uploadPicCardSize;return{[`
      ${t}-wrapper${t}-picture-card-wrapper,
      ${t}-wrapper${t}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},aa()),{display:"block",[`${t}${t}-select`]:{width:u,height:u,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:`${pe(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[`> ${t}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${t}-disabled):hover`]:{borderColor:e.colorPrimary}},[`${o}${o}-picture-card, ${o}${o}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:e.marginXS,marginInlineEnd:e.marginXS}},"@supports (gap: 1px)":{gap:e.marginXS},[`${o}-item-container`]:{display:"inline-block",width:u,height:u,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[i]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${pe(n(e.paddingXS).mul(2).equal())})`,height:`calc(100% - ${pe(n(e.paddingXS).mul(2).equal())})`,backgroundColor:e.colorBgMask,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'" "'}},[`${i}:hover`]:{[`&::before, ${i}-actions`]:{opacity:1}},[`${i}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${e.motionDurationSlow}`,[`
            ${r}-eye,
            ${r}-download,
            ${r}-delete
          `]:{zIndex:10,width:a,margin:`0 ${pe(e.marginXXS)}`,fontSize:a,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,color:s,"&:hover":{color:s},svg:{verticalAlign:"baseline"}}},[`${i}-thumbnail, ${i}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${i}-name`]:{display:"none",textAlign:"center"},[`${i}-file + ${i}-name`]:{position:"absolute",bottom:e.margin,display:"block",width:`calc(100% - ${pe(n(e.paddingXS).mul(2).equal())})`},[`${i}-uploading`]:{[`&${i}`]:{backgroundColor:e.colorFillAlter},[`&::before, ${r}-eye, ${r}-download, ${r}-delete`]:{display:"none"}},[`${i}-progress`]:{bottom:e.marginXL,width:`calc(100% - ${pe(n(e.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${t}-wrapper${t}-picture-circle-wrapper`]:{[`${t}${t}-select`]:{borderRadius:"50%"}}}},Cn=e=>{const{componentCls:t}=e;return{[`${t}-rtl`]:{direction:"rtl"}}},wn=e=>{const{componentCls:t,colorTextDisabled:r}=e;return{[`${t}-wrapper`]:Object.assign(Object.assign({},Yt(e)),{[t]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${t}-select`]:{display:"inline-block"},[`${t}-hidden`]:{display:"none"},[`${t}-disabled`]:{color:r,cursor:"not-allowed"}})}},Sn=e=>({actionsColor:e.colorIcon}),$n=Gt("Upload",e=>{const{fontSizeHeading3:t,fontHeight:r,lineWidth:a,controlHeightLG:s,calc:n}=e,o=Kt(e,{uploadThumbnailSize:n(t).mul(2).equal(),uploadProgressOffset:n(n(r).div(2)).add(a).equal(),uploadPicCardSize:n(s).mul(2.55).equal()});return[wn(o),gn(o),vn(o),yn(o),fn(o),bn(o),Cn(o),vr(o)]},Sn);var kn={icon:function(t,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:r}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:t}}]}},name:"file",theme:"twotone"},An=function(t,r){return l.createElement(Ue,ye({},t,{ref:r,icon:kn}))},xn=l.forwardRef(An),Tn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},En=function(t,r){return l.createElement(Ue,ye({},t,{ref:r,icon:Tn}))},In=l.forwardRef(En),Pn={icon:function(t,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:t}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:r}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:r}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:r}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:t}}]}},name:"picture",theme:"twotone"},jn=function(t,r){return l.createElement(Ue,ye({},t,{ref:r,icon:Pn}))},Dn=l.forwardRef(jn);function ze(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function He(e,t){const r=fe(t),a=r.findIndex(({uid:s})=>s===e.uid);return a===-1?r.push(e):r[a]=e,r}function ot(e,t){const r=e.uid!==void 0?"uid":"name";return t.filter(a=>a[r]===e[r])[0]}function Ln(e,t){const r=e.uid!==void 0?"uid":"name",a=t.filter(s=>s[r]!==e[r]);return a.length===t.length?null:a}const Nn=(e="")=>{const t=e.split("/"),a=t[t.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(a)||[""])[0]},fa=e=>e.indexOf("image/")===0,On=e=>{if(e.type&&!e.thumbUrl)return fa(e.type);const t=e.thumbUrl||e.url||"",r=Nn(t);return/^data:image\//.test(t)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(r)?!0:!(/^data:/.test(t)||r)},Ce=200;function Fn(e){return new Promise(t=>{if(!e.type||!fa(e.type)){t("");return}const r=document.createElement("canvas");r.width=Ce,r.height=Ce,r.style.cssText=`position: fixed; left: 0; top: 0; width: ${Ce}px; height: ${Ce}px; z-index: 9999; display: none;`,document.body.appendChild(r);const a=r.getContext("2d"),s=new Image;if(s.onload=()=>{const{width:n,height:o}=s;let i=Ce,u=Ce,p=0,c=0;n>o?(u=o*(Ce/n),c=-(u-i)/2):(i=n*(Ce/o),p=-(i-u)/2),a.drawImage(s,p,c,i,u);const f=r.toDataURL();document.body.removeChild(r),window.URL.revokeObjectURL(s.src),t(f)},s.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){const n=new FileReader;n.onload=()=>{n.result&&typeof n.result=="string"&&(s.src=n.result)},n.readAsDataURL(e)}else if(e.type.startsWith("image/gif")){const n=new FileReader;n.onload=()=>{n.result&&t(n.result)},n.readAsDataURL(e)}else s.src=window.URL.createObjectURL(e)})}var Mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Rn=function(t,r){return l.createElement(Ue,ye({},t,{ref:r,icon:Mn}))},_n=l.forwardRef(Rn);const Un=l.forwardRef(({prefixCls:e,className:t,style:r,locale:a,listType:s,file:n,items:o,progress:i,iconRender:u,actionIconRender:p,itemRender:c,isImgUrl:f,showPreviewIcon:m,showRemoveIcon:g,showDownloadIcon:v,previewIcon:b,removeIcon:y,downloadIcon:w,extra:$,onPreview:x,onDownload:S,onClose:d},T)=>{var E,N;const{status:R}=n,[A,Z]=l.useState(R);l.useEffect(()=>{R!=="removed"&&Z(R)},[R]);const[K,V]=l.useState(!1);l.useEffect(()=>{const H=setTimeout(()=>{V(!0)},300);return()=>{clearTimeout(H)}},[]);const G=u(n);let ee=l.createElement("div",{className:`${e}-icon`},G);if(s==="picture"||s==="picture-card"||s==="picture-circle")if(A==="uploading"||!n.thumbUrl&&!n.url){const H=re(`${e}-list-item-thumbnail`,{[`${e}-list-item-file`]:A!=="uploading"});ee=l.createElement("div",{className:H},G)}else{const H=f!=null&&f(n)?l.createElement("img",{src:n.thumbUrl||n.url,alt:n.name,className:`${e}-list-item-image`,crossOrigin:n.crossOrigin}):G,te=re(`${e}-list-item-thumbnail`,{[`${e}-list-item-file`]:f&&!f(n)});ee=l.createElement("a",{className:te,onClick:xe=>x(n,xe),href:n.url||n.thumbUrl,target:"_blank",rel:"noopener noreferrer"},H)}const k=re(`${e}-list-item`,`${e}-list-item-${A}`),I=typeof n.linkProps=="string"?JSON.parse(n.linkProps):n.linkProps,j=(typeof g=="function"?g(n):g)?p((typeof y=="function"?y(n):y)||l.createElement(on,null),()=>d(n),e,a.removeFile,!0):null,D=(typeof v=="function"?v(n):v)&&A==="done"?p((typeof w=="function"?w(n):w)||l.createElement(_n,null),()=>S(n),e,a.downloadFile):null,Y=s!=="picture-card"&&s!=="picture-circle"&&l.createElement("span",{key:"download-delete",className:re(`${e}-list-item-actions`,{picture:s==="picture"})},D,j),Q=typeof $=="function"?$(n):$,oe=Q&&l.createElement("span",{className:`${e}-list-item-extra`},Q),P=re(`${e}-list-item-name`),_=n.url?l.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:P,title:n.name},I,{href:n.url,onClick:H=>x(n,H)}),n.name,oe):l.createElement("span",{key:"view",className:P,onClick:H=>x(n,H),title:n.name},n.name,oe),q=(typeof m=="function"?m(n):m)&&(n.url||n.thumbUrl)?l.createElement("a",{href:n.url||n.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:H=>x(n,H),title:a.previewFile},typeof b=="function"?b(n):b||l.createElement(Cr,null)):null,ne=(s==="picture-card"||s==="picture-circle")&&A!=="uploading"&&l.createElement("span",{className:`${e}-list-item-actions`},q,A==="done"&&D,j),{getPrefixCls:L}=l.useContext(Ge),M=L(),z=l.createElement("div",{className:k},ee,_,Y,ne,K&&l.createElement(na,{motionName:`${M}-fade`,visible:A==="uploading",motionDeadline:2e3},({className:H})=>{const te="percent"in n?l.createElement(rn,Object.assign({type:"line",percent:n.percent,"aria-label":n["aria-label"],"aria-labelledby":n["aria-labelledby"]},i)):null;return l.createElement("div",{className:re(`${e}-list-item-progress`,H)},te)})),ce=n.response&&typeof n.response=="string"?n.response:((E=n.error)===null||E===void 0?void 0:E.statusText)||((N=n.error)===null||N===void 0?void 0:N.message)||a.uploadError,me=A==="error"?l.createElement(Ae,{title:ce,getPopupContainer:H=>H.parentNode},z):z;return l.createElement("div",{className:re(`${e}-list-item-container`,t),style:r,ref:T},c?c(me,n,o,{download:S.bind(null,n),preview:x.bind(null,n),remove:d.bind(null,n)}):me)}),Bn=(e,t)=>{const{listType:r="text",previewFile:a=Fn,onPreview:s,onDownload:n,onRemove:o,locale:i,iconRender:u,isImageUrl:p=On,prefixCls:c,items:f=[],showPreviewIcon:m=!0,showRemoveIcon:g=!0,showDownloadIcon:v=!1,removeIcon:b,previewIcon:y,downloadIcon:w,extra:$,progress:x={size:[-1,2],showInfo:!1},appendAction:S,appendActionVisible:d=!0,itemRender:T,disabled:E}=e,N=yr(),[R,A]=l.useState(!1),Z=["picture-card","picture-circle"].includes(r);l.useEffect(()=>{r.startsWith("picture")&&(f||[]).forEach(P=>{!(P.originFileObj instanceof File||P.originFileObj instanceof Blob)||P.thumbUrl!==void 0||(P.thumbUrl="",a==null||a(P.originFileObj).then(_=>{P.thumbUrl=_||"",N()}))})},[r,f,a]),l.useEffect(()=>{A(!0)},[]);const K=(P,_)=>{if(s)return _==null||_.preventDefault(),s(P)},V=P=>{typeof n=="function"?n(P):P.url&&window.open(P.url)},G=P=>{o==null||o(P)},ee=P=>{if(u)return u(P,r);const _=P.status==="uploading";if(r.startsWith("picture")){const q=r==="picture"?l.createElement(At,null):i.uploading,ne=p!=null&&p(P)?l.createElement(Dn,null):l.createElement(xn,null);return _?q:ne}return _?l.createElement(At,null):l.createElement(In,null)},k=(P,_,q,ne,L)=>{const M={type:"text",size:"small",title:ne,onClick:z=>{var ce,me;_(),l.isValidElement(P)&&((me=(ce=P.props).onClick)===null||me===void 0||me.call(ce,z))},className:`${q}-list-item-action`,disabled:L?E:!1};return l.isValidElement(P)?l.createElement(se,Object.assign({},M,{icon:kt(P,Object.assign(Object.assign({},P.props),{onClick:()=>{}}))})):l.createElement(se,Object.assign({},M),l.createElement("span",null,P))};l.useImperativeHandle(t,()=>({handlePreview:K,handleDownload:V}));const{getPrefixCls:I}=l.useContext(Ge),j=I("upload",c),D=I(),Y=re(`${j}-list`,`${j}-list-${r}`),Q=l.useMemo(()=>Qt(Ba(D),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[D]),oe=Object.assign(Object.assign({},Z?{}:Q),{motionDeadline:2e3,motionName:`${j}-${Z?"animate-inline":"animate"}`,keys:fe(f.map(P=>({key:P.uid,file:P}))),motionAppear:R});return l.createElement("div",{className:Y},l.createElement(za,Object.assign({},oe,{component:!1}),({key:P,file:_,className:q,style:ne})=>l.createElement(Un,{key:P,locale:i,prefixCls:j,className:q,style:ne,file:_,items:f,progress:x,listType:r,isImgUrl:p,showPreviewIcon:m,showRemoveIcon:g,showDownloadIcon:v,removeIcon:b,previewIcon:y,downloadIcon:w,extra:$,iconRender:ee,actionIconRender:k,itemRender:T,onPreview:K,onDownload:V,onClose:G})),S&&l.createElement(na,Object.assign({},oe,{visible:d,forceRender:!0}),({className:P,style:_})=>kt(S,q=>({className:re(q.className,P),style:Object.assign(Object.assign(Object.assign({},_),{pointerEvents:P?"none":void 0}),q.style)}))))},zn=l.forwardRef(Bn);var Hn=function(e,t,r,a){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function i(c){try{p(a.next(c))}catch(f){o(f)}}function u(c){try{p(a.throw(c))}catch(f){o(f)}}function p(c){c.done?n(c.value):s(c.value).then(i,u)}p((a=a.apply(e,[])).next())})};const Re=`__LIST_IGNORE_${Date.now()}__`,Wn=(e,t)=>{const r=Ha("upload"),{fileList:a,defaultFileList:s,onRemove:n,showUploadList:o=!0,listType:i="text",onPreview:u,onDownload:p,onChange:c,onDrop:f,previewFile:m,disabled:g,locale:v,iconRender:b,isImageUrl:y,progress:w,prefixCls:$,className:x,type:S="select",children:d,style:T,itemRender:E,maxCount:N,data:R={},multiple:A=!1,hasControlInside:Z=!0,action:K="",accept:V="",supportServerRender:G=!0,rootClassName:ee}=e,k=l.useContext(Wa),I=g??k,j=e.customRequest||r.customRequest,[D,Y]=qa(s||[],{value:a,postState:O=>O??[]}),[Q,oe]=l.useState("drop"),P=l.useRef(null),_=l.useRef(null);l.useMemo(()=>{const O=Date.now();(a||[]).forEach((U,X)=>{!U.uid&&!Object.isFrozen(U)&&(U.uid=`__AUTO__${O}_${X}__`)})},[a]);const q=(O,U,X)=>{let F=fe(U),W=!1;N===1?F=F.slice(-1):N&&(W=F.length>N,F=F.slice(0,N)),xt.flushSync(()=>{Y(F)});const de={file:O,fileList:F};X&&(de.event=X),(!W||O.status==="removed"||F.some($e=>$e.uid===O.uid))&&xt.flushSync(()=>{c==null||c(de)})},ne=(O,U)=>Hn(void 0,void 0,void 0,function*(){const{beforeUpload:X,transformFile:F}=e;let W=O;if(X){const de=yield X(O,U);if(de===!1)return!1;if(delete O[Re],de===Re)return Object.defineProperty(O,Re,{value:!0,configurable:!0}),!1;typeof de=="object"&&de&&(W=de)}return F&&(W=yield F(W)),W}),L=O=>{const U=O.filter(W=>!W.file[Re]);if(!U.length)return;const X=U.map(W=>ze(W.file));let F=fe(D);X.forEach(W=>{F=He(W,F)}),X.forEach((W,de)=>{let $e=W;if(U[de].parsedFile)W.status="uploading";else{const{originFileObj:Ee}=W;let ke;try{ke=new File([Ee],Ee.name,{type:Ee.type})}catch{ke=new Blob([Ee],{type:Ee.type}),ke.name=Ee.name,ke.lastModifiedDate=new Date,ke.lastModified=new Date().getTime()}ke.uid=W.uid,$e=ke}q($e,F)})},M=(O,U,X)=>{try{typeof O=="string"&&(O=JSON.parse(O))}catch{}if(!ot(U,D))return;const F=ze(U);F.status="done",F.percent=100,F.response=O,F.xhr=X;const W=He(F,D);q(F,W)},z=(O,U)=>{if(!ot(U,D))return;const X=ze(U);X.status="uploading",X.percent=O.percent;const F=He(X,D);q(X,F,O)},ce=(O,U,X)=>{if(!ot(X,D))return;const F=ze(X);F.error=O,F.response=U,F.status="error";const W=He(F,D);q(F,W)},me=O=>{let U;Promise.resolve(typeof n=="function"?n(O):n).then(X=>{var F;if(X===!1)return;const W=Ln(O,D);W&&(U=Object.assign(Object.assign({},O),{status:"removed"}),D==null||D.forEach(de=>{const $e=U.uid!==void 0?"uid":"name";de[$e]===U[$e]&&!Object.isFrozen(de)&&(de.status="removed")}),(F=P.current)===null||F===void 0||F.abort(U),q(U,W))})},H=O=>{oe(O.type),O.type==="drop"&&(f==null||f(O))};l.useImperativeHandle(t,()=>({onBatchStart:L,onSuccess:M,onProgress:z,onError:ce,fileList:D,upload:P.current,nativeElement:_.current}));const{getPrefixCls:te,direction:xe,upload:Te}=l.useContext(Ge),ae=te("upload",$),Le=Object.assign(Object.assign({onBatchStart:L,onError:ce,onProgress:z,onSuccess:M},e),{customRequest:j,data:R,multiple:A,action:K,accept:V,supportServerRender:G,prefixCls:ae,disabled:I,beforeUpload:ne,onChange:void 0,hasControlInside:Z});delete Le.className,delete Le.style,(!d||I)&&delete Le.id;const vt=`${ae}-wrapper`,[Je,yt,wa]=$n(ae,vt),[Sa]=Xa("Upload",Va.Upload),{showRemoveIcon:Ct,showPreviewIcon:$a,showDownloadIcon:ka,removeIcon:Aa,previewIcon:xa,downloadIcon:Ta,extra:Ea}=typeof o=="boolean"?{}:o,Ia=typeof Ct>"u"?!I:Ct,Ze=(O,U)=>o?l.createElement(zn,{prefixCls:ae,listType:i,items:D,previewFile:m,onPreview:u,onDownload:p,onRemove:me,showRemoveIcon:Ia,showPreviewIcon:$a,showDownloadIcon:ka,removeIcon:Aa,previewIcon:xa,downloadIcon:Ta,iconRender:b,extra:Ea,locale:Object.assign(Object.assign({},Sa),v),isImageUrl:y,progress:w,appendAction:O,appendActionVisible:U,itemRender:E,disabled:I}):O,et=re(vt,x,ee,yt,wa,Te==null?void 0:Te.className,{[`${ae}-rtl`]:xe==="rtl",[`${ae}-picture-card-wrapper`]:i==="picture-card",[`${ae}-picture-circle-wrapper`]:i==="picture-circle"}),wt=Object.assign(Object.assign({},Te==null?void 0:Te.style),T);if(S==="drag"){const O=re(yt,ae,`${ae}-drag`,{[`${ae}-drag-uploading`]:D.some(U=>U.status==="uploading"),[`${ae}-drag-hover`]:Q==="dragover",[`${ae}-disabled`]:I,[`${ae}-rtl`]:xe==="rtl"});return Je(l.createElement("span",{className:et,ref:_},l.createElement("div",{className:O,style:wt,onDrop:H,onDragOver:H,onDragLeave:H},l.createElement(ht,Object.assign({},Le,{ref:P,className:`${ae}-btn`}),l.createElement("div",{className:`${ae}-drag-container`},d))),Ze()))}const Pa=re(ae,`${ae}-select`,{[`${ae}-disabled`]:I,[`${ae}-hidden`]:!d}),St=l.createElement("div",{className:Pa,style:wt},l.createElement(ht,Object.assign({},Le,{ref:P})));return Je(i==="picture-card"||i==="picture-circle"?l.createElement("span",{className:et,ref:_},Ze(St,!!d)):l.createElement("span",{className:et,ref:_},St,Ze()))},ba=l.forwardRef(Wn);var qn=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};const Xn=l.forwardRef((e,t)=>{var{style:r,height:a,hasControlInside:s=!1}=e,n=qn(e,["style","height","hasControlInside"]);return l.createElement(ba,Object.assign({ref:t,hasControlInside:s},n,{type:"drag",style:Object.assign(Object.assign({},r),{height:a})}))}),Qe=ba;Qe.Dragger=Xn;Qe.LIST_IGNORE=Re;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const va=()=>({accounts:{accountIds:[],groupIds:[]},platforms:[],settings:{name:"Untitled Share now",post_interval_type:"hour",post_interval_value:1,repeat:!1,started_at:void 0},templates:{all:{content:"",isLinkCard:!1,link:"",media:[]},bluesky:{comment:"",content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},discord:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},facebook:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},googleBusinessProfile:{button:"none",content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},instagram:{comment:"",content:"",edit:!1,isAllImages:!0,media:[]},line:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},linkedin:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},pinterest:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},telegram:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},threads:{comment:"",content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[],topic:""},tiktok:{allowComment:!0,content:"",duet:!1,edit:!1,media:[],privacyLevel:"PUBLIC_TO_EVERYONE",stitch:!1},tumblr:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]},twitter:{content:"",edit:!1,isAllImages:!1,isLinkCard:!1,link:"",media:[]}}}),De=globalThis.jotaiAtomCache.get("/home/runner/work/bit-social/bit-social/frontend/src/common/globalStates/$shareNowData.ts/$shareNowData",Ga(va()));De.debugLabel="$shareNowData";const Vn=""+new URL("bit-social-ba-assets-734.svg",import.meta.url).href;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Gn(){const e=new Ka,{isPending:t,isSuccess:r,mutateAsync:a}=mt({mutationFn:async s=>Ke("share-now",{...s},void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["all-schedules"]}),e.invalidateQueries({queryKey:["get-calendar-schedules"]}),e.invalidateQueries({queryKey:["share-now"]})}});return{createShareNow:a,isCreateShareNowLoading:t,isShareNowSuccess:r}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ya(e,t){const{data:r,isFetching:a,isLoading:s,refetch:n}=Ya({enabled:!!t&&!!e,placeholderData:Qa,queryFn:async()=>Ke(`share-now/${e}/${t}`,void 0,void 0,"GET"),queryKey:["share-now",[e,t]],refetchInterval:5e3}),{current_page:o,current_total:i,data:u,pages:p,per_page:c,total:f}=(r==null?void 0:r.data)||{};return{currentPage:o,currentTotal:i,isFetchingShareNowList:a,isLoadingShareNowList:s,perPage:c,refetchShareNowList:n,shareNowData:u||[],totalPages:p,totalShareNow:f}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Kn(){const e=sa(),{isPending:t,mutateAsync:r}=mt({mutationFn:async a=>Ke(`share-now/${a.id}/update`,{...a},void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["share-now",[1,10]]})}});return{isUpdateShareNowLoading:t,updateShareNow:r}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ut=e=>{for(const t in e)if(e.hasOwnProperty(t)){const r=e[t];if(r.text||r.media.length)return!0}return!1};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ca({handleCheckBox:e,templateData:t,type:r}){return B(ve,{children:[r.includes("isLinkCard")&&h(Ae,{title:C("Enable to the link shared as a card"),children:h(jt,{checked:t.isLinkCard,onChange:a=>{e("isLinkCard",a.target.checked)},children:C("Link")})}),r.includes("isAllImages")&&h(Ae,{title:C("Enable to selected image shared"),children:h(jt,{checked:t.isAllImages,onChange:a=>{e("isAllImages",a.target.checked)},children:C("Media")})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Yn=3e3;function Qn(){var p,c,f;const[e,t]=_e(De),{isProClient:r}=gt(ft),a=["isLinkCard","isAllImages"],s=m=>{t(g=>ue(g,v=>{v.templates.facebook.content=m.target.value}))},n=(m,g)=>{t(v=>ue(v,b=>{b.templates.facebook.isLinkCard=!1,b.templates.facebook.isAllImages=!1,b.templates.facebook[m]=g}))},o=m=>{const{value:g}=m.target;t(v=>ue(v,b=>{b.templates.facebook.link=g}))},i=({fileList:m})=>{const g=ue(e,v=>{v.templates.facebook.media=m});t(g)},u=()=>{const m=["image/jpg","image/jpeg","image/png","image/webp"];if(typeof wp<"u"&&wp.media){const g=wp.media({button:{text:"Select Image"},library:{type:m},multiple:r?"add":!1,title:C("Media")}),v=e.templates.facebook.media.map(b=>b.uid);g.on("open",()=>{const b=g.state().get("selection");v.forEach(y=>{const w=wp.media.attachment(y);w.fetch().done(()=>{b.add(w)})})}),g.on("select",()=>{const b=g.state().get("selection").toJSON();let y=[];y=b.map(w=>pa(w)),y.at(-1),i({fileList:y})}),g.open()}};return h(ha,{children:B(he,{layout:"vertical",children:[h(he.Item,{htmlFor:"textBox",label:C("Post"),children:h(je.TextArea,{id:"textBox",maxLength:Yn,onChange:m=>s(m),placeholder:C("Write your custom post"),showCount:!0,style:{height:120,resize:"none"},value:e.templates.facebook.content})}),h(be,{className:"py-2",children:h(Ca,{handleCheckBox:n,templateData:e.templates.facebook,type:a})}),((p=e.templates.facebook)==null?void 0:p.isLinkCard)&&h(he.Item,{htmlFor:"link",label:C("Link"),children:h(je,{id:"link",onChange:m=>o(m),placeholder:C("https://example.com"),value:e.templates.facebook.link})}),!((c=e.templates.facebook)!=null&&c.isLinkCard)&&((f=e.templates.facebook)==null?void 0:f.isAllImages)&&h(Qe,{fileList:e.templates.facebook.media,listType:"picture-card",onChange:i,openFileDialogOnClick:!1,children:h(Ae,{placement:"right",title:C("Add Image"),children:h(se,{onClick:u,style:{height:"100%",width:"100%"},children:B(be,{direction:"vertical",children:[h(oa,{size:20}),C("Upload")]})})})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Jn=3e3;function Zn(){var p,c,f;const[e,t]=_e(De),{isProClient:r}=gt(ft),a=["isLinkCard","isAllImages"],s=m=>{t(g=>ue(g,v=>{v.templates.linkedin.content=m.target.value}))},n=(m,g)=>{t(v=>ue(v,b=>{b.templates.linkedin.isLinkCard=!1,b.templates.linkedin.isAllImages=!1,b.templates.linkedin[m]=g}))},o=m=>{const{value:g}=m.target;t(v=>ue(v,b=>{b.templates.linkedin.link=g}))},i=({fileList:m})=>{const g=ue(e,v=>{v.templates.linkedin.media=m});t(g)},u=()=>{const m=["image/jpg","image/jpeg","image/png","image/webp"];if(typeof wp<"u"&&wp.media){const g=wp.media({button:{text:"Select Image"},library:{type:m},multiple:r?"add":!1,title:C("Media")}),v=e.templates.linkedin.media.map(b=>b.uid);g.on("open",()=>{const b=g.state().get("selection");v.forEach(y=>{const w=wp.media.attachment(y);w.fetch().done(()=>{b.add(w)})})}),g.on("select",()=>{const b=g.state().get("selection").toJSON();let y=[];y=b.map(w=>pa(w)),y.at(-1),i({fileList:y})}),g.open()}};return h(ha,{children:B(he,{layout:"vertical",children:[h(he.Item,{htmlFor:"textBox",label:C("Post"),children:h(je.TextArea,{id:"textBox",maxLength:Jn,onChange:m=>s(m),placeholder:C("Write your custom post"),showCount:!0,style:{height:120,resize:"none"},value:e.templates.linkedin.content})}),h(be,{className:"py-2",children:h(Ca,{handleCheckBox:n,templateData:e.templates.linkedin,type:a})}),((p=e.templates.linkedin)==null?void 0:p.isLinkCard)&&h(he.Item,{htmlFor:"link",label:C("Link"),children:h(je,{id:"link",onChange:m=>o(m),placeholder:C("https://example.com"),value:e.templates.linkedin.link})}),!((c=e.templates.linkedin)!=null&&c.isLinkCard)&&((f=e.templates.linkedin)==null?void 0:f.isAllImages)&&h(Qe,{fileList:e.templates.linkedin.media,listType:"picture-card",onChange:i,openFileDialogOnClick:!1,children:h(Ae,{placement:"right",title:C("Add Image"),children:h(se,{onClick:u,style:{height:"100%",width:"100%"},children:B(be,{direction:"vertical",children:[h(oa,{size:20}),C("Upload")]})})})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function es({platform:e}){switch(e){case"facebook":return h(Qn,{});case"linkedin":return h(Zn,{})}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ts({platform:e}){return h(es,{platform:e})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const as=[{label:C("Monday"),value:"Mon"},{label:C("Tuesday"),value:"Tue"},{label:C("Wednesday"),value:"Wed"},{label:C("Thursday"),value:"Thu"},{label:C("Friday"),value:"Fri"},{label:C("Saturday"),value:"Sat"},{label:C("Sunday"),value:"Sun"}],{dateFormat:rs,timeFormat:ns,timeZone:Ne}=la(ca),ss=`${rs} ${ns}`,os=Za(ss),{Text:Bt}=Pe;var is={name:"z33n32",styles:"max-width:80px"},ls={name:"ypff5m",styles:"min-width:100px"};function cs({isScheduleModal:e,setScheduleModal:t,shareNowModalType:r}){var $,x;const[a,s]=_e(De),n=dr(),[o,i]=_e(gr),{isProClient:u}=gt(ft),p=ge(Fe(Ne)).format("YYYY-MM-DD HH:mm:ss"),c=(S,d)=>{s(T=>ue(T,E=>{E.settings={...E.settings,[S]:d}}))},f=()=>{var S;if((S=o==null?void 0:o.startedAt)!=null&&S.length){bt.error({message:o.startedAt,placement:"topRight"});return}t(!1)},m=S=>d=>{const T=ge(Fe(Ne)).format("YYYY-MM-DD"),E=ge(d).format("HH:mm:ss");if(!d){i(A=>({...A,startedAt:""})),c(S,"");return}const R=(u?d:ge(T+E)).format("YYYY-MM-DD HH:mm:ss");if(d&&ge(d).diff(Fe(Ne))<1){i(A=>({...A,startedAt:"Start date & time must be grater than local time"})),c(S,R);return}R&&(i(A=>({...A,startedAt:""})),c(S,R))},g=S=>d=>{c(S,d)},v=S=>{const{name:d,value:T}=S.target;c(d,T)},b=S=>(d,T)=>{if(d===null){s(E=>ue(E,N=>{delete N.settings.sleep_time}));return}c(S,T)},y=S=>{var d;S||((d=o==null?void 0:o.startedAt)!=null&&d.length&&i(T=>({...T,startedAt:""})),c("started_at",""))};return h(ia,{centered:!0,footer:[h(se,{onClick:()=>{var S;s(d=>ue(d,T=>{T.settings={...T.settings,post_interval_type:"hour",post_interval_value:1,repeat:!1,started_at:void 0},delete T.settings.sleep_time,delete T.settings.sleep_days})),(S=o==null?void 0:o.startedAt)!=null&&S.length&&i(d=>({...d,startedAt:""}))},children:C("Reset")},"reset"),h(se,{onClick:f,type:"primary",children:C("Continue")},"continue")],maskClosable:!1,okButtonProps:{style:{display:"none"}},onCancel:f,open:e,title:r==="edit"?C("Edit schedule"):C("Schedule"),width:580,children:B(he,{layout:"vertical",children:[h(he.Item,{label:C("Start date & time"),children:B(be,{direction:"vertical",children:[h(hr,{handleOnClear:y,onChangeDate:m,stateData:a,type:"SHARENOW"}),o.startedAt&&B(Bt,{type:"danger",children:[o.startedAt," "]}),h(Bt,{mark:!0,children:Ja(C("Local time: %s ; Time Zone: (%s)"),ge(p).format(os),Ne)})]})}),B(be,{className:"fw-sb pb-2",children:[h(Ae,{placement:"bottomLeft",title:C("Please, insert a valid start date & time first!"),children:h(wr,{defaultChecked:a.settings.repeat,disabled:!a.settings.started_at,onChange:S=>c("repeat",S),size:"small",value:a.settings.repeat})}),C("Repeat")]}),h(he.Item,{label:C("Post interval"),style:{margin:"10px 0"},children:B(be,{children:[h(je,{css:is,disabled:!a.settings.repeat,min:1,name:"post_interval_value",onChange:v,type:"number",value:a.settings.post_interval_value}),h(pt,{css:ls,disabled:!a.settings.repeat,onChange:g("post_interval_type"),options:n,value:a.settings.post_interval_type})]})}),a.id&&a.settings.started_at&&ge(a.settings.started_at).diff(Fe(Ne))<1&&h($r,{message:B(ve,{children:[C("If your start time has passed, updating the interval will set your next post to local time plus the new interval! For example, current time 06:00 PM, updated Post interval:2 hours. Next post will be at 08:00 PM."),h(Pe.Link,{href:"https://bit-social.com/docs/bit-social/instantly-share-posts-on-social-media-platforms/#if-you-update-your-post-interval",rel:"noopener noreferrer",target:"_blank",underline:!0,children:C("Visit our documentation")})]}),showIcon:!0,type:"info"}),h(he.Item,{label:C("Set a sleep timer"),children:h(mr.RangePicker,{disabled:!a.settings.repeat,format:"HH:mm",onChange:b("sleep_time"),value:($=a.settings.sleep_time)!=null&&$[0]&&((x=a.settings.sleep_time)!=null&&x[1])?[ge(a.settings.sleep_time[0],"HH:mm"),ge(a.settings.sleep_time[1],"HH:mm")]:void 0})}),h(he.Item,{label:C("Set sleep days"),children:h(pt,{allowClear:!0,disabled:!a.settings.repeat,mode:"multiple",onChange:g("sleep_days"),options:as,placeholder:C("Select sleep days"),value:a.settings.sleep_days})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const We=(e,t="success")=>{bt[t]({description:e,duration:3,message:"Share Now"})},zt=(e,t)=>{const r=e[t];return!(!e.media.length&&!(r!=null&&r.length))},Ht=3;function ds({shareNowModalClose:e,shareNowModalType:t}){var q,ne;const[r,a]=l.useState(!1),[s,n]=l.useState(),[o,i]=l.useState({}),[u,p]=l.useState(),[c,f]=_e(De),{createShareNow:m,isCreateShareNowLoading:g}=Gn(),{isUpdateShareNowLoading:v,updateShareNow:b}=Kn(),{accounts:y}=lr(),{groups:w}=cr(),[$,x]=kr.useMessage(),[S]=da({}),d=Number(S.get("page"))||1,T=Number(S.get("limit"))||10,{refetchShareNowList:E}=ya(d,T),N=!!Object.keys(o).length||!1,R=()=>{a(!0)},A=l.useMemo(()=>[],[w,(q=c.accounts)==null?void 0:q.groupIds]),Z=l.useMemo(()=>[...c.accounts.accountIds,...A],[c.accounts.accountIds,A]),K=l.useMemo(()=>fr(y,Z),[y,Z]),V=l.useMemo(()=>K.map(L=>({children:h(ts,{platform:L}),key:L,label:h("span",{title:L,children:h(ir,{name:L,size:32})})})),[y,Z]),G=L=>f(M=>ue(M,z=>{z.accounts={accountIds:L.accountIds,groupIds:L==null?void 0:L.groupIds}})),ee=(L,M)=>{const z=[],{platforms:ce}=L,me=ce.length===1;if(L.platforms.length>1&&ce.map(H=>{const{requirement:te}=M[H];if(!zt(L.templates[H],te==null?void 0:te.type))return z.push(!0),$.open({content:te==null?void 0:te.message,type:"error"})}),me){const H=ce[0],{requirement:te}=M[H];zt(L.templates[H],te==null?void 0:te.type)||(z.push(!0),$.open({content:te==null?void 0:te.message,type:"error"}))}return z.length&&!0||!1},k=L=>{const{name:M}=L.settings;return M===""?($.open({content:"Title empty",type:"error"}),!0):(o&&Ut(o),!!(Pt&&ee(L,Pt)))},I=async()=>{if(p("PUBLISH"),k(c)){p(void 0);return}if(Ut(o),t==="edit"){const{data:M,status:z}=await b(c);We(M,z)}else{const{data:M,status:z}=await m(c);E(),We(M,z)}e()},j=L=>{f({...c}),n(L)},D=L=>{const{value:M}=L.target;f(z=>ue(z,ce=>{ce.settings={...ce.settings,name:M}}))},Y=async()=>{if(p("DRAFT"),k(c)){p(void 0);return}if(t==="edit"){const{data:M,status:z}=await b({...c,isDraft:!0});E(),We(M,z)}else{const{data:M,status:z}=await m({...c,isDraft:!0});E(),We(M,z)}e()},Q=()=>Object.keys(o).map(L=>{const{text:M}=o[L];return B("div",{children:[" ",B("p",{children:[h("b",{children:L}),": ",M]})]},L)}),oe=()=>h("div",{children:Q()});l.useEffect(()=>()=>{i({})},[]),l.useEffect(()=>{f(L=>ue(L,M=>{M.platforms=K})),n(K[0])},[K]);const P=()=>{var L;return t==="edit"&&c.status===Ht?"Update & Publish":t==="edit"?"Update":(L=c.settings.started_at)!=null&&L.length?"Create":"Publish Now"},_=()=>t==="edit"&&c.status===Ht?"Update draft":"Draft";return B(ve,{children:[x,B(ma,{gutter:20,children:[B(qe,{span:7,children:[B(Lt,{className:"mb-1",justify:"space-between",children:[B(Pe.Title,{level:5,children:[" ",C("Accounts")," "]}),y.length?h(It,{}):""]}),y!=null&&y.length&&c.accounts?h(ur,{selectedAccount:c.accounts,setSelectedAccount:G}):B(ve,{children:[h(pr,{iconSize:40,textLevel:5}),h("div",{style:{textAlign:"center"},children:h(It,{})})]})]}),h(qe,{span:17,children:h("div",{style:{minHeight:"100%"},children:V&&V.length?B(ve,{children:[h("div",{children:h(he,{layout:"vertical",children:h(he.Item,{htmlFor:"name",label:C("Title"),children:h(je,{id:"name",onChange:D,placeholder:C("Untitled Share Now"),value:(ne=c.settings)==null?void 0:ne.name})})})}),h(br,{activeKey:s,items:V,onChange:j,size:"small",tabBarGutter:2}),B(Lt,{align:"center",className:"mt-3",gap:8,justify:"end",children:[Object.keys(o).length?h(Ar,{content:oe(),defaultOpen:!0,title:C("Something went wrong!"),trigger:"click",children:h(se,{danger:!0,icon:h(er,{}),type:"primary"})}):"",h("div",{className:"pr-2",children:h(ua,{type:"message"})}),h(se,{disabled:N||u==="PUBLISH",loading:u==="DRAFT"&&(g||v),onClick:Y,type:"dashed",children:_()}),h(se,{disabled:N,onClick:R,children:t==="edit"?C("Edit Schedule"):C("Setup Schedule")}),h(se,{disabled:N||u==="DRAFT",loading:u==="PUBLISH"&&(g||v),onClick:()=>I(),type:"primary",children:P()})]})]}):h("img",{alt:"account select",className:"w-100",src:Vn})})})]}),r&&h(cs,{isScheduleModal:r,setScheduleModal:a,shareNowModalType:t})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function us(e,t){const r=sa(),{isPending:a,mutateAsync:s}=mt({mutationFn:async n=>Ke("share-now/destroy/batch",{shareNowIds:n},void 0,"POST"),onSuccess:()=>{r.invalidateQueries({queryKey:["share-now",[t,e]]})}});return{deleteShareNow:n=>s(n),isShareNowDeleting:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ps=({token:e})=>({background:e.colorSuccessBg,border:`1px solid ${e.colorSuccessBorder}`,borderRadius:"10px",color:e.colorSuccessText,minWidth:"90px"}),hs=({token:e})=>({background:e.colorWarningBg,border:`1px solid ${e.colorWarningBorder}`,borderRadius:"10px",color:e.colorWarningText,minWidth:"90px"}),it=0,Oe=1,Wt=2,ms=3,qt=4;function gs({setShareNowModal:e}){const[t,r]=da({}),a=Number(t.get("page"))||1,s=Number(t.get("limit"))||10,{timeZone:n}=la(ca),{isFetchingShareNowList:o,isLoadingShareNowList:i,refetchShareNowList:u,shareNowData:p,totalPages:c,totalShareNow:f}=ya(a,s),[m,g]=l.useState([]),{updateScheduleStatus:v}=xr(),{deleteShareNow:b,isShareNowDeleting:y}=us(s,a),w=tr(De),[$,x]=bt.useNotification(),S=(k,I="success")=>{$[I]({description:k,message:"Share Now"})},d=p.map(k=>({created_at:Tt(k.created_at,`${Be.DATE_FORMAT} ${Be.TIME_FORMAT}`),details:k,interval:k.config,key:k.id,nextPost:k.next_published_at&&k.status===1&&ge(k.next_published_at).diff(Fe(n))>1?k.human_readable_next_publish:"-",start:k!=null&&k.config.settings.started_at?Tt(k==null?void 0:k.config.settings.started_at,`${Be.DATE_FORMAT} ${Be.TIME_FORMAT}`):"-",status:k.status,title:k.name})),T=async(k,I)=>{const{data:j,status:D}=await v({id:k,status:I});S(j,D),u()},E=()=>{w(va()),e({open:!0,type:"create"})},N=async k=>{await b([k]),u()},R=k=>{const I=p.find(j=>j.id===k);I&&(w(j=>({...j,accounts:I.config.accounts,id:k,settings:I.config.settings,status:I.status,templates:I.config.templates})),e({open:!0,type:"edit"}))},A=k=>{const I=p.find(j=>j.id===k);I&&(w(j=>ue(j,D=>{D.accounts=I.config.accounts,D.settings.name=`Re post: ${I.name}`,D.settings.started_at=void 0,D.status=I.status,D.templates=I.config.templates})),e({open:!0,type:"create"}))},Z=[{dataIndex:"title",key:"title",title:C("Title"),width:"20%"},{dataIndex:"created_at",key:"created_at",title:C("Created At")},{dataIndex:"start",key:"start",title:C("Start Scheduled Post")},{dataIndex:"interval",key:"interval",render:(k,{interval:I})=>h(Pe.Text,{children:I.settings.repeat?`${I.settings.post_interval_value} ${I.settings.post_interval_type}`:"-"}),title:C("Interval ")},{dataIndex:"nextPost",key:"nextPost",title:C("Next Post ")},{dataIndex:"status",key:"status",render:(k,{key:I,status:j})=>{switch(j){case Oe:case it:return h(pt,{css:j===Oe?ps:hs,onChange:D=>T(I,Number(D)),options:[{disabled:j===Oe,label:C("Active"),value:Oe},{disabled:j===it,label:C("Paused"),value:it}],size:"small",value:j===Oe?"Active":"Paused",variant:"borderless"});case Wt:return h(tt,{color:"grey",children:C("Completed")});case ms:return h(tt,{color:"purple",children:C("Draft")});case qt:return h(tt,{color:"red",children:C("Missed")})}},title:C("Status")},{dataIndex:"action",key:"action",render:(k,{key:I,status:j})=>B(be,{direction:"horizontal",children:[h(Dt,{description:C("Are you sure you want to delete this schedule?"),okButtonProps:{danger:!0,loading:y},okText:C("Yes, Delete"),onConfirm:()=>N(I),placement:"right",title:C("Delete?"),children:h(se,{danger:!0,icon:h(ar,{}),type:"text"})}),j===Wt||j===qt?h(se,{icon:h(rr,{}),onClick:()=>A(I),title:C("Re-post"),type:"text"}):h(se,{icon:h(nr,{}),onClick:()=>R(I),title:C("Edit"),type:"text"})]}),title:C("Action ")}],K=(k,I)=>{r(j=>(j.set("page",String(k)),j.set("limit",String(I)),j))},V={onSelect:(k,I)=>{if(k){if(I){g(j=>[...j,k.key]);return}g(j=>j.filter(D=>D!==k.key))}},onSelectAll:(k,I)=>{if(k){g(I.map(j=>j==null?void 0:j.key).filter(j=>j!==void 0));return}g([])}},G=m.length>0,ee=async()=>{await b(m),g([]),u()};return l.useEffect(()=>{!p.length&&c&&a>c&&r(k=>(k.set("page",String(c)),k))},[p]),B(ve,{children:[x,B(ma,{className:"mb-2",justify:"space-between",children:[h(qe,{children:h(be,{children:G?B(ve,{children:[h(Pe.Text,{children:`Selected ${m.length} items`}),h(Dt,{description:C("Are you sure to delete this logs?"),okText:C("Confirm"),onConfirm:ee,placement:"right",title:C("Delete Logs"),children:h(se,{danger:!0,icon:h(Er,{}),type:"text"})})]}):void 0})}),h(qe,{children:d!=null&&d.length?B(be,{children:[B(Pe.Link,{href:"https://bit-social.com/docs/instantly-share-posts-on-social-media-platforms/",rel:"noopener noreferrer",strong:!0,style:{fontSize:"18px"},target:"_blank",children:[C("How to share a post instantly"),h(sr,{style:{transform:"translateY(-2px)"}})]}),h(se,{disabled:i||o,icon:h(Ir,{spin:i||o}),onClick:()=>u(),size:"large",children:C("Refresh")}),h(se,{icon:h(Et,{}),onClick:E,size:"large",type:"primary",children:C("Share Post")})]}):void 0})]}),d!=null&&d.length?B(ve,{children:[h(ua,{}),h(Pr,{bordered:!0,className:"mt-1",columns:Z,dataSource:d,pagination:{current:a,defaultCurrent:1,onChange:K,pageSize:s,showSizeChanger:!0,total:f},rowSelection:V})]}):void 0,!i&&!(d!=null&&d.length)?h(Sr,{description:C("No Share Post found!"),children:h(se,{icon:h(Et,{}),onClick:E,size:"large",type:"primary",children:C("Share Post")})}):void 0,i&&h(or,{}),!i&&!(d!=null&&d.length)?h(Tr,{fontSize:"1.6rem",section:"shareNow",style:{marginTop:"30px",textAlign:"justify"}}):void 0]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Xt={open:!1,type:void 0};function io(){const[e,t]=l.useState(Xt),r=()=>{t(Xt)};return B(ve,{children:[h(gs,{setShareNowModal:t}),e.open?h(ia,{centered:!0,footer:!1,maskClosable:!1,onCancel:r,open:e.open,styles:{body:{height:"calc(100vh - 140px)",marginInline:-24,overflow:"auto",padding:0}},title:e.type==="edit"?C("Edit Share Now"):C("Share Now"),width:"70%",children:h("div",{style:{paddingInline:24},children:h(ds,{shareNowModalClose:r,shareNowModalType:e.type})})}):""]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{io as default};
