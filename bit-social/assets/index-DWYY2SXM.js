import{r as k,j as a,a as n,_ as s,L as A,u as L,b as _,c as O,d as q,F as f,i as U}from"./main-plenty-doors-read.js";import{P as S,p as F,i as P}from"./PlatformIcon-nT1RWFgS.js";import{u as W}from"./useDebounce-DWVHBZjD.js";import{u as E,C as H,a as R,i as J}from"./groupHelper-DRF28X9S.js";import{t as x,A as X,f as Z,F as ee,S as $,h as te,P as V,B as w,T as j,i as ae,j as T,k as G,l as ce,m as oe,n as se,o as M,r as v,I as K,M as re,s as ie,p as ne}from"./antd-Dkhz2BjJ.js";import{u as B,b as he}from"./router-BDBqwsZt.js";import{a as I,b as N}from"./react-query-B4O-PG_a.js";import"./css-in-js-D9KZUreV.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function le(){const e=I(),{isPending:t,mutateAsync:c}=N({mutationFn:async o=>k(`account/${o}/destroy`,void 0,void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}});return{deleteAccount:c,deleteAccountLoading:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ue(){const e=I(),{isPending:t,mutateAsync:c}=N({mutationFn:async o=>k(`account/${o.id}/update-status`,{status:o.status},void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}});return{updateAccountStatus:o=>c(o),updateAccountStatusLoading:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function de({avatarLink:e,platform:t,size:c=18}){const{token:o}=x.useToken();return a(Z,{count:a(S,{name:t,size:c,style:{border:"2px solid",borderColor:o.colorBorder}}),offset:[-2,28],size:"small",children:a(X,{src:e})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ge({accountType:e,id:t,image:c,name:o,platform:l,status:h}){const{deleteAccount:u,deleteAccountLoading:r}=le(),{updateAccountStatus:g,updateAccountStatusLoading:p}=ue(),{token:m}=x.useToken(),d=1,i=0;return n(ae,{size:"small",style:{borderColor:m.colorBorder},children:[n(ee,{className:"w-100",justify:"space-between",children:[a(de,{avatarLink:c,platform:l}),n($,{children:[a(V,{description:h?s("It will no longer be able to automatic posting, scheduling, and sharing"):s("Enable Automatic Posting, Scheduling, and Sharing"),okButtonProps:{danger:!!h,loading:p},okText:h?s("Disable"):s("Enable"),onConfirm:()=>g({id:t,status:h===d?i:d}),placement:"top",title:`Do you want to ${h===d?s("disable"):s("enable")} the account?`,children:a(te,{checked:!!h,size:"small"})}),a(V,{description:s("This account also be deleted from related schedule!"),okButtonProps:{danger:!0,loading:r},okText:s("Yes, delete"),onConfirm:()=>u(t),placement:"top",title:s("Are you sure?"),children:a(w,{danger:!0,icon:a(A,{name:"trash-2"}),type:"text"})})]})]}),a(j.Paragraph,{ellipsis:!0,style:{marginBottom:"0px",marginTop:"8px"},children:o}),e&&a(j.Text,{ellipsis:!0,type:"secondary",children:e})]})}const pe="_accountLoaderSection_1360f_1 grid",me="_accountLoader_1360f_1",z={accountLoaderSection:pe,accountLoader:me};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function be({accountQuantity:e}){const t=Array.from({length:e}).fill(0);return a("div",{className:z.accountLoaderSection,children:t.map((c,o)=>a("div",{className:`${z.accountLoader} loader`},`loader-${o*2}`))})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function fe({searchAccountsTxt:e}){const[t]=B({}),c=t.get("value")||"",l={type:t.get("type")||"",value:c},{accounts:h,isLoadingAccounts:u}=E({searchAccountsTxt:e,selectedMenuTab:l});return u?a(be,{accountQuantity:4}):n(G,{gutter:[16,16],children:[a(T,{md:8,sm:12,xl:6,xs:24,children:a(H,{btnType:"custom"})}),h.map(r=>a(T,{md:8,sm:12,xl:6,xs:24,children:a(ge,{accountType:r.details.account_type,id:r.id,image:r.details.icon,name:r.details.account_name,platform:r.platform,status:r.status},r.id)},r.id))]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ce(e){return Object.keys(e)}function Ae({setSearchAccounts:e}){const{isDarkTheme:t,isProClient:c}=L(_),{token:o}=x.useToken(),[l,h]=B({}),u=O(q),r=l.get("value")||"all",g=[{key:"all",label:n(f,{children:[a(S,{size:30}),a(j.Text,{className:"pl-2",children:s("All")})]})}],p=Ce(F).map(i=>({key:i,label:n(f,{children:[a(S,{name:i,size:30})," ",a(j.Text,{className:"px-2",children:F[i].name}),P(i)&&!c?a(A,{color:"#ff8609",name:"crown",size:18}):void 0]})})),m=[...g,...p];return a(f,{children:a(ce,{className:"rounded-md",items:m,mode:"inline",onClick:({key:i})=>{if(P(i)&&!c){u(!0);return}h(C=>(C.set("type","platform"),C.set("value",i),C)),e("")},selectedKeys:[r],style:{backgroundColor:o.colorBgContainer,border:"none",paddingInline:"6px"},theme:t?"dark":"light"})})}const Te="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2027.7.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20199%20155'%20style='enable-background:new%200%200%20199%20155;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%23565B84;}%20%3c/style%3e%3cpath%20class='st0'%20d='M33.2,30.4C45.9,43.4,48.8,64,64.8,74c7.9,5,18.2,2.6,26.9,4c9.6,1.5,16.9,6.9,24.1,13.1%20c14.4,12.5,21.3,31.6,35.8,44c10.2,8.7,22.2,0.5,31.4-5.4c1.9-1.2,6.7-3.3,7.1,0.7c0.4,3.5-6.5,6.5-8.9,8c-11,7.1-22.9,9.4-33.7,0.7%20c-17.4-14.1-24.7-38-43.9-50.3C88.8,79.4,70.2,87.2,56.3,75C43.5,63.8,41,44.2,27.9,33.8c-1.9,2.6-6.1,10-9.5,10.2%20c-3.5,0.2-4.7-5.1-5.2-7.6c-1.4-5.9-4.8-22.2,1.3-26.7c5.5-4.1,20.5,2,25.7,4.9c2.3,1.3,6.3,3.4,6,6.6%20C45.7,25.9,36.8,28.4,33.2,30.4z'/%3e%3c/svg%3e";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ye(){return n(f,{children:[a("img",{alt:"Arrow",src:Te,style:{marginLeft:"24%"},width:150}),a(oe,{description:n(f,{children:[a("div",{className:"mb-3",dangerouslySetInnerHTML:{__html:s('To connect your social media accounts, click <b>"Connect Account"</b>  There are two methods available:')}}),n("div",{className:"mb-3",children:[n("b",{children:[s("Connect"),":"]}),s("It will automatically connect your social account without any credentials")]}),n("div",{className:"mb-3",children:[n("b",{children:[s("Custom App"),":"]}),s("It will show you a form to input app credentials to create your own app and connect your social account.")]}),n("a",{href:"https://bit-social.com/docs/accounts/",rel:"nofollow noopener noreferrer",target:"_blank",children:[s("You can find more about it here"),a(A,{name:"move-up-right",style:{transform:"translateY(-2px)"}})]})]}),style:{border:"4px solid #565b84",fontSize:"1.3rem",marginLeft:"10%",marginTop:-25,width:800}})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function we({accounts:e,isLoadingAccounts:t,searchAccounts:c,searchAccountsTxt:o,setSearchAccounts:l}){return n(G,{gutter:20,children:[a(T,{span:6,children:a(Ae,{setSearchAccounts:l})}),n(T,{span:18,children:[t&&a(se,{active:!0}),a(fe,{searchAccountsTxt:o}),!t&&!c&&!(e!=null&&e.length)?a(ye,{}):void 0]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function je(){const e=I(),{isPending:t,isSuccess:c,mutateAsync:o}=N({mutationFn:async l=>k("pro_groups",{name:l},void 0,"POST"),mutationKey:["create_group"],onSuccess:()=>{e.invalidateQueries({queryKey:["groups"]})}});return{createGroup:o,isGroupCreated:c,isLoadingCreateGroup:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function xe(){const{token:e}=x.useToken(),{isDarkTheme:t}=L(_),[c]=M.useForm(),{groups:o}=R(),{createGroup:l,isLoadingCreateGroup:h}=je(),[u,r]=v.useState(!1),g=()=>{c.resetFields(),r(!1)},p=async()=>{c.submit()},m=async({name:d})=>{const i=await l(d);(i==null?void 0:i.code)==="SUCCESS"&&(c.resetFields(),ie.success({message:"Group create successfully!"}),r(!1))};return n(f,{children:[a(w,{className:"mb-2",icon:a(A,{name:"plus",size:22}),onClick:()=>r(!0),style:{border:`2px solid ${e.colorPrimary}`,color:t?e.colorTextBase:e.colorPrimary,fontWeight:500},type:"text",children:s("Create Group")}),a(re,{footer:[a(w,{onClick:g,children:s("Cancel")},"back"),a(w,{loading:h,onClick:p,type:"primary",children:s("Create")},"submit")],onCancel:g,open:u,children:a(M,{form:c,layout:"vertical",onFinish:m,children:a(M.Item,{label:s("Name"),name:"name",rules:[{message:"Please enter group name",required:!0},{validator:(d,i)=>{if(i.length)return J(i.trim(),o)?Promise.reject(new Error(i+" name already exist")):Promise.resolve()}}],children:a(K,{name:"name",placeholder:s("New group"),required:!0})})})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Me(){return U()}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ne(){const{isProClient:e}=L(_),t=O(q),[c,o]=B({}),l=he(),h=c.get("value")||"",u=c.get("type")||"",[r,g]=v.useState(u||"platform"),p=["platform","group"];(h!==""&&P(h)&&!e||h.length&&!p.includes(u)||!e&&u==="group")&&l("/accounts");const m={type:u,value:h},[d,i]=v.useState(""),C=W(d,400),{accounts:D,isLoadingAccounts:Q}=E({searchAccountsTxt:C,selectedMenuTab:m}),Y=y=>{i(y.target.value),o(b=>(b.delete("type"),b.delete("value"),b))};return n("div",{children:[n(G,{gutter:20,children:[a(T,{span:6,children:a(ne,{block:!0,onChange:y=>{if(!e&&y==="group"){t(!0);return}g(y),o(b=>(b.set("type",y),b.set("value","all"),b))},options:[{label:s("Accounts"),value:"platform"},{label:e?"Groups":n(f,{children:[s("Groups")," ",a(A,{color:"#ff8609",name:"crown",size:18})]}),value:"group"}],value:r})}),a(T,{children:r==="platform"?a($,{style:{marginBottom:10},children:a(K,{allowClear:!0,onChange:Y,placeholder:s("Search accounts"),prefix:a(A,{name:"search"}),value:d})}):a(xe,{})})]}),r==="platform"?a(we,{accounts:D,isLoadingAccounts:Q,searchAccounts:d,searchAccountsTxt:C,setSearchAccounts:i}):a(Me,{})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{Ne as default};
