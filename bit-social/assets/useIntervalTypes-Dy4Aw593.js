import{a as f,j as n,_ as K,r as V,F as I,c as O,u as P,d as H,b as $,L as Q}from"./main-some-women-speak.js";import{P as w,p as M}from"./PlatformIcon-DUhbVgxv.js";import{S as R,T as y,F as D,A as W,k as Y,r as i,Q as N,v as J}from"./antd-Dkhz2BjJ.js";import{u as U}from"./react-query-B4O-PG_a.js";import{b as X,a as Z}from"./groupHelper-LXyWAMdx.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};function ge({iconSize:t=50,textLevel:e=3}){return f(D,{align:"center",className:"py-3",gap:20,justify:"center",style:{height:"140px"},vertical:!0,children:[f(R,{children:[n(w,{name:"facebook",size:t}),n(w,{name:"twitter",size:t}),n(w,{name:"pinterest",size:t}),n(w,{name:"googleBusinessProfile",size:t})]}),n(y.Title,{level:e,children:K("Connect your social account first!")})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};function _(){const{data:t,isLoading:e,refetch:a}=U({queryFn:async()=>V("active-accounts",void 0,void 0,"GET"),queryKey:["active-accounts"]});return{activeAccounts:(t==null?void 0:t.data)||[],isLoadingActiveAccounts:e,refetchActiveAccounts:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const{Text:ee}=y;function B({img:t,name:e}){return n(Y,{justify:"space-between",children:f(D,{align:"center",gap:6,justify:"center",children:[n(W,{shape:"square",src:t}),n(ee,{ellipsis:!0,title:e,children:e})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const F=(t,e,a,c,r)=>a?c.filter(u=>u.platform===a&&u.details.account_name.toLowerCase().includes(t)):e==="groups"?r:c.filter(u=>u.platform===a),q=t=>[...new Set(t.map(e=>e.platform))],S=(t,e)=>{const a=t?t.map(r=>`account-${r}`):[],c=e?e.map(r=>`group-${r}`):[];return[...a,...c]},te=(t,e,a)=>e.filter(c=>t.includes(c.id)).map(c=>({checkable:!1,key:`account-${a}-${c.id}`,title:n(B,{img:c.details.icon,name:c.details.account_name})})),ae=(t,e,a,c)=>{let r=[];const o=[{children:q(a).map(s=>{var d,m;return r.push(s),{children:F(t,e,s,a,c).map(h=>{const g=`account-${h.id}`;return{disabled:e!=="all"&&e!==s,key:g,style:e!=="all"&&e!==s?{display:" none"}:{},title:"details"in h&&n(B,{img:h.details.icon,name:h.details.account_name})}}),key:s,style:e!==s&&e!=="all"?{display:" none"}:{},title:n(y.Text,{ellipsis:!0,title:(d=M[s])==null?void 0:d.name,children:(m=M[s])==null?void 0:m.name})}}),key:"all",title:"Select All"}];return e==="all"&&r.push(e,"groups"),e!=="all"&&e!=="groups"&&(r=["all",e]),{accountExpandKeys:r,accountTreeData:o}},se=(t,e,a,c)=>{const r=[],u=[{children:F(t,"groups","",a,c).map(o=>{const s=`group-${o.id}`,d="accounts"in o?X(o):[];return d.length&&r.push(s),{children:te(d,a,s),key:s,style:{overflow:"hidden"},title:"name"in o&&n(y.Text,{ellipsis:!0,title:o.name,children:o.name})}}),key:"groups",style:e==="all"||e==="groups"?{}:{display:" none"},title:"Groups"}];return{groupExpandKeys:r,groupTreeData:u}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};var ce={name:"16bnd5q",styles:"min-height:100%;overflow:hidden"};function ne({accountType:t,isLoading:e,selectedAccount:a,setSelectedAccount:c}){const[r,u]=i.useState(),[o,s]=i.useState(a),{groups:d}=Z(),{activeAccounts:m}=_(),h=d.map(p=>{const E=p.accounts.map(b=>Number(b.id));return{...p,accountIds:E}}),g=i.useMemo(()=>S(o==null?void 0:o.accountIds,o==null?void 0:o.groupIds),[o]),{groupExpandKeys:T,groupTreeData:v}=i.useMemo(()=>se("",t,m,h),[t,m,d]),x=p=>{const k=Array.isArray(p)?p:p.checked,b=[...new Set(h.filter(l=>k.includes(`group-${l.id}`)).map(l=>Number(l.id)))];s(l=>{const j={...l,groupIds:b};return c(j),j})},C=p=>{u(p)};return i.useEffect(()=>{s(a)},[a]),i.useEffect(()=>{u(T)},[T]),n("div",{css:ce,children:["all","groups"].includes(t)&&f(I,{children:[n(y.Title,{className:"bg-slate-200 p-2 dark:bg-slate-800",level:4,children:K("Groups")}),n(N,{autoExpandParent:!0,blockNode:!0,checkable:!0,checkedKeys:g,className:"pr-3",defaultExpandAll:!0,disabled:e,expandedKeys:r,onCheck:x,onExpand:C,selectable:!1,treeData:v},v.length)]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};var oe={name:"16bnd5q",styles:"min-height:100%;overflow:hidden"},re={name:"1xjypij",styles:"margin:4px 0;width:100%"};function me({isLoading:t,selectedAccount:e,setSelectedAccount:a}){const[c,r]=i.useState("all"),[u,o]=i.useState(),[s,d]=i.useState(e),m=O(H),{isProClient:h}=P($),{activeAccounts:g}=_(),T=i.useMemo(()=>S(s==null?void 0:s.accountIds,s==null?void 0:s.groupIds),[s]),v=i.useMemo(()=>q(g).map(l=>({label:M[l].name,value:l})),[g]),{accountExpandKeys:x,accountTreeData:C}=i.useMemo(()=>ae("",c,g,[]),[c,g]),p=[{label:"All",value:"all"},{disabled:!h,label:h?"Groups":f(I,{children:[K("Groups")," ",n(Q,{color:"#ff8609",name:"crown",size:18})]}),value:"groups"},...v],k=l=>{if(!h&&l==="groups"){m(!0);return}r(l)},E=l=>{const j=Array.isArray(l)?l:l.checked,z=g.filter(A=>j.includes(`account-${A.id}`)).map(A=>A.id),L=[...new Set(z)];d(A=>{const G={...A,accountIds:L};return a(G),G})},b=l=>{o(l)};return i.useEffect(()=>{d(e)},[e]),i.useEffect(()=>{o(x)},[x]),f("div",{css:oe,children:[n(J,{css:re,defaultValue:c,onChange:k,options:p}),c!=="groups"&&f(I,{children:[n(y.Title,{className:"bg-slate-200 p-2 dark:bg-slate-800",level:4,children:K("Accounts")}),n(N,{autoExpandParent:!0,blockNode:!0,checkable:!0,checkedKeys:T,className:"pr-3",defaultExpandAll:!0,disabled:t,expandedKeys:u,onCheck:E,onExpand:b,selectable:!1,treeData:C},C.length)]}),h&&n(ne,{accountType:c,isLoading:t,selectedAccount:e,setSelectedAccount:a})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};function fe(){const{isProClient:t}=P($),e=[{label:"Minute",value:"minute"},{label:"Hour",value:"hour"}],a=[{label:"Minute",value:"minute"},{label:"Hour",value:"hour"},{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Year",value:"year"}];return t?a:e}export{ge as A,me as F,_ as a,fe as u};
