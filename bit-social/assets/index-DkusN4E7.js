import{r as t,i as te,m as re,k as oe,l as ne,c as se,n as _,p as ae,aN as X,b as M,b4 as ie,N as le,aD as ce}from"./main-legal-dots-go.js";import{r as de}from"./row-peqAxYsW.js";import{a as ge,P as ue}from"./index-DUhc_b81.js";const F=t.createContext({}),me=e=>{const{antCls:n,componentCls:s,iconCls:r,avatarBg:l,avatarColor:z,containerSize:y,containerSizeLG:b,containerSizeSM:f,textFontSize:g,textFontSizeLG:O,textFontSizeSM:N,borderRadius:u,borderRadiusLG:m,borderRadiusSM:E,lineWidth:R,lineType:k}=e,o=(v,p,$)=>({width:v,height:v,borderRadius:"50%",[`&${s}-square`]:{borderRadius:$},[`&${s}-icon`]:{fontSize:p,[`> ${r}`]:{margin:0}}});return{[s]:Object.assign(Object.assign(Object.assign(Object.assign({},oe(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:z,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:l,border:`${ne(R)} ${k} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),o(y,g,u)),{"&-lg":Object.assign({},o(b,O,m)),"&-sm":Object.assign({},o(f,N,E)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},pe=e=>{const{componentCls:n,groupBorderColor:s,groupOverlapping:r,groupSpace:l}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:s},"> *:not(:first-child)":{marginInlineStart:r}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:l}}}},ve=e=>{const{controlHeight:n,controlHeightLG:s,controlHeightSM:r,fontSize:l,fontSizeLG:z,fontSizeXL:y,fontSizeHeading3:b,marginXS:f,marginXXS:g,colorBorderBg:O}=e;return{containerSize:n,containerSizeLG:s,containerSizeSM:r,textFontSize:Math.round((z+y)/2),textFontSizeLG:b,textFontSizeSM:l,groupSpace:g,groupOverlapping:-f,groupBorderColor:O}},q=te("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:s}=e,r=re(e,{avatarBg:s,avatarColor:n});return[me(r),pe(r)]},ve);var fe=function(e,n){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(e);l<r.length;l++)n.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(s[r[l]]=e[r[l]]);return s};const Se=(e,n)=>{const[s,r]=t.useState(1),[l,z]=t.useState(!1),[y,b]=t.useState(!0),f=t.useRef(null),g=t.useRef(null),O=se(n,f),{getPrefixCls:N,avatar:u}=t.useContext(_),m=t.useContext(F),E=()=>{if(!g.current||!f.current)return;const a=g.current.offsetWidth,i=f.current.offsetWidth;if(a!==0&&i!==0){const{gap:C=4}=e;C*2<i&&r(i-C*2<a?(i-C*2)/a:1)}};t.useEffect(()=>{z(!0)},[]),t.useEffect(()=>{b(!0),r(1)},[e.src]),t.useEffect(E,[e.gap]);const R=()=>{const{onError:a}=e;(a==null?void 0:a())!==!1&&b(!1)},{prefixCls:k,shape:o,size:v,src:p,srcSet:$,icon:x,className:T,rootClassName:G,alt:I,draggable:j,children:S,crossOrigin:w}=e,h=fe(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),c=ae(a=>{var i,C;return(C=(i=v??(m==null?void 0:m.size))!==null&&i!==void 0?i:a)!==null&&C!==void 0?C:"default"}),L=Object.keys(typeof c=="object"?c||{}:{}).some(a=>["xs","sm","md","lg","xl","xxl"].includes(a)),A=ge(L),B=t.useMemo(()=>{if(typeof c!="object")return{};const a=de.find(C=>A[C]),i=c[a];return i?{width:i,height:i,fontSize:i&&(x||S)?i/2:18}:{}},[A,c]),d=N("avatar",k),H=X(d),[J,K,Q]=q(d,H),U=M({[`${d}-lg`]:c==="large",[`${d}-sm`]:c==="small"}),V=t.isValidElement(p),Y=o||(m==null?void 0:m.shape)||"circle",Z=M(d,U,u==null?void 0:u.className,`${d}-${Y}`,{[`${d}-image`]:V||p&&y,[`${d}-icon`]:!!x},Q,H,T,G,K),ee=typeof c=="number"?{width:c,height:c,fontSize:x?c/2:18}:{};let P;if(typeof p=="string"&&y)P=t.createElement("img",{src:p,draggable:j,srcSet:$,onError:R,alt:I,crossOrigin:w});else if(V)P=p;else if(x)P=x;else if(l||s!==1){const a=`scale(${s})`,i={msTransform:a,WebkitTransform:a,transform:a};P=t.createElement(ie,{onResize:E},t.createElement("span",{className:`${d}-string`,ref:g,style:Object.assign({},i)},S))}else P=t.createElement("span",{className:`${d}-string`,style:{opacity:0},ref:g},S);return delete h.onError,delete h.gap,J(t.createElement("span",Object.assign({},h,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee),B),u==null?void 0:u.style),h.style),className:Z,ref:O}),P))},D=t.forwardRef(Se),W=e=>{const{size:n,shape:s}=t.useContext(F),r=t.useMemo(()=>({size:e.size||n,shape:e.shape||s}),[e.size,e.shape,n,s]);return t.createElement(F.Provider,{value:r},e.children)},he=e=>{var n,s,r;const{getPrefixCls:l,direction:z}=t.useContext(_),{prefixCls:y,className:b,rootClassName:f,style:g,maxCount:O,maxStyle:N,size:u,shape:m,maxPopoverPlacement:E,maxPopoverTrigger:R,children:k,max:o}=e,v=l("avatar",y),p=`${v}-group`,$=X(v),[x,T,G]=q(v,$),I=M(p,{[`${p}-rtl`]:z==="rtl"},G,$,b,f,T),j=le(k).map((h,c)=>ce(h,{key:`avatar-key-${c}`})),S=(o==null?void 0:o.count)||O,w=j.length;if(S&&S<w){const h=j.slice(0,S),c=j.slice(S,w),L=(o==null?void 0:o.style)||N,A=((n=o==null?void 0:o.popover)===null||n===void 0?void 0:n.trigger)||R||"hover",B=((s=o==null?void 0:o.popover)===null||s===void 0?void 0:s.placement)||E||"top",d=Object.assign(Object.assign({content:c},o==null?void 0:o.popover),{overlayClassName:M(`${p}-popover`,(r=o==null?void 0:o.popover)===null||r===void 0?void 0:r.overlayClassName),placement:B,trigger:A});return h.push(t.createElement(ue,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},d),t.createElement(D,{style:L},`+${w-S}`))),x(t.createElement(W,{shape:m,size:u},t.createElement("div",{className:I,style:g},h)))}return x(t.createElement(W,{shape:m,size:u},t.createElement("div",{className:I,style:g},j)))},Ce=D;Ce.Group=he;export{Ce as A};
