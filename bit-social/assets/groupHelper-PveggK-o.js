import{g as _,$ as G,r as M,a as n,F as J,j as c,h as _e,u as E,b as X,L as j,q as se,l as B,e as L,s as ue,c as de,d as pe}from"./main-afraid-ants-sort.js";import{T as m,i as T,S as b,A as ge,F as O,B as v,j as K,h as D,r as $,m as z,l as Me,M as Z,s as I,P as Le,n as P,I as V,u as xe,t as me}from"./antd-CMhliQbc.js";import{p as fe,P as ee,i as W}from"./PlatformIcon-DHlKQsTj.js";import{u as H,a as te,b as Q}from"./react-query-BAnB2mAm.js";import{u as Ce}from"./router-yX2GsLRQ.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Pe({searchAccountsTxt:e="",selectedMenuTab:t={}}={}){const{isModalOpen:o}=_(G),a=[];e&&a.push(e),t.type&&a.push(t);const{data:s,isFetching:r,isLoading:l,refetch:i}=H({queryFn:async()=>M("accounts",void 0,{search:e,...t},"GET"),queryKey:["accounts",...a],refetchInterval:o?2e3:!1});return{accounts:(s==null?void 0:s.data)||[],isFetchingAccounts:r,isLoadingAccounts:l,refetchAccounts:i}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ie(){const[e]=Ce({}),t=e.get("value")||"",a={type:e.get("type")||"",value:t},s=te(),{isError:r,isPending:l,isSuccess:i,mutateAsync:u}=Q({mutationFn:async d=>M("account/save",{accountData:d},void 0,"POST"),mutationKey:["save_account"],onSuccess:()=>{s.invalidateQueries({queryKey:["active-accounts"]}),s.invalidateQueries({queryKey:["accounts",a]})}});return{isSavingAccount:l,isSavingAccountError:r,isSavingAccountSuccess:i,saveAccount:u}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ze(){const{isPending:e,mutateAsync:t}=Q({mutationFn:async o=>M(o.url,o.data,void 0,"POST")});return{isVerifyAccountLoading:e,verifyAccount:o=>t(o)}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ne=e=>{switch(e){case"googleBusinessProfile":return n(J,{children:["You can only add verified locations.",c("br",{}),"If you need to add another Google account, simply log out of or switch Google accounts first."]});default:return n(J,{children:["If you need to add another ",e," account, simply log out of or switch ",e," accounts first."]})}};function Ue({count:e=0,platform:t}){return n(m.Text,{style:{fontSize:"14px"},type:"secondary",children:[n("div",{children:[" Total ",e," accounts found"]}),Ne(t)]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const qe=({token:e})=>({background:`${e.colorBgLayout} `});function ie({accountType:e,connectAccountId:t,handleConnect:o,icon:a,id:s,isConnected:r,isLoading:l,name:i}){const u=JSON.parse(e).account_type;return c(D,{css:qe,size:"small",children:n(K,{align:"middle",justify:"space-between",children:[c(T,{children:n(b,{size:"small",children:[c(ge,{size:40,src:a}),n(O,{style:{maxWidth:"300px"},vertical:!0,children:[c(m.Text,{ellipsis:!0,strong:!0,title:i,children:i}),c(m.Text,{type:"secondary",children:u})]})]})}),c(T,{children:r?c(m.Text,{className:"mx-2",type:"success",children:"Saved"}):c(v,{disabled:l&&s!==t,loading:l&&s===t,onClick:o,type:"primary",children:"Save"})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Fe(){var U;const[e,t]=_e(G),{isProClient:o}=E(X),{isSavingAccount:a,saveAccount:s}=Ie(),{isVerifyAccountLoading:r,verifyAccount:l}=ze(),[i,u]=$.useState(),d=()=>{t(se)},p=$.useMemo(()=>Array.isArray(e==null?void 0:e.details)?e.details.map(h=>{const{details:A}=h.account,{account_id:x,account_name:S,icon:k}=JSON.parse(A);return{accountDetails:h.account,accountIcon:k,accountId:x,accountName:S,isConnected:h.isConnected,verifyUrl:h.verifyUrl}}):[],[e==null?void 0:e.details]),g=async(h,A)=>{var k;u(h.account_id);let x={...h};if(A){const C=await l({data:x,url:A});if(C.status==="error")return u(void 0),I.error({description:C.data.message,message:"Account Save Failed"});x=C.data.accountDetails}const S=await s(x);if(u(void 0),S.status==="error")return I.error({description:S.data.message,message:"Account Save Failed"});if(S.status==="success"){const w=(k=e==null?void 0:e.details)==null?void 0:k.map(C=>{const Y=C.account.account_id;return String(Y)===String(S.data.account.account_id)?{...C,isConnected:!0}:C});t(C=>({...C,details:w})),I.success({message:"Account Save Successfully"})}},f=e.platform&&fe[e.platform].name;return $.useEffect(()=>{function h(A){A.preventDefault(),t(se)}return window.addEventListener("beforeunload",h,{capture:!0}),()=>{window.removeEventListener("beforeunload",h,{capture:!0})}},[]),n(Z,{footer:!1,maskClosable:!1,onCancel:d,open:e.isModalOpen,styles:{body:{maxHeight:"70vh",overflowY:"scroll",padding:"0 8px"}},title:e.loading?n(b,{children:[c(z.Avatar,{active:!0,shape:"circle",size:"large"}),c(z.Input,{active:!0,size:"small"})]}):n(O,{align:"center",gap:"small",children:[c(ee,{name:e.platform,size:30}),c(m.Text,{style:{fontSize:"18px",textTransform:"capitalize"},children:f})]}),children:[n(b,{className:"w-100 py-2",direction:"vertical",children:[e.loading&&!e.status?Array.from({length:3}).fill(0).map((h,A)=>c(D,{className:"w-100",size:"small",children:n(b,{className:"w-100",size:"large",children:[c(z.Avatar,{active:!0,shape:"circle",size:"large"}),c(z.Input,{active:!0,block:!0,size:"small",style:{width:"260px"}}),c(z.Button,{active:!0})]})},`key-${A+9}`)):(f==="LinkedIn"&&!o?n(O,{gap:10,vertical:!0,children:[c(m.Title,{level:5,children:"Profile"}),p&&p.length&&p.map(h=>c(ie,{accountType:h.accountDetails.details,connectAccountId:i,handleConnect:()=>g(h.accountDetails,h.verifyUrl),icon:h.accountIcon,id:h.accountId,isConnected:h.isConnected,isLoading:a||r,name:h.accountName},h.accountId)),n(m.Title,{level:5,children:["Page ",c(j,{color:"#ff8609",name:"crown",size:20})]}),c(D,{className:"w-100",size:"small",children:n(b,{className:"w-100",size:"large",children:[c(z.Avatar,{shape:"circle",size:"large"}),c(z.Input,{block:!0,size:"small",style:{width:"260px"}}),c(z.Button,{})]})}),c(m.Text,{strong:!0,children:"Linkedin Page feature on pro"})]}):p&&p.length&&p.map(h=>c(ie,{accountType:h.accountDetails.details,connectAccountId:i,handleConnect:()=>g(h.accountDetails,h.verifyUrl),icon:h.accountIcon,id:h.accountId,isConnected:h.isConnected,isLoading:a||r,name:h.accountName},h.accountId)))||"",e.status==="success"&&!((U=e.details)!=null&&U.length)&&c(m.Title,{level:5,children:f==="Pinterest"?"Board Not Found":"Account Not Found"}),e.status==="error"&&n(O,{vertical:!0,children:[c(m.Title,{level:5,children:" Account connect failed"}),c(Me,{description:e.message,type:"error"})]})]}),e.status&&f?c(Ue,{count:p==null?void 0:p.length,platform:f}):c(m.Title,{level:5,children:"Fetching data, please wait..."})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Re(){const{data:e,isFetching:t,isLoading:o,refetch:a}=H({queryFn:async()=>M("platforms-credentials",void 0,void 0,"POST"),queryKey:["clientIds"]}),{clientInfo:s}=(e==null?void 0:e.data)||{};return{clientIds:s,isFetchingClientIds:t,isLoadingClientIds:o,refetchClientIds:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Link:$e}=m;function F({devLink:e,name:t}){return n(J,{children:["To get app credentials, Visit"," ",n($e,{href:e,rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:[fe[t].name," Developer",c(j,{name:"move-up-right",size:12,style:{transform:"translateY(-2px)"}})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:Oe}=m,Be=e=>{switch(e){case"discord":return c(F,{devLink:"https://discord.com/developers/applications/",name:e});case"facebook":return c(F,{devLink:"https://developers.facebook.com/apps/",name:e});case"googleBusinessProfile":return c(F,{devLink:"https://console.cloud.google.com/",name:e});case"linkedin":return c(F,{devLink:"https://www.linkedin.com/developers/apps",name:e});case"pinterest":return c(F,{devLink:"https://developers.pinterest.com/apps/",name:e});case"tumblr":return c(F,{devLink:"https://www.tumblr.com/oauth/apps",name:e});case"twitter":return c(F,{devLink:"https://developer.twitter.com/en/portal/dashboard",name:e});default:return""}};function Ve({platform:e}){return c(Oe,{children:Be(e)})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ee(){const e=te(),{isPending:t,mutateAsync:o}=Q({mutationFn:async a=>M("custom-app",{...a},void 0,"POST"),mutationKey:["custom_app"],onSuccess:()=>{e.invalidateQueries({queryKey:["get-customApp"]})}});return{createCustomApp:a=>o(a),isLoadingCreateCustomApp:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function De(e){const{data:t,isLoading:o,refetch:a}=H({queryFn:async()=>M("custom-app",void 0,{platform:e},"GET"),queryKey:["get-customApp"],refetchOnWindowFocus:!1});return{customApps:t==null?void 0:t.data,isLoadingCustomApp:o,refetchCustomApp:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ge(){const e=te(),{isPending:t,mutateAsync:o}=Q({mutationFn:async a=>M(`custom-app/${a}/destroy`,void 0,void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["get-customApp"]})}});return{deleteCustomApp:a=>o(a),isLoadingDeleteCustomApp:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne={discord:"https://bit-social.com/docs/accounts/connect-your-discord-account-with-bit-social/",facebook:"https://bit-social.com/documentation/accounts/connect-your-facebook-account-with-bit-social/",googleBusinessProfile:"https://bit-social.com/documentation/accounts/connect-your-google-business-profile-account-with-bit-social/",instagram:"https://bit-social.com/documentation/accounts/connect-your-instagram-account-with-bit-social/",linkedin:"https://bit-social.com/documentation/accounts/connect-your-linkedin-account-with-bit-social/",pinterest:"https://bit-social.com/docs/accounts/connect-your-pinterest-account-with-bit-social/",tumblr:"https://bit-social.com/documentation/accounts/connect-your-tumblr-account-with-bit-social/",twitter:"https://bit-social.com/documentation/accounts/connect-your-twitter-account-with-bit-social/"};function Ke(e){if(!e||!ne[e]){console.error("Invalid link key",e);return}const t=new URL(ne[e]);return t.searchParams.append("utm_source",B.PLUGIN_SLUG),t.searchParams.append("utm_medium","inside-plugin"),t.href}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ae({iconName:e="file-text",platform:t}){return c(v,{href:Ke(t),icon:c(j,{name:e}),rel:"noopener noreferrer nofollow",size:"small",style:{whiteSpace:"nowrap"},target:"_blank",type:"link",children:"Doc Link"})}const He="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='512'%20width='512'%20xmlns:v='https://vecta.io/nano'%3e%3cpath%20d='M501.301%20131.964c-5.888-22.172-23.237-39.633-45.266-45.56C416.107%2075.636%20256%2075.636%20256%2075.636s-160.107%200-200.035%2010.768c-22.029%205.926-39.378%2023.388-45.266%2045.56C0%20172.152%200%20256%200%20256s0%2083.848%2010.699%20124.036c5.888%2022.172%2023.237%2039.633%2045.266%2045.56C95.893%20436.364%20256%20436.364%20256%20436.364s160.107%200%20200.035-10.768c22.029-5.927%2039.378-23.388%2045.266-45.56C512%20339.848%20512%20256%20512%20256s0-83.848-10.699-124.036z'%20fill='red'/%3e%3cpath%20d='m203.636%20332.128%20133.818-76.126-133.818-76.13z'%20fill='%23fff'/%3e%3c/svg%3e";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Link:Qe}=m,re={discord:"https://www.youtube.com/watch?v=q85NrjFQ33Y",facebook:"https://www.youtube.com/watch?v=V7-DqQ4dJg4",googleBusinessProfile:"https://www.youtube.com/watch?v=o3Hf2v4HsVs",linkedin:"https://www.youtube.com/watch?v=YcmVEq3GGsk",pinterest:"https://www.youtube.com/watch?v=6deQqqhMYLY",tumblr:"https://www.youtube.com/watch?v=WfxpNBBAjRQ",twitter:"https://www.youtube.com/watch?v=v2m99Itn-KU"};function ye({platform:e}){if(!(!e||!re[e]))return c(Qe,{href:re[e],rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:c(v,{icon:c(ge,{alt:"youtube",size:20,src:He}),size:"small",type:"text",children:"Tutorial"})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=(e,t,o,a,s,r,l)=>{const[i,u]=[700,700],d=Math.round((window.innerWidth-i)/2),p=Math.round((window.innerHeight-u)/2),g=window.open(e,t,`width=${i},height=${u},left=${d},top=${p},toolbar=off`),f=setInterval(()=>{localStorage.setItem("__bitSocial_platform_interval",String(f)),!(!(g!=null&&g.closed)||g!=null&&g.closed&&!localStorage.getItem("__bitSocial_platform"))&&(clearInterval(f),o==null||o(),l(a,s,r))},500)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ye=`${B.CLIENT_SECRET_URL}`,{baseAuthStateURL:Je}=_(L),We=async e=>{const t={client_id:e.appId,platform:"facebook"},o={body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"};return fetch(Ye,o).then(a=>a.json())},Xe=async(e,t,o)=>{const a={...e};if(o==="oneClickAuth"){const i=await We(a);a.appSecret=i.clientSecret}const s={config:{authType:"OAuth2",platform:a.platform},payload:{client_id:a.appId,client_secret:a.appSecret,code:t.code,grant_type:"no need",redirect_uri:a.redirectUri}},{data:r,status:l}=await M("authorize",s,void 0,"POST");l==="success"&&ue(G,{details:r,isModalOpen:!0,loading:!1,platform:"facebook",status:l})},Ze=async(e,t,o)=>{let a={};const s=localStorage.getItem("__bitSocial_platform");s&&(a=JSON.parse(s),localStorage.removeItem("__bitSocial_platform")),(!a||!a.code||a.error)&&I.error({description:`${a.error?`Cause: ${a.error}.`:""} Please try again`,message:"Authorization failed"});const r=await Xe(e,a,o);return t(),r},et=(e,t,o,a)=>{if(!e.platform||!e.appId||!e.redirectUri)throw new Error("Missing credentials");const{appId:s,platform:r,redirectUri:l}=e,i=a==="oneClickAuth"?B.REDIRECT_URL:l,u="pages_show_list,pages_read_engagement,pages_manage_metadata,pages_manage_posts,business_management",d=new URL("https://www.facebook.com/dialog/oauth");d.searchParams.append("scope",u),d.searchParams.append("client_id",s),d.searchParams.append("redirect_uri",i),d.searchParams.append("state",Je+"#/accounts/auth/response"),be(d,r,o,e,t,a,Ze)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const tt=`${B.CLIENT_SECRET_URL}`,we=`${B.REDIRECT_URL}`,{baseAuthStateURL:ct}=_(L),at=async(e,t)=>{const o={config:{authType:"OAuth2",platform:e.platform},payload:{client_id:e.appId,client_secret:e.appSecret,code:t.code,grant_type:"null",redirect_uri:e.redirectUri}},{data:a,status:s}=await M("authorize",o,void 0,"POST");s==="success"&&ue(G,{...{isModalOpen:!0,loading:!1,platform:"linkedin",status:s},details:a})},ot=async e=>{const t={client_id:e.appId,platform:e.platform},o={body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"};return fetch(tt,o).then(a=>a.json())},st=async(e,t,o)=>{let a={};const s=localStorage.getItem("__bitSocial_platform"),r={...e};if(s&&(a=JSON.parse(s),localStorage.removeItem("__bitSocial_platform")),!a.code){I.error({description:`${a.error?`Cause: ${a.error}.`:""} Please try again`,message:"Authorization failed"});return}if(o==="oneClickAuth"){const i=await ot(e);(!i||!i.clientSecret)&&I.error({description:`Cause: ${i.message}. Please try again`,message:"Authorization failed"}),r.appSecret=i.clientSecret.toString(),r.redirectUri=we}const l=await at(r,a);return t(),l},it=(e,t,o,a)=>{if(!e.platform||!e.appId||!e.redirectUri)throw new Error("Missing credentials");const{appId:s,platform:r,redirectUri:l}=e,i=a==="oneClickAuth"?we:l,u="openid profile email w_member_social r_organization_admin w_organization_social rw_organization_admin",d=new URL("https://www.linkedin.com/oauth/v2/authorization");d.searchParams.append("scope",u),d.searchParams.append("client_id",s),d.searchParams.append("response_type","code"),d.searchParams.append("redirect_uri",i),d.searchParams.append("state",ct+"#/accounts/auth/response"),be(d,r,o,e,t,a,st)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function nt(e){switch(e){case"facebook":return et;case"linkedin":return it}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(L);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(L);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(L);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(L);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(L);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(L);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(L);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Te({authType:e="oneClickAuth",clientId:t,closeConnectModal:o,handleAuthCallback:a,isConnectLoading:s,platform:r,platformCredentialData:l,setCustomModalOpen:i}){const u=de(pe),d=nt;return c(v,{block:!0,disabled:!t,loading:s,onClick:()=>{const g=d(r,l.apiVersion);if(W(r)){u(!0);return}i&&i(!1),g&&g(l,a,o,e)},type:"primary",children:"Connect"})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:rt}=m;var lt={name:"3s4yqf",styles:"width:400px"};function ht({closeConnectModal:e,credential:t,handleAuthCallback:o,handleDelete:a,isDeleteLoading:s,name:r,platform:l,setCustomModalOpen:i}){const u={apiVersion:t.apiVersion,appId:t.appKey,appSecret:t.appSecret,platform:l,redirectUri:t.redirectUri};return c(D,{css:lt,size:"small",children:n(K,{align:"middle",justify:"space-between",children:[c(rt,{className:"text-capitalize",ellipsis:!0,strong:!0,style:{width:"200px"},children:r}),n(b,{children:[c(Te,{authType:"customAuth",clientId:t.appKey,closeConnectModal:e,handleAuthCallback:o,platform:l,platformCredentialData:u,setCustomModalOpen:i}),c(Le,{cancelText:"No",description:"Are you sure to delete this app?",okButtonProps:{danger:!0,loading:s},okText:"Yes, Delete",onConfirm:a,placement:"bottomRight",title:"Delete the app",children:c(v,{danger:!0,icon:c(j,{name:"trash-2"}),type:"text"})})]})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:R,Title:le}=m,he=(e,t)=>({apiVersion:["twitter"],appName:["twitter","tumblr"]})[t].includes(e);var ut={name:"11vupei",styles:"border-right:1px solid #B9B9B9"};function dt({closeConnectModal:e,handleAuthCallback:t,onOk:o,open:a,platform:s,setAccountModal:r,setCustomModalOpen:l}){var ce,ae,oe;const{apiURL:i,siteUrl:u}=E(L),d=`${i.base}/redirect`,p=u,[g]=P.useForm(),[f,U]=$.useState({}),{createCustomApp:h,isLoadingCreateCustomApp:A}=Ee(),{deleteCustomApp:x,isLoadingDeleteCustomApp:S}=Ge(),{customApps:k}=De(s),w=$.useRef(null),C=y=>{try{navigator.clipboard.writeText(y),I.success({message:"Copied!"})}catch{w.current!=null&&(w.current.select(),document.execCommand("copy"),w.current.blur())}},Y=y=>{g.setFieldsValue({apiVersion:y})},ve=[{label:"v1.1 (media supported)",value:"1.1"},{label:"v2.0 (media unsupported)",value:"2"}],Se=async y=>{const je={...y,platform:s},q=await h(je);(q==null?void 0:q.code)==="SUCCESS"?(g.resetFields(),I.success({description:q.data.message,message:"App successfully added!"})):(q.data.errorField&&U(q.data.errorField),I.error({description:q.data.message,message:"App add failed"}))},ke=y=>{x(y)};return c(Z,{centered:!0,footer:!1,onCancel:()=>l(!1),onOk:o,open:a,title:c("div",{children:n(O,{align:"center",gap:10,children:[c(v,{icon:c(j,{name:"arrow-left",size:24}),onClick:()=>{o(),r(!0)},title:"Back",type:"text"}),c(ee,{name:s,size:34}),n(le,{className:"text-capitalize",level:5,style:{marginBottom:0},children:["Connect Custom ",s," App"]}),c(Ae,{platform:s}),c(ye,{platform:s})]})}),width:900,children:n(K,{className:"mt-4",gutter:[48,0],justify:"center",children:[c(T,{css:ut,span:12,children:n(P,{form:g,initialValues:{redirectUri:d},layout:"vertical",onFinish:Se,children:[c(P.Item,{label:c(R,{strong:!0,children:"Homepage URI"}),name:"homepageUri",rules:[{message:"Please enter homepage url"}],children:n(b.Compact,{className:"w-100",children:[c(V,{defaultValue:`${p}`,ref:w,style:{width:"calc(100% - 32px)"}}),c(v,{icon:c(j,{name:"copy",size:12}),onClick:()=>C(p),title:"Click to copy"})]})}),c(P.Item,{label:c(R,{strong:!0,children:"Redirect URI"}),name:"redirectUri",rules:[{message:"Please enter redirect url",required:!0}],children:n(b.Compact,{className:"w-100",children:[c(V,{defaultValue:`${d}`,ref:w,style:{width:"calc(100% - 32px)"}}),c(v,{icon:c(j,{name:"copy",size:12}),onClick:()=>C(d),title:"Click to copy"})]})}),he(s,"apiVersion")?c(P.Item,{label:c(R,{strong:!0,children:"Api Version"}),name:"apiVersion",rules:[{message:"Please select an API version",required:!0}],children:c(xe,{onChange:Y,options:ve})}):"",he(s,"appName")?n(P.Item,{label:c(R,{strong:!0,children:"App Name"}),name:"appName",rules:[{message:"Please enter your app name",required:!0}],children:[c(V,{}),f.appName&&c(m.Text,{type:"danger",children:(ce=f.appName)==null?void 0:ce[0]})]}):"",c(b,{className:"pb-2",children:c(Ve,{platform:s})}),n(P.Item,{label:c(R,{strong:!0,children:"App Key or Client ID"}),name:"appKey",rules:[{message:"Please enter your app key",required:!0}],children:[c(V,{}),f.appKey&&c(m.Text,{type:"danger",children:(ae=f.appKey)==null?void 0:ae[0]})]}),n(P.Item,{label:c(R,{strong:!0,children:"App Secret or Client Secret"}),name:"appSecret",rules:[{message:"Please enter your app secret",required:!0}],children:[c(V,{}),f.appSecret&&c(m.Text,{type:"danger",children:(oe=f.appSecret)==null?void 0:oe[0]})]}),c(P.Item,{children:c(v,{className:"w-100 pt-2",loading:A,onClick:()=>{g.submit()},size:"large",type:"primary",children:"Add"})})]},s)}),n(T,{span:12,children:[c(le,{level:5,children:"Connected Apps"}),c(b,{direction:"vertical",children:k&&k.length?k.map(y=>c(ht,{appId:y.id,closeConnectModal:e,credential:y.credential,handleAuthCallback:t,handleDelete:()=>ke(y.id),isDeleteLoading:S,name:y.name,platform:s,setCustomModalOpen:l},y.id)):c(R,{children:"No App Found"})})]})]})},s)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const pt=`${B.REDIRECT_URL}`,{Title:gt}=m;function N({clientId:e,closeConnectModal:t,isConnectLoading:o,name:a,platform:s,setAccountModal:r,status:l}){const{refetchAccounts:i}=Pe(),[u,d]=Ce({}),p=u.get("value")||"all",[g,f]=$.useState(!1),{token:U}=me.useToken(),h=de(pe),{isProClient:A}=E(X),x={appId:e,appSecret:"",platform:s,redirectUri:pt},S=()=>{f(!1)},k=()=>{if(W(s)&&!A){h(!0);return}t(),f(!0)},w=()=>{d(C=>(C.set("type","platform"),C.set("value",String(p)),C)),i()};return c(D,{style:{borderColor:U.colorBorder,height:"100%"},children:n(O,{gap:14,vertical:!0,children:[n(b,{align:"center",children:[c(ee,{name:s,size:35,style:{flexShrink:0}}),c(gt,{className:"text-capitalize",level:5,style:{marginBottom:0},children:a||s}),W(s)&&!A&&c(j,{color:"#ff8609",name:"crown",size:20})]}),n(b,{children:[c(Ae,{platform:s}),c(ye,{platform:s})]}),n(b,{direction:"vertical",size:"small",children:[c(v,{block:!0,onClick:k,style:{borderColor:U.colorPrimary},children:"Custom App"}),l===0?void 0:c(Te,{clientId:e,closeConnectModal:t,handleAuthCallback:w,isConnectLoading:o,platform:s,platformCredentialData:x}),g&&s?c(dt,{closeConnectModal:t,handleAuthCallback:w,onOk:S,open:g,platform:s,setAccountModal:r,setCustomModalOpen:f}):void 0]})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function wt({btnType:e="default"}){const{clientIds:t,isLoadingClientIds:o}=Re(),{token:a}=me.useToken(),{isDarkTheme:s}=E(X),{isModalOpen:r}=E(G),[l,i]=$.useState(!1),u=()=>{const p=localStorage.getItem("__bitSocial_platform_interval");p&&(clearInterval(Number(p)),localStorage.removeItem("__bitSocial_platform_interval")),i(!1)},d=()=>{i(!0)};return n("div",{children:[e==="default"?c(v,{icon:c(j,{name:"plus",size:18}),onClick:d,size:"small",type:"primary",children:"Connect Account"}):c(v,{"aria-label":"Connect Account",icon:c(j,{name:"plus",size:30}),onClick:d,style:{alignItems:"center",border:`2px solid ${a.colorPrimary}`,color:s?a.colorTextBase:a.colorPrimary,display:"flex",fontSize:"17px",fontWeight:600,height:"100%",justifyContent:"center",minHeight:"110px",width:"100%"},type:"text",children:"Connect Account"}),c(Z,{centered:!0,footer:!1,onCancel:u,open:l,style:{padding:"20px"},title:"Connect Account",width:1e3,children:n(K,{className:"p-2",gutter:[12,12],children:[c(T,{md:8,sm:12,xs:24,children:c(N,{clientId:t==null?void 0:t.facebook.id,closeConnectModal:u,isConnectLoading:o,platform:"facebook",setAccountModal:i,status:t==null?void 0:t.facebook.status})}),c(T,{md:8,sm:12,xs:24,children:c(N,{clientId:t==null?void 0:t.linkedin.id,closeConnectModal:u,isConnectLoading:o,platform:"linkedin",setAccountModal:i,status:t==null?void 0:t.linkedin.status})}),c(T,{md:8,sm:12,xs:24,children:c(N,{clientId:t==null?void 0:t.googleBusinessProfile.id,closeConnectModal:u,isConnectLoading:o,name:"Google Business",platform:"googleBusinessProfile",setAccountModal:i,status:t==null?void 0:t.googleBusinessProfile.status})}),c(T,{md:8,sm:12,xs:24,children:c(N,{clientId:t==null?void 0:t.pinterest.id,closeConnectModal:u,isConnectLoading:o,platform:"pinterest",setAccountModal:i,status:t==null?void 0:t.pinterest.status})}),c(T,{md:8,sm:12,xs:24,children:c(N,{clientId:t==null?void 0:t.discord.id,closeConnectModal:u,isConnectLoading:o,platform:"discord",setAccountModal:i,status:t==null?void 0:t.discord.status})}),c(T,{md:8,sm:12,xs:24,children:c(N,{clientId:t==null?void 0:t.tumblr.id,closeConnectModal:u,isConnectLoading:o,platform:"tumblr",setAccountModal:i,status:t==null?void 0:t.tumblr.status})}),c(T,{md:8,sm:12,xs:24,children:c(N,{clientId:t==null?void 0:t.instagram.id,closeConnectModal:u,isConnectLoading:o,platform:"instagram",setAccountModal:i,status:t==null?void 0:t.instagram.status})}),c(T,{md:8,sm:12,xs:24,children:c(N,{closeConnectModal:u,name:"X (Twitter)",platform:"twitter",setAccountModal:i,status:0})})]})}),r&&c(Fe,{})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Tt(){const{data:e,isLoading:t,refetch:o}=H({queryFn:async()=>M("pro_groups",void 0,void 0,"GET"),queryKey:["groups"]});return{groups:(e==null?void 0:e.data)||[],isLoadingGroups:t,refetchGroups:o}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const vt=e=>e.accounts.map(o=>Number(o.id)),St=(e,t,o)=>{const a=t.find(s=>s.name.toLowerCase()===e.toLowerCase());return!!a&&a.id!==o},kt=(e,t)=>{const o=t?e.filter(a=>t.includes(a.id)):[];return o.length?o.flatMap(a=>a.accounts.map(l=>Number(l.id))):[]};export{wt as C,Tt as a,vt as b,kt as g,St as i,Pe as u};
