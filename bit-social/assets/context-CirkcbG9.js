import{r as o,_ as w,h as ge,aR as Re,f as ee,c as Q,g as ue,b9 as Ae,aQ as U,aW as pe,d as Ne,a as B,Y as J,b0 as be,bj as _e}from"./main-loud-buses-flash.js";var Le=o.forwardRef(function(e,r){var d=e.prefixCls,c=e.style,l=e.className,N=e.duration,C=N===void 0?4.5:N,A=e.showProgress,L=e.pauseOnHover,p=L===void 0?!0:L,j=e.eventKey,D=e.content,m=e.closable,g=e.closeIcon,P=g===void 0?"x":g,y=e.props,f=e.onClick,F=e.onNoticeClose,H=e.times,E=e.hovering,S=o.useState(!1),x=w(S,2),u=x[0],O=x[1],a=o.useState(0),t=w(a,2),n=t[0],s=t[1],R=o.useState(0),b=w(R,2),k=b[0],q=b[1],v=E||u,_=C>0&&A,T=function(){F(j)},Y=function(i){(i.key==="Enter"||i.code==="Enter"||i.keyCode===Ae.ENTER)&&T()};o.useEffect(function(){if(!v&&C>0){var M=Date.now()-k,i=setTimeout(function(){T()},C*1e3-k);return function(){p&&clearTimeout(i),q(Date.now()-M)}}},[C,v,H]),o.useEffect(function(){if(!v&&_&&(p||k===0)){var M=performance.now(),i,h=function ne(){cancelAnimationFrame(i),i=requestAnimationFrame(function(oe){var G=oe+k-M,W=Math.min(G/(C*1e3),1);s(W*100),W<1&&ne()})};return h(),function(){p&&cancelAnimationFrame(i)}}},[C,k,v,_,H]);var V=o.useMemo(function(){return ge(m)==="object"&&m!==null?m:m?{closeIcon:P}:{}},[m,P]),te=Re(V,!0),$=100-(!n||n<0?0:n>100?100:n),I="".concat(d,"-notice");return o.createElement("div",ee({},y,{ref:r,className:Q(I,l,ue({},"".concat(I,"-closable"),m)),style:c,onMouseEnter:function(i){var h;O(!0),y==null||(h=y.onMouseEnter)===null||h===void 0||h.call(y,i)},onMouseLeave:function(i){var h;O(!1),y==null||(h=y.onMouseLeave)===null||h===void 0||h.call(y,i)},onClick:f}),o.createElement("div",{className:"".concat(I,"-content")},D),m&&o.createElement("a",ee({tabIndex:0,className:"".concat(I,"-close"),onKeyDown:Y,"aria-label":"Close"},te,{onClick:function(i){i.preventDefault(),i.stopPropagation(),T()}}),V.closeIcon),_&&o.createElement("progress",{className:"".concat(I,"-progress"),max:"100",value:$},$+"%"))}),he=U.createContext({}),je=function(r){var d=r.children,c=r.classNames;return U.createElement(he.Provider,{value:{classNames:c}},d)},de=8,me=3,ye=16,Pe=function(r){var d={offset:de,threshold:me,gap:ye};if(r&&ge(r)==="object"){var c,l,N;d.offset=(c=r.offset)!==null&&c!==void 0?c:de,d.threshold=(l=r.threshold)!==null&&l!==void 0?l:me,d.gap=(N=r.gap)!==null&&N!==void 0?N:ye}return[!!r,d]},Me=["className","style","classNames","styles"],we=function(r){var d=r.configList,c=r.placement,l=r.prefixCls,N=r.className,C=r.style,A=r.motion,L=r.onAllNoticeRemoved,p=r.onNoticeClose,j=r.stack,D=o.useContext(he),m=D.classNames,g=o.useRef({}),P=o.useState(null),y=w(P,2),f=y[0],F=y[1],H=o.useState([]),E=w(H,2),S=E[0],x=E[1],u=d.map(function(v){return{config:v,key:String(v.key)}}),O=Pe(j),a=w(O,2),t=a[0],n=a[1],s=n.offset,R=n.threshold,b=n.gap,k=t&&(S.length>0||u.length<=R),q=typeof A=="function"?A(c):A;return o.useEffect(function(){t&&S.length>1&&x(function(v){return v.filter(function(_){return u.some(function(T){var Y=T.key;return _===Y})})})},[S,u,t]),o.useEffect(function(){var v;if(t&&g.current[(v=u[u.length-1])===null||v===void 0?void 0:v.key]){var _;F(g.current[(_=u[u.length-1])===null||_===void 0?void 0:_.key])}},[u,t]),U.createElement(pe,ee({key:c,className:Q(l,"".concat(l,"-").concat(c),m==null?void 0:m.list,N,ue(ue({},"".concat(l,"-stack"),!!t),"".concat(l,"-stack-expanded"),k)),style:C,keys:u,motionAppear:!0},q,{onAllRemoved:function(){L(c)}}),function(v,_){var T=v.config,Y=v.className,V=v.style,te=v.index,$=T,I=$.key,M=$.times,i=String(I),h=T,ne=h.className,oe=h.style,G=h.classNames,W=h.styles,Se=Ne(h,Me),ae=u.findIndex(function(Z){return Z.key===i}),X={};if(t){var z=u.length-1-(ae>-1?ae:te-1),fe=c==="top"||c==="bottom"?"-50%":"0";if(z>0){var re,se,ie;X.height=k?(re=g.current[i])===null||re===void 0?void 0:re.offsetHeight:f==null?void 0:f.offsetHeight;for(var ve=0,ce=0;ce<z;ce++){var le;ve+=((le=g.current[u[u.length-1-ce].key])===null||le===void 0?void 0:le.offsetHeight)+b}var ke=(k?ve:z*s)*(c.startsWith("top")?1:-1),Ee=!k&&f!==null&&f!==void 0&&f.offsetWidth&&(se=g.current[i])!==null&&se!==void 0&&se.offsetWidth?((f==null?void 0:f.offsetWidth)-s*2*(z<3?z:3))/((ie=g.current[i])===null||ie===void 0?void 0:ie.offsetWidth):1;X.transform="translate3d(".concat(fe,", ").concat(ke,"px, 0) scaleX(").concat(Ee,")")}else X.transform="translate3d(".concat(fe,", 0, 0)")}return U.createElement("div",{ref:_,className:Q("".concat(l,"-notice-wrapper"),Y,G==null?void 0:G.wrapper),style:B(B(B({},V),X),W==null?void 0:W.wrapper),onMouseEnter:function(){return x(function(K){return K.includes(i)?K:[].concat(J(K),[i])})},onMouseLeave:function(){return x(function(K){return K.filter(function(xe){return xe!==i})})}},U.createElement(Le,ee({},Se,{ref:function(K){ae>-1?g.current[i]=K:delete g.current[i]},prefixCls:l,classNames:G,styles:W,className:Q(ne,m==null?void 0:m.notice),style:oe,times:M,key:I,eventKey:I,onNoticeClose:p,hovering:t&&S.length>0})))})},He=o.forwardRef(function(e,r){var d=e.prefixCls,c=d===void 0?"rc-notification":d,l=e.container,N=e.motion,C=e.maxCount,A=e.className,L=e.style,p=e.onAllRemoved,j=e.stack,D=e.renderNotifications,m=o.useState([]),g=w(m,2),P=g[0],y=g[1],f=function(t){var n,s=P.find(function(R){return R.key===t});s==null||(n=s.onClose)===null||n===void 0||n.call(s),y(function(R){return R.filter(function(b){return b.key!==t})})};o.useImperativeHandle(r,function(){return{open:function(t){y(function(n){var s=J(n),R=s.findIndex(function(q){return q.key===t.key}),b=B({},t);if(R>=0){var k;b.times=(((k=n[R])===null||k===void 0?void 0:k.times)||0)+1,s[R]=b}else b.times=0,s.push(b);return C>0&&s.length>C&&(s=s.slice(-C)),s})},close:function(t){f(t)},destroy:function(){y([])}}});var F=o.useState({}),H=w(F,2),E=H[0],S=H[1];o.useEffect(function(){var a={};P.forEach(function(t){var n=t.placement,s=n===void 0?"topRight":n;s&&(a[s]=a[s]||[],a[s].push(t))}),Object.keys(E).forEach(function(t){a[t]=a[t]||[]}),S(a)},[P]);var x=function(t){S(function(n){var s=B({},n),R=s[t]||[];return R.length||delete s[t],s})},u=o.useRef(!1);if(o.useEffect(function(){Object.keys(E).length>0?u.current=!0:u.current&&(p==null||p(),u.current=!1)},[E]),!l)return null;var O=Object.keys(E);return be.createPortal(o.createElement(o.Fragment,null,O.map(function(a){var t=E[a],n=o.createElement(we,{key:a,configList:t,placement:a,prefixCls:c,className:A==null?void 0:A(a),style:L==null?void 0:L(a),motion:N,onNoticeClose:f,onAllNoticeRemoved:x,stack:j});return D?D(n,{prefixCls:c,key:a}):n})),l)}),Ie=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],De=function(){return document.body},Ce=0;function Oe(){for(var e={},r=arguments.length,d=new Array(r),c=0;c<r;c++)d[c]=arguments[c];return d.forEach(function(l){l&&Object.keys(l).forEach(function(N){var C=l[N];C!==void 0&&(e[N]=C)})}),e}function Fe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.getContainer,d=r===void 0?De:r,c=e.motion,l=e.prefixCls,N=e.maxCount,C=e.className,A=e.style,L=e.onAllRemoved,p=e.stack,j=e.renderNotifications,D=Ne(e,Ie),m=o.useState(),g=w(m,2),P=g[0],y=g[1],f=o.useRef(),F=o.createElement(He,{container:P,ref:f,prefixCls:l,motion:c,maxCount:N,className:C,style:A,onAllRemoved:L,stack:p,renderNotifications:j}),H=o.useState([]),E=w(H,2),S=E[0],x=E[1],u=_e(function(a){var t=Oe(D,a);(t.key===null||t.key===void 0)&&(t.key="rc-notification-".concat(Ce),Ce+=1),x(function(n){return[].concat(J(n),[{type:"open",config:t}])})}),O=o.useMemo(function(){return{open:u,close:function(t){x(function(n){return[].concat(J(n),[{type:"close",key:t}])})},destroy:function(){x(function(t){return[].concat(J(t),[{type:"destroy"}])})}}},[]);return o.useEffect(function(){y(d())}),o.useEffect(function(){if(f.current&&S.length){S.forEach(function(n){switch(n.type){case"open":f.current.open(n.config);break;case"close":f.current.close(n.key);break;case"destroy":f.current.destroy();break}});var a,t;x(function(n){return(a!==n||!t)&&(a=n,t=n.filter(function(s){return!S.includes(s)})),t})}},[S]),[O,F]}const We=U.createContext({});export{We as A,Le as N,je as a,Fe as u};
