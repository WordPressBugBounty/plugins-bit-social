import{X as _,$ as H,ac as Y,w as x,A as ye,q as te,v as Q,y as h,ar as J,z as r,T as g,j as c,F as X,S as k,B as w,a0 as xe,D as G,E as ce,r as q,K as F,I as Ae,N as ae,c1 as re,ai as V,c2 as Pe,J as Ie,Y as M,s as be,G as we,H as Te,L as ze,c3 as ne,x as ve,c4 as Ne,M as le}from"./main-many-times-fetch.js";import{p as oe,P as Z,i as ee}from"./PlatformIcon-B7QLyasD.js";import{C as b,R as W}from"./row-DOFoqLwk.js";import{A as ke}from"./index-Dq2c3PgN.js";import{F as E}from"./index-DaSuuuc_.js";import{C as K}from"./index-B3toik6r.js";import{A as Se}from"./index-BekAJkrL.js";import{s as z}from"./index-CMSWDbAm.js";import{P as Ue,F as y}from"./index-mcIkmG-z.js";import{I as O,S as Fe}from"./index-Cd0SFHu0.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function qe({searchAccountsTxt:e="",selectedMenuTab:t={}}={}){const{isModalOpen:o}=_(H),a=[];e&&a.push(e),t.type&&a.push(t);const{data:s,isFetching:u,isLoading:d,refetch:i}=Y({queryFn:async()=>x("accounts",void 0,{search:e,...t},"GET"),queryKey:["accounts",...a],refetchInterval:o?2e3:!1});return{accounts:(s==null?void 0:s.data)||[],isFetchingAccounts:u,isLoadingAccounts:d,refetchAccounts:i}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Re(){const[e]=ye({}),t=e.get("value")||"",a={type:e.get("type")||"",value:t},s=te(),{isError:u,isPending:d,isSuccess:i,mutateAsync:n}=Q({mutationFn:async p=>x("account/save",{accountData:p},void 0,"POST"),mutationKey:["save_account"],onSuccess:()=>{s.invalidateQueries({queryKey:["active-accounts"]}),s.invalidateQueries({queryKey:["accounts",a]})}});return{isSavingAccount:d,isSavingAccountError:u,isSavingAccountSuccess:i,saveAccount:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function $e(){const{isPending:e,mutateAsync:t}=Q({mutationFn:async o=>x(o.url,o.data,void 0,"POST")});return{isVerifyAccountLoading:e,verifyAccount:o=>t(o)}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Oe=e=>{switch(e){case"googleBusinessProfile":return h(X,{children:[r("You can only add verified locations."),c("br",{}),r("If you need to add another Google account, simply log out of or switch Google accounts first.")]});default:return c(X,{children:J(r("If you need to add another %s  account, simply log out of or switch %s accounts first."),e,e)})}};function Be({count:e=0,platform:t}){return h(g.Text,{style:{fontSize:"14px"},type:"secondary",children:[h("div",{children:[J(r("Total %s accounts found"),e)," "]}),Oe(t)]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=({token:e})=>({background:`${e.colorBgLayout} `});function he({accountType:e,connectAccountId:t,handleConnect:o,icon:a,id:s,isConnected:u,isLoading:d,name:i}){const n=JSON.parse(e).account_type;return c(K,{css:Ee,size:"small",children:h(W,{align:"middle",justify:"space-between",children:[c(b,{children:h(k,{size:"small",children:[c(ke,{size:40,src:a}),h(E,{style:{maxWidth:"300px"},vertical:!0,children:[c(g.Text,{ellipsis:!0,strong:!0,title:i,children:i}),c(g.Text,{type:"secondary",children:n})]})]})}),c(b,{children:u?c(g.Text,{className:"mx-2",type:"success",children:r("Saved")}):c(w,{disabled:d&&s!==t,loading:d&&s===t,onClick:o,type:"primary",children:r("Save")})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ve(){var B;const[e,t]=xe(H),{isProClient:o}=G(ce),{isSavingAccount:a,saveAccount:s}=Re(),{isVerifyAccountLoading:u,verifyAccount:d}=$e(),[i,n]=q.useState(),p=()=>{t(re)},m=q.useMemo(()=>Array.isArray(e==null?void 0:e.details)?e.details.map(l=>{const{details:C}=l.account,{account_id:T,account_name:j,icon:P}=JSON.parse(C);return{accountDetails:l.account,accountIcon:P,accountId:T,accountName:j,isConnected:l.isConnected,verifyUrl:l.verifyUrl}}):[],[e==null?void 0:e.details]),f=async(l,C)=>{var P;n(l.account_id);let T={...l};if(C){const A=await d({data:T,url:C});if(A.status==="error")return n(void 0),z.error({description:A.data.message,message:"Account Save Failed"});T=A.data.accountDetails}const j=await s(T);if(n(void 0),j.status==="error")return z.error({description:j.data.message,message:"Account Save Failed"});if(j.status==="success"){const N=(P=e==null?void 0:e.details)==null?void 0:P.map(A=>{const D=A.account.account_id;return String(D)===String(j.data.account.account_id)?{...A,isConnected:!0}:A});t(A=>({...A,details:N})),z.success({message:"Account Save Successfully"})}},S=e.platform&&oe[e.platform].name;return q.useEffect(()=>{function l(C){C.preventDefault(),t(re)}return window.addEventListener("beforeunload",l,{capture:!0}),()=>{window.removeEventListener("beforeunload",l,{capture:!0})}},[]),h(ae,{footer:!1,maskClosable:!1,onCancel:p,open:e.isModalOpen,styles:{body:{maxHeight:"70vh",overflowY:"scroll",padding:"0 8px"}},title:e.loading?h(k,{children:[c(F.Avatar,{active:!0,shape:"circle",size:"large"}),c(F.Input,{active:!0,size:"small"})]}):h(E,{align:"center",gap:"small",children:[c(Z,{name:e.platform,size:30}),c(g.Text,{style:{fontSize:"18px",textTransform:"capitalize"},children:S})]}),children:[h(k,{className:"w-100 py-2",direction:"vertical",children:[e.loading&&!e.status?Array.from({length:3}).fill(0).map((l,C)=>c(K,{className:"w-100",size:"small",children:h(k,{className:"w-100",size:"large",children:[c(F.Avatar,{active:!0,shape:"circle",size:"large"}),c(F.Input,{active:!0,block:!0,size:"small",style:{width:"260px"}}),c(F.Button,{active:!0})]})},`key-${C+9}`)):(S==="LinkedIn"&&!o?h(E,{gap:10,vertical:!0,children:[c(g.Title,{level:5,children:r("Profile")}),m&&m.length&&m.map(l=>c(he,{accountType:l.accountDetails.details,connectAccountId:i,handleConnect:()=>f(l.accountDetails,l.verifyUrl),icon:l.accountIcon,id:l.accountId,isConnected:l.isConnected,isLoading:a||u,name:l.accountName},l.accountId)),h(g.Title,{level:5,children:[r("Page")," ",c(Ae,{color:"#ff8609",size:20})]}),c(K,{className:"w-100",size:"small",children:h(k,{className:"w-100",size:"large",children:[c(F.Avatar,{shape:"circle",size:"large"}),c(F.Input,{block:!0,size:"small",style:{width:"260px"}}),c(F.Button,{})]})}),c(g.Text,{strong:!0,children:r("Linkedin Page feature on pro")})]}):m&&m.length&&m.map(l=>c(he,{accountType:l.accountDetails.details,connectAccountId:i,handleConnect:()=>f(l.accountDetails,l.verifyUrl),icon:l.accountIcon,id:l.accountId,isConnected:l.isConnected,isLoading:a||u,name:l.accountName},l.accountId)))||"",e.status==="success"&&!((B=e.details)!=null&&B.length)&&c(g.Title,{level:5,children:S==="Pinterest"?r("Board Not Found"):r("Account Not Found")}),e.status==="error"&&h(E,{vertical:!0,children:[h(g.Title,{level:5,children:[" ",r("Account connect failed")]}),c(Se,{description:e.message,type:"error"})]})]}),e.status&&S?c(Be,{count:m==null?void 0:m.length,platform:S}):c(g.Title,{level:5,children:"Fetching data, please wait..."})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function De(){const{data:e,isFetching:t,isLoading:o,refetch:a}=Y({queryFn:async()=>x("platforms-credentials",void 0,void 0,"POST"),queryKey:["clientIds"]}),{clientInfo:s}=(e==null?void 0:e.data)||{};return{clientIds:s,isFetchingClientIds:t,isLoadingClientIds:o,refetchClientIds:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue={bluesky:"https://bit-social.com/documentation/accounts/connect-your-bluesky-account-with-bit-social/",discord:"https://bit-social.com/docs/accounts/connect-your-discord-account-with-bit-social/",facebook:"https://bit-social.com/documentation/accounts/connect-your-facebook-account-with-bit-social/",googleBusinessProfile:"https://bit-social.com/documentation/accounts/connect-your-google-business-profile-account-with-bit-social/",instagram:"https://bit-social.com/documentation/accounts/connect-your-instagram-account-with-bit-social/",linkedin:"https://bit-social.com/documentation/accounts/connect-your-linkedin-account-with-bit-social/",pinterest:"https://bit-social.com/docs/accounts/connect-your-pinterest-account-with-bit-social/",tiktok:"https://bit-social.com/documentation/accounts/connect-your-tiktok-account-with-bit-social/",tumblr:"https://bit-social.com/documentation/accounts/connect-your-tumblr-account-with-bit-social/",twitter:"https://bit-social.com/documentation/accounts/connect-your-twitter-account-with-bit-social/"};function Ge(e){if(!e||!ue[e]){console.error("Invalid link key",e);return}const t=new URL(ue[e]);return t.searchParams.append("utm_source",V.PLUGIN_SLUG),t.searchParams.append("utm_medium","inside-plugin"),t.href}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function de({platform:e}){return c(w,{href:Ge(e),icon:c(Pe,{}),rel:"noopener noreferrer nofollow",size:"small",style:{whiteSpace:"nowrap"},target:"_blank",type:"link",children:r("Doc Link")})}const Ke="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='512'%20width='512'%20xmlns:v='https://vecta.io/nano'%3e%3cpath%20d='M501.301%20131.964c-5.888-22.172-23.237-39.633-45.266-45.56C416.107%2075.636%20256%2075.636%20256%2075.636s-160.107%200-200.035%2010.768c-22.029%205.926-39.378%2023.388-45.266%2045.56C0%20172.152%200%20256%200%20256s0%2083.848%2010.699%20124.036c5.888%2022.172%2023.237%2039.633%2045.266%2045.56C95.893%20436.364%20256%20436.364%20256%20436.364s160.107%200%20200.035-10.768c22.029-5.927%2039.378-23.388%2045.266-45.56C512%20339.848%20512%20256%20512%20256s0-83.848-10.699-124.036z'%20fill='red'/%3e%3cpath%20d='m203.636%20332.128%20133.818-76.126-133.818-76.13z'%20fill='%23fff'/%3e%3c/svg%3e";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Link:He}=g,pe={bluesky:"https://www.youtube.com/watch?v=2ftNPVnAISI",discord:"https://www.youtube.com/watch?v=q85NrjFQ33Y",facebook:"https://www.youtube.com/watch?v=V7-DqQ4dJg4",googleBusinessProfile:"https://www.youtube.com/watch?v=o3Hf2v4HsVs",linkedin:"https://www.youtube.com/watch?v=YcmVEq3GGsk",pinterest:"https://www.youtube.com/watch?v=6deQqqhMYLY",tiktok:"https://www.youtube.com/watch?v=5w5c0kY2tno",tumblr:"https://www.youtube.com/watch?v=WfxpNBBAjRQ",twitter:"https://www.youtube.com/watch?v=v2m99Itn-KU"};function ge({platform:e}){if(!(!e||!pe[e]))return c(He,{href:pe[e],rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:c(w,{icon:c(ke,{alt:"youtube",size:20,src:Ke}),size:"small",type:"text",children:r("Tutorial")})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Link:Ye}=g;function I({devLink:e,name:t}){return h(X,{children:[r("To get app credentials, Visit")," ",h(Ye,{href:e,rel:"noopener noreferrer nofollow",strong:!0,style:{whiteSpace:"nowrap"},target:"_blank",children:[oe[t].name," ",r("Developer"),c(Ie,{size:12,style:{transform:"translateY(-2px)"}})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:Qe}=g,Je=e=>{switch(e){case"discord":return c(I,{devLink:"https://discord.com/developers/applications/",name:e});case"facebook":return c(I,{devLink:"https://developers.facebook.com/apps/",name:e});case"googleBusinessProfile":return c(I,{devLink:"https://console.cloud.google.com/",name:e});case"instagram":return c(I,{devLink:"https://developers.facebook.com/apps/",name:e});case"linkedin":return c(I,{devLink:"https://www.linkedin.com/developers/apps",name:e});case"pinterest":return c(I,{devLink:"https://developers.pinterest.com/apps/",name:e});case"tiktok":return c(I,{devLink:"https://developers.tiktok.com",name:e});case"tumblr":return c(I,{devLink:"https://www.tumblr.com/oauth/apps",name:e});case"twitter":return c(I,{devLink:"https://developer.twitter.com/en/portal/dashboard",name:e});default:return""}};function We({platform:e}){return c(Qe,{children:Je(e)})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Xe(){const e=te(),{isPending:t,mutateAsync:o}=Q({mutationFn:async a=>x("custom-app",{...a},void 0,"POST"),mutationKey:["custom_app"],onSuccess:()=>{e.invalidateQueries({queryKey:["get-customApp"]})}});return{createCustomApp:a=>o(a),isLoadingCreateCustomApp:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ze(e){const{data:t,isLoading:o,refetch:a}=Y({queryFn:async()=>x("custom-app",void 0,{platform:e},"GET"),queryKey:["get-customApp"],refetchOnWindowFocus:!1});return{customApps:t==null?void 0:t.data,isLoadingCustomApp:o,refetchCustomApp:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function et(){const e=te(),{isPending:t,mutateAsync:o}=Q({mutationFn:async a=>x(`custom-app/${a}/destroy`,void 0,void 0,"POST"),onSuccess:()=>{e.invalidateQueries({queryKey:["get-customApp"]})}});return{deleteCustomApp:a=>o(a),isLoadingDeleteCustomApp:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const je=(e,t,o,a,s,u,d)=>{const[i,n]=[700,700],p=Math.round((window.innerWidth-i)/2),m=Math.round((window.innerHeight-n)/2),f=window.open(e,t,`width=${i},height=${n},left=${p},top=${m},toolbar=off`),S=setInterval(()=>{localStorage.setItem("__bitSocial_platform_interval",String(S)),!(!(f!=null&&f.closed)||f!=null&&f.closed&&!localStorage.getItem("__bitSocial_platform"))&&(clearInterval(S),o==null||o(),d(a,s,u))},500)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const tt=`${V.CLIENT_SECRET_URL}`,{baseAuthStateURL:ct}=_(M),at=async e=>{const t={client_id:e.appId,platform:"facebook"},o={body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"};return fetch(tt,o).then(a=>a.json())},ot=async(e,t,o)=>{const a={...e};if(o==="oneClickAuth"){const i=await at(a);a.appSecret=i.clientSecret}const s={config:{authType:"OAuth2",platform:a.platform},payload:{client_id:a.appId,client_secret:a.appSecret,code:t.code,grant_type:"no need",redirect_uri:a.redirectUri}},{data:u,status:d}=await x("authorize",s,void 0,"POST");d==="success"&&be(H,{details:u,isModalOpen:!0,loading:!1,platform:"facebook",status:d})},st=async(e,t,o)=>{let a={};const s=localStorage.getItem("__bitSocial_platform");s&&(a=JSON.parse(s),localStorage.removeItem("__bitSocial_platform")),(!a||!a.code||a.error)&&z.error({description:`${a.error?`Cause: ${a.error}.`:""} Please try again`,message:"Authorization failed"});const u=await ot(e,a,o);return t(),u},it=(e,t,o,a)=>{if(!e.platform||!e.appId||!e.redirectUri)throw new Error("Missing credentials");const{appId:s,platform:u,redirectUri:d}=e,i=a==="oneClickAuth"?V.REDIRECT_URL:d,n="pages_show_list,pages_read_engagement,pages_manage_metadata,pages_manage_posts,business_management",p=new URL("https://www.facebook.com/dialog/oauth");p.searchParams.append("scope",n),p.searchParams.append("client_id",s),p.searchParams.append("redirect_uri",i),p.searchParams.append("state",ct+"#/accounts/auth/response"),je(p,u,o,e,t,a,st)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const rt=`${V.CLIENT_SECRET_URL}`,_e=`${V.REDIRECT_URL}`,{baseAuthStateURL:nt}=_(M),lt=async(e,t)=>{const o={config:{authType:"OAuth2",platform:e.platform},payload:{client_id:e.appId,client_secret:e.appSecret,code:t.code,grant_type:"null",redirect_uri:e.redirectUri}},{data:a,status:s}=await x("authorize",o,void 0,"POST");s==="success"&&be(H,{...{isModalOpen:!0,loading:!1,platform:"linkedin",status:s},details:a})},ht=async e=>{const t={client_id:e.appId,platform:e.platform},o={body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"};return fetch(rt,o).then(a=>a.json())},ut=async(e,t,o)=>{let a={};const s=localStorage.getItem("__bitSocial_platform"),u={...e};if(s&&(a=JSON.parse(s),localStorage.removeItem("__bitSocial_platform")),!a.code){z.error({description:`${a.error?`Cause: ${a.error}.`:""} Please try again`,message:"Authorization failed"});return}if(o==="oneClickAuth"){const i=await ht(e);(!i||!i.clientSecret)&&z.error({description:`Cause: ${i.message}. Please try again`,message:"Authorization failed"}),u.appSecret=i.clientSecret.toString(),u.redirectUri=_e}const d=await lt(u,a);return t(),d},dt=(e,t,o,a)=>{if(!e.platform||!e.appId||!e.redirectUri)throw new Error("Missing credentials");const{appId:s,platform:u,redirectUri:d}=e,i=a==="oneClickAuth"?_e:d,n="openid profile email w_member_social r_organization_admin w_organization_social rw_organization_admin",p=new URL("https://www.linkedin.com/oauth/v2/authorization");p.searchParams.append("scope",n),p.searchParams.append("client_id",s),p.searchParams.append("response_type","code"),p.searchParams.append("redirect_uri",i),p.searchParams.append("state",nt+"#/accounts/auth/response"),je(p,u,o,e,t,a,ut)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function pt(e){switch(e){case"facebook":return it;case"linkedin":return dt}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};_(M);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Me({authType:e="oneClickAuth",clientId:t,closeConnectModal:o,handleAuthCallback:a,isConnectLoading:s,platform:u,platformCredentialData:d,setCustomModalOpen:i}){const n=we(Te),p=pt;return c(w,{block:!0,disabled:!t,loading:s,onClick:()=>{const f=p(u,d.apiVersion);if(ee(u)){n(!0);return}i&&i(!1),f&&f(d,a,o,e)},size:"small",type:"primary",children:r("Connect")})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:gt}=g;var mt={name:"3s4yqf",styles:"width:400px"};function ft({closeConnectModal:e,credential:t,handleAuthCallback:o,handleDelete:a,isDeleteLoading:s,name:u,platform:d,setCustomModalOpen:i}){const n={apiVersion:t.apiVersion??void 0,appId:t.appKey,appSecret:t.appSecret,platform:d,redirectUri:t.redirectUri};return c(K,{css:mt,size:"small",children:h(W,{align:"middle",justify:"space-between",children:[c(gt,{className:"text-capitalize",ellipsis:!0,strong:!0,style:{width:"200px"},children:u}),h(k,{children:[c(Me,{authType:"customAuth",clientId:t.appKey,closeConnectModal:e,handleAuthCallback:o,platform:d,platformCredentialData:n,setCustomModalOpen:i}),c(Ue,{cancelText:r("No"),description:r("Are you sure to delete this app?"),okButtonProps:{danger:!0,loading:s},okText:r("Yes, Delete"),onConfirm:a,placement:"bottomRight",title:r("Delete the app"),children:c(w,{danger:!0,icon:c(ze,{}),type:"text"})})]})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:$,Title:Ct}=g,me=(e,t)=>({apiVersion:["twitter"],appName:["twitter","tumblr"]})[t].includes(e);var yt={name:"11vupei",styles:"border-right:1px solid #B9B9B9"};function At({closeConnectModal:e,handleAuthCallback:t,platform:o,setCustomModalOpen:a}){var U,se,ie;const{apiURL:s,siteUrl:u}=G(M),d=`${s.base}/redirect`,i=u,[n]=y.useForm(),[p,m]=q.useState({}),{createCustomApp:f,isLoadingCreateCustomApp:S}=Xe(),{deleteCustomApp:B,isLoadingDeleteCustomApp:l}=et(),{customApps:C}=Ze(o),T=q.useRef(null),j=v=>{try{navigator.clipboard.writeText(v),z.success({message:"Copied!"})}catch{T.current!=null&&(T.current.select(),document.execCommand("copy"),T.current.blur())}},P=v=>{n.setFieldsValue({apiVersion:v})},N=[{label:"v1.1 (media supported)",value:"1.1"},{label:"v2.0 (media unsupported)",value:"2"}],A=async v=>{const Le={...v,platform:o},R=await f(Le);(R==null?void 0:R.code)==="SUCCESS"?(n.resetFields(),z.success({description:R.data.message,message:"App successfully added!"})):(R.data.errorField&&m(R.data.errorField),z.error({description:R.data.message,message:"App add failed"}))},D=v=>{B(v)};return h(W,{className:"mt-4",gutter:[48,0],justify:"center",children:[c(b,{css:yt,span:12,children:h(y,{form:n,initialValues:{redirectUri:d},layout:"vertical",onFinish:A,children:[c(y.Item,{label:c($,{strong:!0,children:r("Homepage URI")}),name:"homepageUri",rules:[{message:"Please enter homepage url"}],children:h(k.Compact,{className:"w-100",children:[c(O,{defaultValue:`${i}`,ref:T,style:{width:"calc(100% - 32px)"}}),c(w,{icon:c(ne,{size:12}),onClick:()=>j(i),title:r("Click to copy")})]})}),c(y.Item,{label:c($,{strong:!0,children:r("Redirect URI")}),name:"redirectUri",rules:[{message:"Please enter redirect url",required:!0}],children:h(k.Compact,{className:"w-100",children:[c(O,{defaultValue:`${d}`,ref:T,style:{width:"calc(100% - 32px)"}}),c(w,{icon:c(ne,{size:12}),onClick:()=>j(d),title:r("Click to copy")})]})}),me(o,"apiVersion")?c(y.Item,{label:c($,{strong:!0,children:r("Api Version")}),name:"apiVersion",rules:[{message:"Please select an API version",required:!0}],children:c(Fe,{onChange:P,options:N})}):"",me(o,"appName")?h(y.Item,{label:c($,{strong:!0,children:r("App Name")}),name:"appName",rules:[{message:"Please enter your app name",required:!0}],children:[c(O,{}),p.appName&&c(g.Text,{type:"danger",children:(U=p.appName)==null?void 0:U[0]})]}):"",c(k,{className:"pb-2",children:c(We,{platform:o})}),h(y.Item,{label:c($,{strong:!0,children:r("App Key or Client ID")}),name:"appKey",rules:[{message:"Please enter your app key",required:!0}],children:[c(O,{}),p.appKey&&c(g.Text,{type:"danger",children:(se=p.appKey)==null?void 0:se[0]})]}),h(y.Item,{label:c($,{strong:!0,children:r("App Secret or Client Secret")}),name:"appSecret",rules:[{message:"Please enter your app secret",required:!0}],children:[c(O,{}),p.appSecret&&c(g.Text,{type:"danger",children:(ie=p.appSecret)==null?void 0:ie[0]})]}),c(y.Item,{children:c(w,{className:"w-100",loading:S,onClick:()=>{n.submit()},size:"large",type:"primary",children:r("Add")})})]},o)}),h(b,{span:12,children:[c(Ct,{level:5,children:r("Connected Apps")}),c(k,{direction:"vertical",children:C&&C.length?C.map(v=>c(ft,{appId:v.id,closeConnectModal:e,credential:v.credential,handleAuthCallback:t,handleDelete:()=>D(v.id),isDeleteLoading:l,name:v.name,platform:o,setCustomModalOpen:a},v.id)):c($,{children:r("No App Found")})})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function bt({platform:e}){switch(e){case"bluesky":return c(Se,{message:"If 2FA is enable, you must use an App Password in the password field instead of your regular password.",showIcon:!0,type:"info"});default:return""}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Text:fe}=g;function wt({closeConnectModal:e,handleAuthCallback:t,platform:o}){const[a]=y.useForm();return h(y,{form:a,layout:"vertical",onFinish:async u=>{},children:[c(y.Item,{label:c(fe,{strong:!0,children:r("Username or Email")}),name:"id",rules:[{message:"Please enter your username or email",required:!0}],children:c(O,{})}),c(y.Item,{label:c(fe,{strong:!0,children:r("Password")}),name:"password",rules:[{message:"Please enter your password",required:!0}],children:c(O,{})}),c(y.Item,{children:c(bt,{platform:o})}),c(y.Item,{children:c(w,{className:"w-100",onClick:()=>{a.submit()},size:"large",type:"primary",children:J(r("Connect %s "),o)})})]},o)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Tt({closeConnectModal:e,currentConnectType:t,handleAuthCallback:o,platform:a,setCustomModalOpen:s}){switch(t){case"custom":return c(At,{closeConnectModal:e,handleAuthCallback:o,platform:a,setCustomModalOpen:s});case"login":return c(wt,{closeConnectModal:e,handleAuthCallback:o,platform:a})}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const vt=`${V.REDIRECT_URL}`,{Title:Ce}=g,kt={custom:r("Connect Custom %s App"),login:r("%s"),oneClick:r("Connect %s")};function L({clientId:e,closeConnectModal:t,isConnectLoading:o,name:a,platform:s,setAccountModal:u,types:d}){const{refetchAccounts:i}=qe(),[n,p]=ye({}),m=n.get("value")||"all",[f,S]=q.useState(),[B,l]=q.useState(!1),{token:C}=ve.useToken(),T=we(Te),{isProClient:j}=G(ce),P=()=>{l(!1)},N=U=>{if(S(U),ee(s)&&!j){T(!0);return}t(),l(!0)},A=()=>{p(U=>(U.set("type","platform"),U.set("value",String(m)),U)),i()},D=()=>{P(),u(!0)};return c(K,{style:{borderColor:C.colorBorder,height:"100%"},children:h(E,{gap:14,vertical:!0,children:[h(k,{align:"center",children:[c(Z,{name:s,size:30,style:{flexShrink:0}}),c(Ce,{className:"text-capitalize",level:5,style:{marginBottom:0},children:a||oe[s].name}),ee(s)&&!j&&c(Ae,{color:"#ff8609",size:20})]}),h(k,{size:0,children:[c(de,{platform:s}),c(ge,{platform:s})]}),h(k,{direction:"vertical",size:"small",children:[d.includes("custom")&&c(w,{block:!0,onClick:()=>N("custom"),size:"small",style:{borderColor:C.colorPrimary},children:r("Custom App")}),d.includes("login")&&c(w,{block:!0,onClick:()=>N("login"),size:"small",type:"primary",children:r("Login")}),d.includes("oneClick")&&e&&c(Me,{clientId:e,closeConnectModal:t,handleAuthCallback:A,isConnectLoading:o,platform:s,platformCredentialData:{appId:e,appSecret:"",platform:s,redirectUri:vt}})]}),f&&c(ae,{centered:!0,footer:!1,onCancel:()=>l(!1),onOk:P,open:B,title:c("div",{children:h(E,{align:"center",gap:10,children:[c(w,{icon:c(Ne,{size:24}),onClick:D,title:r("Back"),type:"text"}),c(Z,{name:s,size:34}),c(Ce,{className:"text-capitalize",level:5,style:{marginBottom:0},children:J(r(kt[f]),s)}),c(de,{platform:s}),c(ge,{platform:s})]})}),width:900,children:c(Tt,{closeConnectModal:t,currentConnectType:f,handleAuthCallback:A,platform:s,setCustomModalOpen:l})},s)]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ut({btnType:e="default"}){const{clientIds:t,isLoadingClientIds:o}=De(),{token:a}=ve.useToken(),{isDarkTheme:s}=G(ce),{isModalOpen:u}=G(H),[d,i]=q.useState(!1),n=()=>{const m=localStorage.getItem("__bitSocial_platform_interval");m&&(clearInterval(Number(m)),localStorage.removeItem("__bitSocial_platform_interval")),i(!1)},p=()=>{i(!0)};return h("div",{children:[e==="default"?c(w,{icon:c(le,{size:18}),onClick:p,size:"small",type:"primary",children:r("Connect Account")}):c(w,{"aria-label":r("Connect Account"),icon:c(le,{size:30}),onClick:p,style:{alignItems:"center",border:`2px solid ${a.colorPrimary}`,color:s?a.colorTextBase:a.colorPrimary,display:"flex",fontSize:"17px",fontWeight:600,height:"100%",justifyContent:"center",minHeight:"110px",width:"100%"},type:"text",children:r("Connect Account")}),c(ae,{centered:!0,footer:!1,onCancel:n,open:d,style:{padding:"20px"},title:r("Connect Account"),width:1e3,children:h(W,{className:"p-2",gutter:[12,12],children:[c(b,{md:6,sm:12,xs:24,children:c(L,{clientId:t==null?void 0:t.facebook.id,closeConnectModal:n,isConnectLoading:o,platform:"facebook",setAccountModal:i,status:t==null?void 0:t.facebook.status,types:["oneClick","custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{clientId:t==null?void 0:t.linkedin.id,closeConnectModal:n,isConnectLoading:o,platform:"linkedin",setAccountModal:i,status:t==null?void 0:t.linkedin.status,types:["oneClick","custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{clientId:t==null?void 0:t.googleBusinessProfile.id,closeConnectModal:n,isConnectLoading:o,name:"Google Business",platform:"googleBusinessProfile",setAccountModal:i,status:t==null?void 0:t.googleBusinessProfile.status,types:["oneClick","custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{clientId:t==null?void 0:t.pinterest.id,closeConnectModal:n,isConnectLoading:o,platform:"pinterest",setAccountModal:i,status:t==null?void 0:t.pinterest.status,types:["oneClick","custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{clientId:t==null?void 0:t.discord.id,closeConnectModal:n,isConnectLoading:o,platform:"discord",setAccountModal:i,status:t==null?void 0:t.discord.status,types:["oneClick","custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{clientId:t==null?void 0:t.tumblr.id,closeConnectModal:n,isConnectLoading:o,platform:"tumblr",setAccountModal:i,status:t==null?void 0:t.tumblr.status,types:["oneClick","custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{clientId:t==null?void 0:t.instagram.id,closeConnectModal:n,isConnectLoading:o,platform:"instagram",setAccountModal:i,status:t==null?void 0:t.instagram.status,types:["oneClick","custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{closeConnectModal:n,name:"TikTok",platform:"tiktok",setAccountModal:i,types:["custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{closeConnectModal:n,name:"X (Twitter)",platform:"twitter",setAccountModal:i,types:["custom"]})}),c(b,{md:6,sm:12,xs:24,children:c(L,{closeConnectModal:n,name:"Bluesky",platform:"bluesky",setAccountModal:i,status:0,types:["login"]})})]})}),u&&c(Ve,{})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ft(){const{data:e,isLoading:t,refetch:o}=Y({queryFn:async()=>x("pro_groups",void 0,void 0,"GET"),queryKey:["groups"]});return{groups:(e==null?void 0:e.data)||[],isLoadingGroups:t,refetchGroups:o}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const qt=e=>e.accounts.map(o=>Number(o.id)),Rt=(e,t,o)=>{const a=t.find(s=>s.name.toLowerCase()===e.toLowerCase());return!!a&&a.id!==o};export{Ut as C,Ft as a,qt as g,Rt as i,qe as u};
