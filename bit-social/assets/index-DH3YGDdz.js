import{r as e,i as ne,m as se,k as ae,n as ie,b as le,X as q,w as ce,b6 as D,c as T,bo as de,W as ge,aX as ue}from"./main-loud-buses-flash.js";import{a as me,r as pe}from"./row-DRTpapjx.js";import{P as ve}from"./index-B3DTKqfm.js";const _=e.createContext({}),fe=t=>{const{antCls:r,componentCls:a,iconCls:o,avatarBg:n,avatarColor:d,containerSize:b,containerSizeLG:g,containerSizeSM:y,textFontSize:x,textFontSizeLG:f,textFontSizeSM:M,iconFontSize:G,iconFontSizeLG:S,iconFontSizeSM:N,borderRadius:h,borderRadiusLG:z,borderRadiusSM:L,lineWidth:s,lineType:C}=t,v=(O,E,R,$)=>({width:O,height:O,borderRadius:"50%",fontSize:E,[`&${a}-square`]:{borderRadius:$},[`&${a}-icon`]:{fontSize:R,[`> ${o}`]:{margin:0}}});return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({},ae(t)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:d,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:n,border:`${ie(s)} ${C} transparent`,"&-image":{background:"transparent"},[`${r}-image-img`]:{display:"block"}}),v(b,x,G,h)),{"&-lg":Object.assign({},v(g,f,S,z)),"&-sm":Object.assign({},v(y,M,N,L)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Se=t=>{const{componentCls:r,groupBorderColor:a,groupOverlapping:o,groupSpace:n}=t;return{[`${r}-group`]:{display:"inline-flex",[r]:{borderColor:a},"> *:not(:first-child)":{marginInlineStart:o}},[`${r}-group-popover`]:{[`${r} + ${r}`]:{marginInlineStart:n}}}},he=t=>{const{controlHeight:r,controlHeightLG:a,controlHeightSM:o,fontSize:n,fontSizeLG:d,fontSizeXL:b,fontSizeHeading3:g,marginXS:y,marginXXS:x,colorBorderBg:f}=t;return{containerSize:r,containerSizeLG:a,containerSizeSM:o,textFontSize:n,textFontSizeLG:n,textFontSizeSM:n,iconFontSize:Math.round((d+b)/2),iconFontSizeLG:g,iconFontSizeSM:n,groupSpace:x,groupOverlapping:-y,groupBorderColor:f}},J=ne("Avatar",t=>{const{colorTextLightSolid:r,colorTextPlaceholder:a}=t,o=se(t,{avatarBg:a,avatarColor:r});return[fe(o),Se(o)]},he);var Ce=function(t,r){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(a[o[n]]=t[o[n]]);return a};const K=e.forwardRef((t,r)=>{const{prefixCls:a,shape:o,size:n,src:d,srcSet:b,icon:g,className:y,rootClassName:x,style:f,alt:M,draggable:G,children:S,crossOrigin:N,gap:h=4,onError:z}=t,L=Ce(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[s,C]=e.useState(1),[v,O]=e.useState(!1),[E,R]=e.useState(!0),$=e.useRef(null),j=e.useRef(null),w=le(r,$),{getPrefixCls:P,avatar:m}=e.useContext(q),u=e.useContext(_),F=()=>{if(!j.current||!$.current)return;const l=j.current.offsetWidth,i=$.current.offsetWidth;l!==0&&i!==0&&h*2<i&&C(i-h*2<l?(i-h*2)/l:1)};e.useEffect(()=>{O(!0)},[]),e.useEffect(()=>{R(!0),C(1)},[d]),e.useEffect(F,[h]);const B=()=>{(z==null?void 0:z())!==!1&&R(!1)},c=ce(l=>{var i,A;return(A=(i=n??(u==null?void 0:u.size))!==null&&i!==void 0?i:l)!==null&&A!==void 0?A:"default"}),W=Object.keys(typeof c=="object"?c||{}:{}).some(l=>["xs","sm","md","lg","xl","xxl"].includes(l)),I=me(W),Q=e.useMemo(()=>{if(typeof c!="object")return{};const l=pe.find(A=>I[A]),i=c[l];return i?{width:i,height:i,fontSize:i&&(g||S)?i/2:18}:{}},[I,c]),p=P("avatar",a),H=D(p),[U,Y,Z]=J(p,H),ee=T({[`${p}-lg`]:c==="large",[`${p}-sm`]:c==="small"}),V=e.isValidElement(d),te=o||(u==null?void 0:u.shape)||"circle",oe=T(p,ee,m==null?void 0:m.className,`${p}-${te}`,{[`${p}-image`]:V||d&&E,[`${p}-icon`]:!!g},Z,H,y,x,Y),re=typeof c=="number"?{width:c,height:c,fontSize:g?c/2:18}:{};let k;if(typeof d=="string"&&E)k=e.createElement("img",{src:d,draggable:G,srcSet:b,onError:B,alt:M,crossOrigin:N});else if(V)k=d;else if(g)k=g;else if(v||s!==1){const l=`scale(${s})`,i={msTransform:l,WebkitTransform:l,transform:l};k=e.createElement(de,{onResize:F},e.createElement("span",{className:`${p}-string`,ref:j,style:Object.assign({},i)},S))}else k=e.createElement("span",{className:`${p}-string`,style:{opacity:0},ref:j},S);return U(e.createElement("span",Object.assign({},L,{style:Object.assign(Object.assign(Object.assign(Object.assign({},re),Q),m==null?void 0:m.style),f),className:oe,ref:w}),k))}),X=t=>{const{size:r,shape:a}=e.useContext(_),o=e.useMemo(()=>({size:t.size||r,shape:t.shape||a}),[t.size,t.shape,r,a]);return e.createElement(_.Provider,{value:o},t.children)},be=t=>{var r,a,o,n;const{getPrefixCls:d,direction:b}=e.useContext(q),{prefixCls:g,className:y,rootClassName:x,style:f,maxCount:M,maxStyle:G,size:S,shape:N,maxPopoverPlacement:h,maxPopoverTrigger:z,children:L,max:s}=t,C=d("avatar",g),v=`${C}-group`,O=D(C),[E,R,$]=J(C,O),j=T(v,{[`${v}-rtl`]:b==="rtl"},$,O,y,x,R),w=ge(L).map((u,F)=>ue(u,{key:`avatar-key-${F}`})),P=(s==null?void 0:s.count)||M,m=w.length;if(P&&P<m){const u=w.slice(0,P),F=w.slice(P,m),B=(s==null?void 0:s.style)||G,c=((r=s==null?void 0:s.popover)===null||r===void 0?void 0:r.trigger)||z||"hover",W=((a=s==null?void 0:s.popover)===null||a===void 0?void 0:a.placement)||h||"top",I=Object.assign(Object.assign({content:F},s==null?void 0:s.popover),{classNames:{root:T(`${v}-popover`,(n=(o=s==null?void 0:s.popover)===null||o===void 0?void 0:o.classNames)===null||n===void 0?void 0:n.root)},placement:W,trigger:c});return u.push(e.createElement(ve,Object.assign({key:"avatar-popover-key",destroyOnHidden:!0},I),e.createElement(K,{style:B},`+${m-P}`))),E(e.createElement(X,{shape:N,size:S},e.createElement("div",{className:j,style:f},u)))}return E(e.createElement(X,{shape:N,size:S},e.createElement("div",{className:j,style:f},w)))},ye=K;ye.Group=be;export{ye as A};
