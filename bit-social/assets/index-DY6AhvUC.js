import{Z as Q,a1 as f,G as _,ac as V,w as F,v as Z,x as $,y as a,z as i,j as t,B as X,S as d,J as B,an as tt,K as h,F as A,T as j,a0 as et,D as st,E as ot,H as at,I as L}from"./main-itchy-lizards-begin.js";import{u as it,a as nt}from"./useMemoDebounce-Du7DPjtB.js";import{u as ct}from"./usePostTypes-CQIUadDO.js";import{u as rt,C as E}from"./groupHelper-4Krp3m4G.js";import{u as lt,F as ut,A as ht}from"./useIntervalTypes-B4AIq2M5.js";import{C as r}from"./index-ZkLQuNjo.js";import{F as p}from"./index-Cg3O_i2u.js";import{s as pt}from"./index-BoR4ifJC.js";import{C as v,R as dt}from"./row-DS_v3-TD.js";import{S as z}from"./index-gWDjIEDI.js";import{S as P,I as gt}from"./index-B1SzMXAY.js";import{s as mt}from"./index-ZPNDk7I7.js";import"./PlatformIcon-C7lDNzyq.js";import"./index-BSv2bKO6.js";import"./index-DovNTtFJ.js";import"./index-D7rEAE3Q.js";import"./index-BH-lSI8s.js";import"./collapse-BbEVqHco.js";import"./index-B0JLC_73.js";import"./index-BEJ68sOq.js";import"./EllipsisOutlined-D70YSME7.js";import"./Dropdown-lxH1BYkb.js";import"./context-Dy7vxSCG.js";import"./move-C2L8IGTK.js";import"./EyeOutlined-DtoKprAP.js";function yt(s){const e=Q(s,(n,l,g)=>l(e,f(n(e),typeof g=="function"?g:()=>g)));return e}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const ft={accounts:{accountIds:[],groupIds:[]},isEnabled:!1,keepLogs:!0,postDelay:{every:0,unit:""},postType:["post"],taxonomies:["categories","tags"]},D=globalThis.jotaiAtomCache.get("/home/runner/work/bit-social/bit-social/frontend/src/common/globalStates/$autoPostSettings.ts/$autoPostSettings",yt(ft));D.debugLabel="$autoPostSettings";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};function bt(){const s=_(D),{data:e,isLoading:n}=V({queryFn:async()=>{const{data:l}=await F("autoPostSettings",void 0,void 0,"GET");return l?(s(l),l):[]},queryKey:["autoPostSettings"]});return{autoPostSettings:e,isLoadingAutoPostSettings:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};function At(){const{isPending:s,isSuccess:e,mutateAsync:n}=Z({mutationFn:async l=>F("autoPostSettings/update",{autoPostSettings:l},void 0,"POST"),mutationKey:["autoPostSettingsUpdate"]});return{isSettingsUpdateSuccessfully:e,isUpdatingAutoPostSettings:s,updateAutoPostSettings:n}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const Tt="0";function N(s){const{every:e,unit:n}=s;return e===0&&n===""?"immediately":"delay"}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const{Title:St}=j;function wt(){const{token:s}=$.useToken();return a(A,{children:[a(St,{level:5,children:[" ",i("Post templates")," "]}),a(r,{actions:[t(tt,{to:"/templates",children:t(X,{type:"primary",children:a(d,{align:"center",size:2,children:[t("div",{children:i("Templates")}),t(B,{})]})})},"template")],style:{borderColor:s.colorBorder},styles:{body:{height:"380px",width:"80%"}},children:[a(d,{className:"py-2",children:[t(h.Avatar,{size:"large"}),t(h.Input,{size:"small"})]}),t(h,{}),t(h.Image,{}),a(p,{className:"py-3",gap:10,justify:"space-around",children:[t(h.Button,{size:"small"}),t(h.Button,{size:"small"}),t(h.Button,{size:"small"})]})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};const{Link:vt,Paragraph:Pt,Text:C,Title:Ct}=j;var jt={name:"p4355k",styles:"min-width:180px"},Dt={name:"m0jwvv",styles:"width:80px"},Mt={name:"ypff5m",styles:"min-width:100px"};function te(){const{token:s}=$.useToken(),[e,n]=et(D),{isSettingsUpdateSuccessfully:l,isUpdatingAutoPostSettings:g,updateAutoPostSettings:U}=At(),{isLoadingAutoPostSettings:T}=bt(),[M,Y]=pt.useMessage(),{accounts:x}=rt(),{isProClient:b}=st(ot),I=_(at),O=lt(),{loadingPostType:R,postTypes:k}=ct(),q=k&&Object.values(k).map(o=>({label:a(A,{children:[o.label," ",o.name!=="post"&&!b&&t(L,{color:"#ff8609",size:16})]}),value:o.name}));it(async()=>{const{status:o}=await U(e);l&&o&&nt(M,o)},400,[e]);const m=(o,c)=>{const{accounts:u,isEnabled:S}=e,J=!u.accountIds.length;if(o==="isEnabled"&&J&&!S){mt.warning({message:"Create and select an account first!",placement:"topRight"});return}if(!b&&o==="postType"&&Array.isArray(c)&&c.length&&c.includes("post")){I(!0);return}if(o==="postType"&&Array.isArray(c)&&!c.length){n(y=>f(y,w=>{w.postType=["post"]})),M.open({content:"You must have a type",type:"warning"});return}if(!b&&o==="postDelay"&&c!==Tt){I(!0);return}if(o==="postDelay"){n(y=>f(y,w=>{w.postDelay=c==="delay"?{every:1,unit:"minute"}:{every:0,unit:""}}));return}n(y=>({...y,[o]:c}))},H=o=>{m("accounts",o)},K=o=>{const{value:c}=o.target;n(u=>f(u,S=>{S.postDelay.every=Number(c)}))},W=o=>{n(c=>f(c,u=>{o!==""&&e.postDelay.every<1&&(u.postDelay.every=1),o===""&&(u.postDelay.every=0),u.postDelay.unit=o}))},G=[{label:i("Immediately"),value:"immediately"},{label:a(A,{children:[i("Delay")," ",!b&&t(L,{color:"#ff8609",size:16})]}),value:"delay"}];return a(dt,{gutter:20,children:[Y,a(v,{span:6,children:[a(p,{className:"mb-1",justify:"space-between",children:[t(j.Title,{level:5,children:i("Accounts")}),x.length?t(E,{}):""]}),x.length?t(ut,{isLoading:g,selectedAccount:e.accounts,setSelectedAccount:H}):a(A,{children:[t(ht,{iconSize:40,textLevel:5}),t("div",{style:{textAlign:"center"},children:t(E,{})})]})]}),t(v,{span:12,children:a(r,{style:{backgroundColor:s.colorFillAlter},children:[t(Ct,{level:4,children:i("Auto Post Settings")}),a(Pt,{children:[i("All auto post related settings here."),a(vt,{className:"pl-2",href:"https://bit-social.com/docs/auto-publish-wordpress-posts-on-social-media/",rel:"noopener noreferrer nofollow",target:"_blank",underline:!0,children:[i("Doc here"),t(B,{size:12,style:{transform:"translateY(-2px)"}})]})]}),a(r,{style:{marginTop:10},children:[a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("When you publish a new wordpress post, the plugin shares the post on all active social accounts automatically."),title:i("Share posts automatically")}),t("div",{children:t(z,{checked:e.isEnabled,disabled:T,onChange:o=>m("isEnabled",o)})})]}),t(d,{className:"pt-2",children:t(C,{mark:!0,children:i("You have to create and select account first to enable this option!")})})]}),a(r,{style:{marginTop:10},children:[a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("Automatically share specific post types, like blogs or products, to your social accounts when published."),title:i("Share posts type")}),t("div",{children:t(P,{allowClear:!0,loading:T||R,mode:"multiple",onChange:o=>m("postType",o),options:q,placeholder:i("Post Type: Post"),style:{minWidth:"150px"},value:e.postType})})]}),t(d,{className:"pt-2",children:t(C,{mark:!0,children:t("span",{dangerouslySetInnerHTML:{__html:i("Share posts default type <b>Post</b>")}})})})]}),t(r,{style:{marginTop:10},children:a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("Optimize your sharing strategy with flexible timing options: use the dropdown menu to select when your posts will be shared after publishing"),title:i("Share post delay")}),a(p,{gap:20,vertical:!0,children:[t(d,{children:t(P,{css:jt,onChange:o=>m("postDelay",o),options:G,value:N(e.postDelay)})}),N(e.postDelay)==="delay"&&a(d,{className:"w-100",children:[t(gt,{css:Dt,min:1,onChange:K,type:"number",value:e.postDelay.every}),t(P,{css:Mt,onChange:W,options:O,value:e.postDelay.unit})]})]})]})}),a(r,{style:{marginTop:10},children:[a(p,{gap:50,justify:"space-between",children:[t(r.Meta,{description:i("If you don't want to keep the shared post logs, you need to disable the option. Disabling the option prevents you view your insights and you might encounter duplicate posts when you use the schedule module."),title:i("Enable auto post log")}),t("div",{children:t(z,{checked:e.keepLogs,disabled:T,onChange:o=>m("keepLogs",o)})})]}),t(d,{className:"pt-2",children:t(C,{mark:!0,children:i("You have to create and select account first to enable this option!")})})]})]})}),t(v,{span:6,children:t(wt,{})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,e){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,e),e)}};export{te as default};
